var X7=Object.create;var{defineProperty:G1,getPrototypeOf:Y7,getOwnPropertyNames:gQ,getOwnPropertyDescriptor:V7}=Object,yQ=Object.prototype.hasOwnProperty;var i1=(J,q,Q)=>{Q=J!=null?X7(Y7(J)):{};const G=q||!J||!J.__esModule?G1(Q,"default",{value:J,enumerable:!0}):Q;for(let X of gQ(J))if(!yQ.call(G,X))G1(G,X,{get:()=>J[X],enumerable:!0});return G},EQ=(J)=>{const q=EQ.moduleCache??=new WeakMap;var Q=q.get(J);if(Q)return Q;var G=G1({},"__esModule",{value:!0}),X={enumerable:!1};if(J&&typeof J==="object"||typeof J==="function"){for(let Y of gQ(J))if(!yQ.call(G,Y))G1(G,Y,{get:()=>J[Y],enumerable:!(X=V7(J,Y))||X.enumerable})}return q.set(J,G),G};var K0=(J,q)=>()=>(q||J((q={exports:{}}).exports,q),q.exports);var hQ=(J,q)=>{for(var Q in q)G1(J,Q,{get:q[Q],enumerable:!0,configurable:!0,set:(G)=>q[Q]=()=>G})};var K7=(J,q)=>()=>(J&&(q=J(J=0)),q);var J5=K0((R$,e6)=>{var MK=function(J){if(J=String(J),J.length>100)return;var q=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(J);if(!q)return;var Q=parseFloat(q[1]),G=(q[2]||"ms").toLowerCase();switch(G){case"years":case"year":case"yrs":case"yr":case"y":return Q*jK;case"weeks":case"week":case"w":return Q*HK;case"days":case"day":case"d":return Q*x8;case"hours":case"hour":case"hrs":case"hr":case"h":return Q*a8;case"minutes":case"minute":case"mins":case"min":case"m":return Q*r8;case"seconds":case"second":case"secs":case"sec":case"s":return Q*n8;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return Q;default:return}},BK=function(J){var q=Math.abs(J);if(q>=x8)return Math.round(J/x8)+"d";if(q>=a8)return Math.round(J/a8)+"h";if(q>=r8)return Math.round(J/r8)+"m";if(q>=n8)return Math.round(J/n8)+"s";return J+"ms"},LK=function(J){var q=Math.abs(J);if(q>=x8)return TJ(J,q,x8,"day");if(q>=a8)return TJ(J,q,a8,"hour");if(q>=r8)return TJ(J,q,r8,"minute");if(q>=n8)return TJ(J,q,n8,"second");return J+" ms"},TJ=function(J,q,Q,G){var X=q>=Q*1.5;return Math.round(J/Q)+" "+G+(X?"s":"")},n8=1000,r8=n8*60,a8=r8*60,x8=a8*24,HK=x8*7,jK=x8*365.25;e6.exports=function(J,q){q=q||{};var Q=typeof J;if(Q==="string"&&J.length>0)return MK(J);else if(Q==="number"&&isFinite(J))return q.long?LK(J):BK(J);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(J))}});var q5=K0((T$,Q5)=>{var PK=function(J){Q.debug=Q,Q.default=Q,Q.coerce=$,Q.disable=V,Q.enable=X,Q.enabled=K,Q.humanize=J5(),Q.destroy=W,Object.keys(J).forEach((Z)=>{Q[Z]=J[Z]}),Q.names=[],Q.skips=[],Q.formatters={};function q(Z){let B=0;for(let U=0;U<Z.length;U++)B=(B<<5)-B+Z.charCodeAt(U),B|=0;return Q.colors[Math.abs(B)%Q.colors.length]}Q.selectColor=q;function Q(Z){let B,U=null,H,j;function z(...M){if(!z.enabled)return;const P=z,O=Number(new Date),w=O-(B||O);if(P.diff=w,P.prev=B,P.curr=O,B=O,M[0]=Q.coerce(M[0]),typeof M[0]!=="string")M.unshift("%O");let L=0;M[0]=M[0].replace(/%([a-zA-Z%])/g,(S,F)=>{if(S==="%%")return"%";L++;const I=Q.formatters[F];if(typeof I==="function"){const y=M[L];S=I.call(P,y),M.splice(L,1),L--}return S}),Q.formatArgs.call(P,M),(P.log||Q.log).apply(P,M)}if(z.namespace=Z,z.useColors=Q.useColors(),z.color=Q.selectColor(Z),z.extend=G,z.destroy=Q.destroy,Object.defineProperty(z,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(U!==null)return U;if(H!==Q.namespaces)H=Q.namespaces,j=Q.enabled(Z);return j},set:(M)=>{U=M}}),typeof Q.init==="function")Q.init(z);return z}function G(Z,B){const U=Q(this.namespace+(typeof B==="undefined"?":":B)+Z);return U.log=this.log,U}function X(Z){Q.save(Z),Q.namespaces=Z,Q.names=[],Q.skips=[];const B=(typeof Z==="string"?Z:"").trim().replace(" ",",").split(",").filter(Boolean);for(let U of B)if(U[0]==="-")Q.skips.push(U.slice(1));else Q.names.push(U)}function Y(Z,B){let U=0,H=0,j=-1,z=0;while(U<Z.length)if(H<B.length&&(B[H]===Z[U]||B[H]==="*"))if(B[H]==="*")j=H,z=U,H++;else U++,H++;else if(j!==-1)H=j+1,z++,U=z;else return!1;while(H<B.length&&B[H]==="*")H++;return H===B.length}function V(){const Z=[...Q.names,...Q.skips.map((B)=>"-"+B)].join(",");return Q.enable(""),Z}function K(Z){for(let B of Q.skips)if(Y(Z,B))return!1;for(let B of Q.names)if(Y(Z,B))return!0;return!1}function $(Z){if(Z instanceof Error)return Z.stack||Z.message;return Z}function W(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return Q.enable(Q.load()),Q};Q5.exports=PK});var X5=K0((G5,gJ)=>{var kK=function(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let J;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&(J=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(J[1],10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},CK=function(J){if(J[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+J[0]+(this.useColors?"%c ":" ")+"+"+G5.humanize(this.diff),!this.useColors)return;const q="color: "+this.color;J.splice(1,0,q,"color: inherit");let Q=0,G=0;J[0].replace(/%[a-zA-Z%]/g,(X)=>{if(X==="%%")return;if(Q++,X==="%c")G=Q}),J.splice(G,0,q)},OK=function(J){try{if(J)G5.storage.setItem("debug",J);else G5.storage.removeItem("debug")}catch(q){}},wK=function(){let J;try{J=G5.storage.getItem("debug")}catch(q){}if(!J&&typeof process!=="undefined"&&("env"in process))J=process.env.DEBUG;return J},NK=function(){try{return localStorage}catch(J){}};G5.formatArgs=CK;G5.save=OK;G5.load=wK;G5.useColors=kK;G5.storage=NK();G5.destroy=(()=>{let J=!1;return()=>{if(!J)J=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();G5.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];G5.log=console.debug||console.log||(()=>{});gJ.exports=q5()(G5);var{formatters:xK}=gJ.exports;xK.j=function(J){try{return JSON.stringify(J)}catch(q){return"[UnexpectedJSONParseError]: "+q.message}}});var L5={};hQ(L5,{prototype:()=>{{return uK}},once:()=>{{return mK}},default:()=>{{return bK}},EventEmitter:()=>{{return u}}});var gK,u,hJ,$5,z5,yK,U5,H5,j5,M5,EK,hK,mK,_K,B5,s8,K5,EJ,Z5,W5,bK,uK;var P5=K7(()=>{gK=function(J){console&&console.warn&&console.warn(J)},u=function(){u.init.call(this)},hJ=function(J){if(typeof J!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof J)},$5=function(J){return J._maxListeners===void 0?u.defaultMaxListeners:J._maxListeners},z5=function(J,q,Q,G){var X,Y,V;if(hJ(Q),Y=J._events,Y===void 0?(Y=J._events=Object.create(null),J._eventsCount=0):(Y.newListener!==void 0&&(J.emit("newListener",q,Q.listener?Q.listener:Q),Y=J._events),V=Y[q]),V===void 0)V=Y[q]=Q,++J._eventsCount;else if(typeof V=="function"?V=Y[q]=G?[Q,V]:[V,Q]:G?V.unshift(Q):V.push(Q),X=$5(J),X>0&&V.length>X&&!V.warned){V.warned=!0;var K=new Error("Possible EventEmitter memory leak detected. "+V.length+" "+String(q)+" listeners added. Use emitter.setMaxListeners() to increase limit");K.name="MaxListenersExceededWarning",K.emitter=J,K.type=q,K.count=V.length,gK(K)}return J},yK=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)},U5=function(J,q,Q){var G={fired:!1,wrapFn:void 0,target:J,type:q,listener:Q},X=yK.bind(G);return X.listener=Q,G.wrapFn=X,X},H5=function(J,q,Q){var G=J._events;if(G===void 0)return[];var X=G[q];return X===void 0?[]:typeof X=="function"?Q?[X.listener||X]:[X]:Q?hK(X):M5(X,X.length)},j5=function(J){var q=this._events;if(q!==void 0){var Q=q[J];if(typeof Q=="function")return 1;if(Q!==void 0)return Q.length}return 0},M5=function(J,q){for(var Q=new Array(q),G=0;G<q;++G)Q[G]=J[G];return Q},EK=function(J,q){for(;q+1<J.length;q++)J[q]=J[q+1];J.pop()},hK=function(J){for(var q=new Array(J.length),Q=0;Q<q.length;++Q)q[Q]=J[Q].listener||J[Q];return q},mK=function(J,q){return new Promise(function(Q,G){function X(V){J.removeListener(q,Y),G(V)}function Y(){typeof J.removeListener=="function"&&J.removeListener("error",X),Q([].slice.call(arguments))}B5(J,q,Y,{once:!0}),q!=="error"&&_K(J,X,{once:!0})})},_K=function(J,q,Q){typeof J.on=="function"&&B5(J,"error",q,Q)},B5=function(J,q,Q,G){if(typeof J.on=="function")G.once?J.once(q,Q):J.on(q,Q);else if(typeof J.addEventListener=="function")J.addEventListener(q,function X(Y){G.once&&J.removeEventListener(q,X),Q(Y)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof J)},s8=typeof Reflect=="object"?Reflect:null,K5=s8&&typeof s8.apply=="function"?s8.apply:function(J,q,Q){return Function.prototype.apply.call(J,q,Q)};s8&&typeof s8.ownKeys=="function"?EJ=s8.ownKeys:Object.getOwnPropertySymbols?EJ=function(J){return Object.getOwnPropertyNames(J).concat(Object.getOwnPropertySymbols(J))}:EJ=function(J){return Object.getOwnPropertyNames(J)};Z5=Number.isNaN||function(J){return J!==J};u.EventEmitter=u;u.prototype._events=void 0;u.prototype._eventsCount=0;u.prototype._maxListeners=void 0;W5=10;Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return W5},set:function(J){if(typeof J!="number"||J<0||Z5(J))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+J+".");W5=J}});u.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};u.prototype.setMaxListeners=function(J){if(typeof J!="number"||J<0||Z5(J))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+J+".");return this._maxListeners=J,this};u.prototype.getMaxListeners=function(){return $5(this)};u.prototype.emit=function(J){for(var q=[],Q=1;Q<arguments.length;Q++)q.push(arguments[Q]);var G=J==="error",X=this._events;if(X!==void 0)G=G&&X.error===void 0;else if(!G)return!1;if(G){var Y;if(q.length>0&&(Y=q[0]),Y instanceof Error)throw Y;var V=new Error("Unhandled error."+(Y?" ("+Y.message+")":""));throw V.context=Y,V}var K=X[J];if(K===void 0)return!1;if(typeof K=="function")K5(K,this,q);else for(var $=K.length,W=M5(K,$),Q=0;Q<$;++Q)K5(W[Q],this,q);return!0};u.prototype.addListener=function(J,q){return z5(this,J,q,!1)};u.prototype.on=u.prototype.addListener;u.prototype.prependListener=function(J,q){return z5(this,J,q,!0)};u.prototype.once=function(J,q){return hJ(q),this.on(J,U5(this,J,q)),this};u.prototype.prependOnceListener=function(J,q){return hJ(q),this.prependListener(J,U5(this,J,q)),this};u.prototype.removeListener=function(J,q){var Q,G,X,Y,V;if(hJ(q),G=this._events,G===void 0)return this;if(Q=G[J],Q===void 0)return this;if(Q===q||Q.listener===q)--this._eventsCount===0?this._events=Object.create(null):(delete G[J],G.removeListener&&this.emit("removeListener",J,Q.listener||q));else if(typeof Q!="function"){for(X=-1,Y=Q.length-1;Y>=0;Y--)if(Q[Y]===q||Q[Y].listener===q){V=Q[Y].listener,X=Y;break}if(X<0)return this;X===0?Q.shift():EK(Q,X),Q.length===1&&(G[J]=Q[0]),G.removeListener!==void 0&&this.emit("removeListener",J,V||q)}return this};u.prototype.off=u.prototype.removeListener;u.prototype.removeAllListeners=function(J){var q,Q,G;if(Q=this._events,Q===void 0)return this;if(Q.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Q[J]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Q[J]),this;if(arguments.length===0){var X=Object.keys(Q),Y;for(G=0;G<X.length;++G)Y=X[G],Y!=="removeListener"&&this.removeAllListeners(Y);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(q=Q[J],typeof q=="function")this.removeListener(J,q);else if(q!==void 0)for(G=q.length-1;G>=0;G--)this.removeListener(J,q[G]);return this};u.prototype.listeners=function(J){return H5(this,J,!0)};u.prototype.rawListeners=function(J){return H5(this,J,!1)};u.listenerCount=function(J,q){return typeof J.listenerCount=="function"?J.listenerCount(q):j5.call(J,q)};u.prototype.listenerCount=j5;u.prototype.eventNames=function(){return this._eventsCount>0?EJ(this._events):[]};bK=u,uK=u.prototype});var C5=K0((r$,k5)=>{k5.exports=class J{constructor(q){if(!(q>0)||(q-1&q)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(q),this.mask=q-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(q){if(this.buffer[this.top]!==void 0)return!1;return this.buffer[this.top]=q,this.top=this.top+1&this.mask,!0}shift(){const q=this.buffer[this.btm];if(q===void 0)return;return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,q}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var N5=K0((a$,w5)=>{var O5=C5();w5.exports=class J{constructor(q){this.hwm=q||16,this.head=new O5(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(q){if(this.length++,!this.head.push(q)){const Q=this.head;this.head=Q.next=new O5(2*this.head.buffer.length),this.head.push(q)}}shift(){if(this.length!==0)this.length--;const q=this.tail.shift();if(q===void 0&&this.tail.next){const Q=this.tail.next;return this.tail.next=null,this.tail=Q,this.tail.shift()}return q}peek(){const q=this.tail.peek();if(q===void 0&&this.tail.next)return this.tail.next.peek();return q}isEmpty(){return this.length===0}}});var S5=K0((s$,F5)=>{var x5=function(J){return J.length},cK=function(J){const q=J.byteLength;let Q="";for(let G=0;G<q;G++)Q+=String.fromCharCode(J[G]);return Q},pK=function(J,q,Q=0,G=x5(q)){const X=Math.min(G,J.byteLength-Q);for(let Y=0;Y<X;Y++)J[Q+Y]=q.charCodeAt(Y);return X};F5.exports={byteLength:x5,toString:cK,write:pK}});var A5=K0((t$,I5)=>{var D5=function(J){let q=J.length;if(J.charCodeAt(q-1)===61)q--;if(q>1&&J.charCodeAt(q-1)===61)q--;return q*3>>>2},fK=function(J){const q=J.byteLength;let Q="";for(let G=0;G<q;G+=3)Q+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[J[G]>>2]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(J[G]&3)<<4|J[G+1]>>4]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(J[G+1]&15)<<2|J[G+2]>>6]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[J[G+2]&63];if(q%3===2)Q=Q.substring(0,Q.length-1)+"=";else if(q%3===1)Q=Q.substring(0,Q.length-2)+"==";return Q},lK=function(J,q,Q=0,G=D5(q)){const X=Math.min(G,J.byteLength-Q);for(let Y=0,V=0;V<X;Y+=4){const K=F8[q.charCodeAt(Y)],$=F8[q.charCodeAt(Y+1)],W=F8[q.charCodeAt(Y+2)],Z=F8[q.charCodeAt(Y+3)];J[V++]=K<<2|$>>4,J[V++]=($&15)<<4|W>>2,J[V++]=(W&3)<<6|Z&63}return X},F8=new Uint8Array(256);for(let J=0;J<"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".length;J++)F8["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(J)]=J;F8[45]=62;F8[95]=63;I5.exports={byteLength:D5,toString:fK,write:lK}});var g5=K0((e$,v5)=>{var T5=function(J){return J.length>>>1},dK=function(J){const q=J.byteLength;J=new DataView(J.buffer,J.byteOffset,q);let Q="",G=0;for(let X=q-q%4;G<X;G+=4)Q+=J.getUint32(G).toString(16).padStart(8,"0");for(;G<q;G++)Q+=J.getUint8(G).toString(16).padStart(2,"0");return Q},iK=function(J,q,Q=0,G=T5(q)){const X=Math.min(G,J.byteLength-Q);for(let Y=0;Y<X;Y++){const V=R5(q.charCodeAt(Y*2)),K=R5(q.charCodeAt(Y*2+1));if(V===void 0||K===void 0)return J.subarray(0,Y);J[Q+Y]=V<<4|K}return X},R5=function(J){if(J>=48&&J<=57)return J-48;if(J>=65&&J<=70)return J-65+10;if(J>=97&&J<=102)return J-97+10};v5.exports={byteLength:T5,toString:dK,write:iK}});var E5=K0((Jz,y5)=>{var WQ=function(J){let q=0;for(let Q=0,G=J.length;Q<G;Q++){const X=J.charCodeAt(Q);if(X>=55296&&X<=56319&&Q+1<G){const Y=J.charCodeAt(Q+1);if(Y>=56320&&Y<=57343){q+=4,Q++;continue}}if(X<=127)q+=1;else if(X<=2047)q+=2;else q+=3}return q},ZQ;if(typeof TextDecoder!=="undefined"){const J=new TextDecoder;ZQ=function q(Q){return J.decode(Q)}}else ZQ=function J(q){const Q=q.byteLength;let G="",X=0;while(X<Q){let Y=q[X];if(Y<=127){G+=String.fromCharCode(Y),X++;continue}let V=0,K=0;if(Y<=223)V=1,K=Y&31;else if(Y<=239)V=2,K=Y&15;else if(Y<=244)V=3,K=Y&7;if(Q-X-V>0){let $=0;while($<V)Y=q[X+$+1],K=K<<6|Y&63,$+=1}else K=65533,V=Q-X;G+=String.fromCodePoint(K),X+=V+1}return G};var $Q;if(typeof TextEncoder!=="undefined"){const J=new TextEncoder;$Q=function q(Q,G,X=0,Y=WQ(G)){const V=Math.min(Y,Q.byteLength-X);return J.encodeInto(G,Q.subarray(X,X+V)),V}}else $Q=function J(q,Q,G=0,X=WQ(Q)){const Y=Math.min(X,q.byteLength-G);q=q.subarray(G,G+Y);let V=0,K=0;while(V<Q.length){const $=Q.codePointAt(V);if($<=127){q[K++]=$,V++;continue}let W=0,Z=0;if($<=2047)W=6,Z=192;else if($<=65535)W=12,Z=224;else if($<=2097151)W=18,Z=240;q[K++]=Z|$>>W,W-=6;while(W>=0)q[K++]=128|$>>W&63,W-=6;V+=$>=65536?2:1}return Y};y5.exports={byteLength:WQ,toString:ZQ,write:$Q}});var _5=K0((Qz,m5)=>{var h5=function(J){return J.length*2},oK=function(J){const q=J.byteLength;let Q="";for(let G=0;G<q-1;G+=2)Q+=String.fromCharCode(J[G]+J[G+1]*256);return Q},nK=function(J,q,Q=0,G=h5(q)){const X=Math.min(G,J.byteLength-Q);let Y=X;for(let V=0;V<q.length;++V){if((Y-=2)<0)break;const K=q.charCodeAt(V),$=K>>8,W=K%256;J[Q+V*2]=W,J[Q+V*2+1]=$}return X};m5.exports={byteLength:h5,toString:oK,write:nK}});var UQ=K0((p5,f5)=>{var y1=function(J){switch(J){case"ascii":return rK;case"base64":return aK;case"hex":return sK;case"utf8":case"utf-8":case void 0:case null:return tK;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return eK;default:throw new Error(`Unknown encoding: ${J}`)}},b5=function(J){return J instanceof Uint8Array},JW=function(J){try{return y1(J),!0}catch{return!1}},QW=function(J,q,Q){const G=new Uint8Array(J);if(q!==void 0)p5.fill(G,q,0,G.byteLength,Q);return G},qW=function(J){return new Uint8Array(J)},GW=function(J){return new Uint8Array(J)},XW=function(J,q){return y1(q).byteLength(J)},YW=function(J,q){if(J===q)return 0;const Q=Math.min(J.byteLength,q.byteLength);J=new DataView(J.buffer,J.byteOffset,J.byteLength),q=new DataView(q.buffer,q.byteOffset,q.byteLength);let G=0;for(let X=Q-Q%4;G<X;G+=4){const Y=J.getUint32(G,mJ),V=q.getUint32(G,mJ);if(Y!==V)break}for(;G<Q;G++){const X=J.getUint8(G),Y=q.getUint8(G);if(X<Y)return-1;if(X>Y)return 1}return J.byteLength>q.byteLength?1:J.byteLength<q.byteLength?-1:0},VW=function(J,q){if(q===void 0)q=J.reduce((X,Y)=>X+Y.byteLength,0);const Q=new Uint8Array(q);let G=0;for(let X of J){if(G+X.byteLength>Q.byteLength){const Y=X.subarray(0,Q.byteLength-G);return Q.set(Y,G),Q}Q.set(X,G),G+=X.byteLength}return Q},KW=function(J,q,Q=0,G=0,X=J.byteLength){if(X>0&&X<G)return 0;if(X===G)return 0;if(J.byteLength===0||q.byteLength===0)return 0;if(Q<0)throw new RangeError("targetStart is out of range");if(G<0||G>=J.byteLength)throw new RangeError("sourceStart is out of range");if(X<0)throw new RangeError("sourceEnd is out of range");if(Q>=q.byteLength)Q=q.byteLength;if(X>J.byteLength)X=J.byteLength;if(q.byteLength-Q<X-G)X=q.length-Q+G;const Y=X-G;if(J===q)q.copyWithin(Q,G,X);else q.set(J.subarray(G,X),Q);return Y},WW=function(J,q){if(J===q)return!0;if(J.byteLength!==q.byteLength)return!1;const Q=J.byteLength;J=new DataView(J.buffer,J.byteOffset,J.byteLength),q=new DataView(q.buffer,q.byteOffset,q.byteLength);let G=0;for(let X=Q-Q%4;G<X;G+=4)if(J.getUint32(G,mJ)!==q.getUint32(G,mJ))return!1;for(;G<Q;G++)if(J.getUint8(G)!==q.getUint8(G))return!1;return!0},ZW=function(J,q,Q,G,X){if(typeof q==="string"){if(typeof Q==="string")X=Q,Q=0,G=J.byteLength;else if(typeof G==="string")X=G,G=J.byteLength}else if(typeof q==="number")q=q&255;else if(typeof q==="boolean")q=+q;if(Q<0||J.byteLength<Q||J.byteLength<G)throw new RangeError("Out of range index");if(Q===void 0)Q=0;if(G===void 0)G=J.byteLength;if(G<=Q)return J;if(!q)q=0;if(typeof q==="number")for(let Y=Q;Y<G;++Y)J[Y]=q;else{q=b5(q)?q:zQ(q,X);const Y=q.byteLength;for(let V=0;V<G-Q;++V)J[V+Q]=q[V%Y]}return J},zQ=function(J,q,Q){if(typeof J==="string")return $W(J,q);if(Array.isArray(J))return zW(J);if(ArrayBuffer.isView(J))return UW(J);return HW(J,q,Q)},$W=function(J,q){const Q=y1(q),G=new Uint8Array(Q.byteLength(J));return Q.write(G,J,0,G.byteLength),G},zW=function(J){const q=new Uint8Array(J.length);return q.set(J),q},UW=function(J){const q=new Uint8Array(J.byteLength);return q.set(J),q},HW=function(J,q,Q){return new Uint8Array(J,q,Q)},jW=function(J,q,Q,G){return c5(J,q,Q,G)!==-1},u5=function(J,q,Q,G,X){if(J.byteLength===0)return-1;if(typeof Q==="string")G=Q,Q=0;else if(Q===void 0)Q=X?0:J.length-1;else if(Q<0)Q+=J.byteLength;if(Q>=J.byteLength)if(X)return-1;else Q=J.byteLength-1;else if(Q<0)if(X)Q=0;else return-1;if(typeof q==="string")q=zQ(q,G);else if(typeof q==="number")if(q=q&255,X)return J.indexOf(q,Q);else return J.lastIndexOf(q,Q);if(q.byteLength===0)return-1;if(X){let Y=-1;for(let V=Q;V<J.byteLength;V++)if(J[V]===q[Y===-1?0:V-Y]){if(Y===-1)Y=V;if(V-Y+1===q.byteLength)return Y}else{if(Y!==-1)V-=V-Y;Y=-1}}else{if(Q+q.byteLength>J.byteLength)Q=J.byteLength-q.byteLength;for(let Y=Q;Y>=0;Y--){let V=!0;for(let K=0;K<q.byteLength;K++)if(J[Y+K]!==q[K]){V=!1;break}if(V)return Y}}return-1},c5=function(J,q,Q,G){return u5(J,q,Q,G,!0)},MW=function(J,q,Q,G){return u5(J,q,Q,G,!1)},S8=function(J,q,Q){const G=J[q];J[q]=J[Q],J[Q]=G},BW=function(J){const q=J.byteLength;if(q%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Q=0;Q<q;Q+=2)S8(J,Q,Q+1);return J},LW=function(J){const q=J.byteLength;if(q%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Q=0;Q<q;Q+=4)S8(J,Q,Q+3),S8(J,Q+1,Q+2);return J},PW=function(J){const q=J.byteLength;if(q%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Q=0;Q<q;Q+=8)S8(J,Q,Q+7),S8(J,Q+1,Q+6),S8(J,Q+2,Q+5),S8(J,Q+3,Q+4);return J},kW=function(J){return J},CW=function(J,q,Q=0,G=J.byteLength){const X=J.byteLength;if(Q>=X)return"";if(G<=Q)return"";if(Q<0)Q=0;if(G>X)G=X;if(Q!==0||G<X)J=J.subarray(Q,G);return y1(q).toString(J)},OW=function(J,q,Q,G,X){if(Q===void 0)X="utf8";else if(G===void 0&&typeof Q==="string")X=Q,Q=void 0;else if(X===void 0&&typeof G==="string")X=G,G=void 0;return y1(X).write(J,q,Q,G)},wW=function(J,q,Q){if(Q===void 0)Q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).setFloat64(Q,q,!0),Q+8},NW=function(J,q,Q){if(Q===void 0)Q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).setFloat32(Q,q,!0),Q+4},xW=function(J,q,Q){if(Q===void 0)Q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).setUint32(Q,q,!0),Q+4},FW=function(J,q,Q){if(Q===void 0)Q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).setInt32(Q,q,!0),Q+4},SW=function(J,q){if(q===void 0)q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).getFloat64(q,!0)},DW=function(J,q){if(q===void 0)q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).getFloat32(q,!0)},IW=function(J,q){if(q===void 0)q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).getUint32(q,!0)},AW=function(J,q){if(q===void 0)q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).getInt32(q,!0)},RW=function(J,q,Q){if(Q===void 0)Q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).setFloat64(Q,q,!1),Q+8},TW=function(J,q,Q){if(Q===void 0)Q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).setFloat32(Q,q,!1),Q+4},vW=function(J,q,Q){if(Q===void 0)Q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).setUint32(Q,q,!1),Q+4},gW=function(J,q,Q){if(Q===void 0)Q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).setInt32(Q,q,!1),Q+4},yW=function(J,q){if(q===void 0)q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).getFloat64(q,!1)},EW=function(J,q){if(q===void 0)q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).getFloat32(q,!1)},hW=function(J,q){if(q===void 0)q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).getUint32(q,!1)},mW=function(J,q){if(q===void 0)q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).getInt32(q,!1)},rK=S5(),aK=A5(),sK=g5(),tK=E5(),eK=_5(),mJ=new Uint8Array(Uint16Array.of(255).buffer)[0]===255;f5.exports=p5={isBuffer:b5,isEncoding:JW,alloc:QW,allocUnsafe:qW,allocUnsafeSlow:GW,byteLength:XW,compare:YW,concat:VW,copy:KW,equals:WW,fill:ZW,from:zQ,includes:jW,indexOf:c5,lastIndexOf:MW,swap16:BW,swap32:LW,swap64:PW,toBuffer:kW,toString:CW,write:OW,writeDoubleLE:wW,writeFloatLE:NW,writeUInt32LE:xW,writeInt32LE:FW,readDoubleLE:SW,readFloatLE:DW,readUInt32LE:IW,readInt32LE:AW,writeDoubleBE:RW,writeFloatBE:TW,writeUInt32BE:vW,writeInt32BE:gW,readDoubleBE:yW,readFloatBE:EW,readUInt32BE:hW,readInt32BE:mW}});var d5=K0((Gz,l5)=>{var _W=UQ();l5.exports=class J{constructor(q){this.encoding=q}decode(q){return _W.toString(q,this.encoding)}flush(){return""}}});var o5=K0((Xz,i5)=>{var bW=UQ();i5.exports=class J{constructor(){this.codePoint=0,this.bytesSeen=0,this.bytesNeeded=0,this.lowerBoundary=128,this.upperBoundary=191}decode(q){if(this.bytesNeeded===0){let G=!0;for(let X=Math.max(0,q.byteLength-4),Y=q.byteLength;X<Y&&G;X++)G=q[X]<=127;if(G)return bW.toString(q,"utf8")}let Q="";for(let G=0,X=q.byteLength;G<X;G++){const Y=q[G];if(this.bytesNeeded===0){if(Y<=127)Q+=String.fromCharCode(Y);else if(Y>=194&&Y<=223)this.bytesNeeded=1,this.codePoint=Y&31;else if(Y>=224&&Y<=239){if(Y===224)this.lowerBoundary=160;else if(Y===237)this.upperBoundary=159;this.bytesNeeded=2,this.codePoint=Y&15}else if(Y>=240&&Y<=244){if(Y===240)this.lowerBoundary=144;if(Y===244)this.upperBoundary=143;this.bytesNeeded=3,this.codePoint=Y&7}else Q+="\uFFFD";continue}if(Y<this.lowerBoundary||Y>this.upperBoundary){this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,Q+="\uFFFD";continue}if(this.lowerBoundary=128,this.upperBoundary=191,this.codePoint=this.codePoint<<6|Y&63,this.bytesSeen++,this.bytesSeen!==this.bytesNeeded)continue;Q+=String.fromCodePoint(this.codePoint),this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0}return Q}flush(){const q=this.bytesNeeded>0?"\uFFFD":"";return this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,q}}});var r5=K0((Yz,n5)=>{var pW=function(J){switch(J=J.toLowerCase(),J){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return J;default:throw new Error("Unknown encoding: "+J)}},uW=d5(),cW=o5();n5.exports=class J{constructor(q="utf8"){switch(this.encoding=pW(q),this.encoding){case"utf8":this.decoder=new cW;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new uW(this.encoding)}}push(q){if(typeof q==="string")return q;return this.decoder.decode(q)}write(q){return this.push(q)}end(q){let Q="";if(q)Q=this.push(q);return Q+=this.decoder.flush(),Q}}});var NG=K0((Vz,wG)=>{var S4=function(){this.stream._duplexState|=BQ,this.updateCallback()},D4=function(J){const q=this.stream;if(J)q.destroy(J);if((q._duplexState&g0)===0)q._duplexState|=Y8,q.emit("finish");if((q._duplexState&$G)===OQ)q._duplexState|=4;if(q._duplexState&=X4,(q._duplexState&J1)===0)this.update();else this.updateNextTick()},BG=function(J){const q=this.stream;if(!J&&this.error!==bJ)J=this.error;if(J)q.emit("error",J);q._duplexState|=8,q.emit("close");const{_readableState:Q,_writableState:G}=q;if(Q!==null&&Q.pipeline!==null)Q.pipeline.done(q,J);if(G!==null){while(G.drains!==null&&G.drains.length>0)G.drains.shift().resolve(!1);if(G.pipeline!==null)G.pipeline.done(q,J)}},I4=function(J){const q=this.stream;if(J)q.destroy(J);if(q._duplexState&=G4,this.drains!==null)v4(this.drains);if((q._duplexState&k4)===c1){if(q._duplexState&=Y4,(q._duplexState&MQ)===MQ)q.emit("drain")}this.updateCallback()},A4=function(J){if(J)this.stream.destroy(J);if(this.stream._duplexState&=rW,this.readAhead===!1&&(this.stream._duplexState&b1)===0)this.stream._duplexState&=YG;this.updateCallback()},R4=function(){if((this.stream._duplexState&t8)===0)this.stream._duplexState&=XG,this.update()},T4=function(){if((this.stream._duplexState&J1)===0)this.stream._duplexState&=KG,this.update()},v4=function(J){for(let q=0;q<J.length;q++)if(--J[q].writes===0)J.shift().resolve(!0),q--},LG=function(J){const q=this.stream;if(J)q.destroy(J);if((q._duplexState&4)===0){if((q._duplexState&$4)===0)q._duplexState|=Q1;if((q._duplexState&L4)===0)q._duplexState|=u1;q.emit("open")}if(q._duplexState&=ZG,q._writableState!==null)q._writableState.updateCallback();if(q._readableState!==null)q._readableState.updateCallback()},g4=function(J,q){if(q!==void 0&&q!==null)this.push(q);this._writableState.afterWrite(J)},y4=function(J){if(this._readableState!==null){if(J==="data")this._duplexState|=jQ|kQ,this._readableState.updateNextTick();if(J==="readable")this._duplexState|=LQ,this._readableState.updateNextTick()}if(this._writableState!==null){if(J==="drain")this._duplexState|=MQ,this._writableState.updateNextTick()}},E4=function(J,q){const Q=this._transformState.afterFinal;if(J)return Q(J);if(q!==null&&q!==void 0)this.push(q);this.push(null),Q(null)},h4=function(...J){return new Promise((q,Q)=>{return kG(...J,(G)=>{if(G)return Q(G);q()})})},kG=function(J,...q){const Q=Array.isArray(J)?[...J,...q]:[J,...q],G=Q.length&&typeof Q[Q.length-1]==="function"?Q.pop():null;if(Q.length<2)throw new Error("Pipeline requires at least 2 streams");let X=Q[0],Y=null,V=null;for(let W=1;W<Q.length;W++){if(Y=Q[W],m1(X))X.pipe(Y,$);else K(X,!0,W>1,$),X.pipe(Y);X=Y}if(G){let W=!1;const Z=m1(Y)||!!(Y._writableState&&Y._writableState.autoDestroy);if(Y.on("error",(B)=>{if(V===null)V=B}),Y.on("finish",()=>{if(W=!0,!Z)G(V)}),Z)Y.on("close",()=>G(V||(W?null:HQ)))}return Y;function K(W,Z,B,U){W.on("error",U),W.on("close",H);function H(){if(Z&&W._readableState&&!W._readableState.ended)return U(HQ);if(B&&W._writableState&&!W._writableState.ended)return U(HQ)}}function $(W){if(!W||V)return;V=W;for(let Z of Q)Z.destroy(W)}},m4=function(J){return J},CG=function(J){return!!J._readableState||!!J._writableState},m1=function(J){return typeof J._duplexState==="number"&&CG(J)},_4=function(J){return!!J._readableState&&J._readableState.ended},b4=function(J){return!!J._writableState&&J._writableState.ended},u4=function(J,q={}){const Q=J._readableState&&J._readableState.error||J._writableState&&J._writableState.error;return!q.all&&Q===bJ?null:Q},c4=function(J){return m1(J)&&J.readable},p4=function(J){return(J._duplexState&1)!==1||(J._duplexState&pJ)!==0},f4=function(J){return typeof J==="object"&&J!==null&&typeof J.byteLength==="number"},OG=function(J){return f4(J)?J.byteLength:1024},JG=function(){},l4=function(){this.destroy(new Error("Stream aborted."))},d4=function(J){return J._writev!==NQ.prototype._writev&&J._writev!==lJ.prototype._writev},{EventEmitter:fW}=(P5(),EQ(L5)),bJ=new Error("Stream was destroyed"),HQ=new Error("Premature close"),QG=N5(),lW=r5(),o=(1<<29)-1,qG=o^1,dW=o^2,_1=1<<4,t8=2<<4,Q1=4<<4,X8=8<<4,b1=16<<4,BQ=32<<4,D8=64<<4,jQ=128<<4,LQ=256<<4,PQ=512<<4,F0=1024<<4,G8=2048<<4,uJ=4096<<4,I8=8192<<4,GG=b1|BQ,iW=_1|uJ,oW=Q1|_1,nW=LQ|X8,kQ=b1|I8,rW=o^_1,aW=o^Q1,sW=o^(Q1|uJ),a5=o^uJ,tW=o^b1,eW=o^(X8|PQ),J4=o^D8,s5=o^GG,XG=o^G8,Q4=o^t8,YG=o^I8,q4=o^kQ,f0=1<<18,J1=2<<18,u1=4<<18,A8=8<<18,c1=16<<18,Y8=32<<18,MQ=64<<18,e8=128<<18,CQ=256<<18,R8=512<<18,cJ=1024<<18,G4=o^(f0|CQ),VG=o^u1,X4=o^(f0|R8),Y4=o^c1,V4=o^A8,KG=o^e8,K4=o^J1,WG=o^cJ,E1=_1|f0,ZG=o^E1,OQ=F0|Y8,g0=4|8|2,L0=g0|1,$G=g0|OQ,W4=VG&aW,pJ=e8|G8,Z4=pJ&ZG,zG=L0|Z4,$4=L0|D8|F0,t5=L0|F0|X8,z4=L0|D8|X8,U4=L0|LQ|X8|PQ,H4=L0|_1|D8|F0|uJ|I8,j4=g0|D8|F0,M4=t8|L0|G8|Q1,B4=G8|1,L4=L0|R8|Y8,P4=A8|c1,UG=A8|f0,k4=A8|c1|L0|f0,e5=L0|f0|A8|cJ,C4=u1|f0,O4=f0|CQ,w4=L0|R8|UG|Y8,N4=c1|g0|R8|Y8,x4=J1|L0|e8|u1,F4=R8|Y8|g0,_J=Symbol.asyncIterator||Symbol("asyncIterator");class wQ{constructor(J,{highWaterMark:q=16384,map:Q=null,mapWritable:G,byteLength:X,byteLengthWritable:Y}={}){this.stream=J,this.queue=new QG,this.highWaterMark=q,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=Y||X||OG,this.map=G||Q,this.afterWrite=I4.bind(this),this.afterUpdateNextTick=T4.bind(this)}get ended(){return(this.stream._duplexState&Y8)!==0}push(J){if((this.stream._duplexState&F4)!==0)return!1;if(this.map!==null)J=this.map(J);if(this.buffered+=this.byteLength(J),this.queue.push(J),this.buffered<this.highWaterMark)return this.stream._duplexState|=A8,!0;return this.stream._duplexState|=P4,!1}shift(){const J=this.queue.shift();if(this.buffered-=this.byteLength(J),this.buffered===0)this.stream._duplexState&=V4;return J}end(J){if(typeof J==="function")this.stream.once("finish",J);else if(J!==void 0&&J!==null)this.push(J);this.stream._duplexState=(this.stream._duplexState|R8)&VG}autoBatch(J,q){const Q=[],G=this.stream;Q.push(J);while((G._duplexState&e5)===UG)Q.push(G._writableState.shift());if((G._duplexState&L0)!==0)return q(null);G._writev(Q,q)}update(){const J=this.stream;J._duplexState|=J1;do{while((J._duplexState&e5)===A8){const q=this.shift();J._duplexState|=O4,J._write(q,this.afterWrite)}if((J._duplexState&C4)===0)this.updateNonPrimary()}while(this.continueUpdate()===!0);J._duplexState&=K4}updateNonPrimary(){const J=this.stream;if((J._duplexState&w4)===R8){J._duplexState=J._duplexState|f0,J._final(D4.bind(this));return}if((J._duplexState&g0)===4){if((J._duplexState&pJ)===0)J._duplexState|=E1,J._destroy(BG.bind(this));return}if((J._duplexState&zG)===1)J._duplexState=(J._duplexState|E1)&qG,J._open(LG.bind(this))}continueUpdate(){if((this.stream._duplexState&e8)===0)return!1;return this.stream._duplexState&=KG,!0}updateCallback(){if((this.stream._duplexState&x4)===u1)this.update();else this.updateNextTick()}updateNextTick(){if((this.stream._duplexState&e8)!==0)return;if(this.stream._duplexState|=e8,(this.stream._duplexState&J1)===0)queueMicrotask(this.afterUpdateNextTick)}}class HG{constructor(J,{highWaterMark:q=16384,map:Q=null,mapReadable:G,byteLength:X,byteLengthReadable:Y}={}){this.stream=J,this.queue=new QG,this.highWaterMark=q===0?1:q,this.buffered=0,this.readAhead=q>0,this.error=null,this.pipeline=null,this.byteLength=Y||X||OG,this.map=G||Q,this.pipeTo=null,this.afterRead=A4.bind(this),this.afterUpdateNextTick=R4.bind(this)}get ended(){return(this.stream._duplexState&F0)!==0}pipe(J,q){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof q!=="function")q=null;if(this.stream._duplexState|=BQ,this.pipeTo=J,this.pipeline=new MG(this.stream,J,q),q)this.stream.on("error",JG);if(m1(J)){if(J._writableState.pipeline=this.pipeline,q)J.on("error",JG);J.on("finish",this.pipeline.finished.bind(this.pipeline))}else{const Q=this.pipeline.done.bind(this.pipeline,J),G=this.pipeline.done.bind(this.pipeline,J,null);J.on("error",Q),J.on("close",G),J.on("finish",this.pipeline.finished.bind(this.pipeline))}J.on("drain",S4.bind(this)),this.stream.emit("piping",J),J.emit("pipe",this.stream)}push(J){const q=this.stream;if(J===null)return this.highWaterMark=0,q._duplexState=(q._duplexState|D8)&sW,!1;if(this.map!==null){if(J=this.map(J),J===null)return q._duplexState&=a5,this.buffered<this.highWaterMark}return this.buffered+=this.byteLength(J),this.queue.push(J),q._duplexState=(q._duplexState|X8)&a5,this.buffered<this.highWaterMark}shift(){const J=this.queue.shift();if(this.buffered-=this.byteLength(J),this.buffered===0)this.stream._duplexState&=eW;return J}unshift(J){const q=[this.map!==null?this.map(J):J];while(this.buffered>0)q.push(this.shift());for(let Q=0;Q<q.length-1;Q++){const G=q[Q];this.buffered+=this.byteLength(G),this.queue.push(G)}this.push(q[q.length-1])}read(){const J=this.stream;if((J._duplexState&t5)===X8){const q=this.shift();if(this.pipeTo!==null&&this.pipeTo.write(q)===!1)J._duplexState&=s5;if((J._duplexState&jQ)!==0)J.emit("data",q);return q}if(this.readAhead===!1)J._duplexState|=I8,this.updateNextTick();return null}drain(){const J=this.stream;while((J._duplexState&t5)===X8&&(J._duplexState&GG)!==0){const q=this.shift();if(this.pipeTo!==null&&this.pipeTo.write(q)===!1)J._duplexState&=s5;if((J._duplexState&jQ)!==0)J.emit("data",q)}}update(){const J=this.stream;J._duplexState|=t8;do{this.drain();while(this.buffered<this.highWaterMark&&(J._duplexState&H4)===I8)J._duplexState|=iW,J._read(this.afterRead),this.drain();if((J._duplexState&U4)===nW)J._duplexState|=PQ,J.emit("readable");if((J._duplexState&oW)===0)this.updateNonPrimary()}while(this.continueUpdate()===!0);J._duplexState&=Q4}updateNonPrimary(){const J=this.stream;if((J._duplexState&z4)===D8){if(J._duplexState=(J._duplexState|F0)&J4,J.emit("end"),(J._duplexState&$G)===OQ)J._duplexState|=4;if(this.pipeTo!==null)this.pipeTo.end()}if((J._duplexState&g0)===4){if((J._duplexState&pJ)===0)J._duplexState|=E1,J._destroy(BG.bind(this));return}if((J._duplexState&zG)===1)J._duplexState=(J._duplexState|E1)&qG,J._open(LG.bind(this))}continueUpdate(){if((this.stream._duplexState&G8)===0)return!1;return this.stream._duplexState&=XG,!0}updateCallback(){if((this.stream._duplexState&M4)===Q1)this.update();else this.updateNextTick()}updateNextTickIfOpen(){if((this.stream._duplexState&B4)!==0)return;if(this.stream._duplexState|=G8,(this.stream._duplexState&t8)===0)queueMicrotask(this.afterUpdateNextTick)}updateNextTick(){if((this.stream._duplexState&G8)!==0)return;if(this.stream._duplexState|=G8,(this.stream._duplexState&t8)===0)queueMicrotask(this.afterUpdateNextTick)}}class jG{constructor(J){this.data=null,this.afterTransform=g4.bind(J),this.afterFinal=null}}class MG{constructor(J,q,Q){this.from=J,this.to=q,this.afterPipe=Q,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(J,q){if(q)this.error=q;if(J===this.to){if(this.to=null,this.from!==null){if((this.from._duplexState&F0)===0||!this.pipeToFinished)this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}}if(J===this.from){if(this.from=null,this.to!==null){if((J._duplexState&F0)===0)this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}}if(this.afterPipe!==null)this.afterPipe(this.error);this.to=this.from=this.afterPipe=null}}class fJ extends fW{constructor(J){super();if(this._duplexState=0,this._readableState=null,this._writableState=null,J){if(J.open)this._open=J.open;if(J.destroy)this._destroy=J.destroy;if(J.predestroy)this._predestroy=J.predestroy;if(J.signal)J.signal.addEventListener("abort",l4.bind(this))}this.on("newListener",y4)}_open(J){J(null)}_destroy(J){J(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&8)!==0}get destroying(){return(this._duplexState&g0)!==0}destroy(J){if((this._duplexState&g0)===0){if(!J)J=bJ;if(this._duplexState=(this._duplexState|4)&W4,this._readableState!==null)this._readableState.highWaterMark=0,this._readableState.error=J;if(this._writableState!==null)this._writableState.highWaterMark=0,this._writableState.error=J;if(this._duplexState|=2,this._predestroy(),this._duplexState&=dW,this._readableState!==null)this._readableState.updateNextTick();if(this._writableState!==null)this._writableState.updateNextTick()}}}class h1 extends fJ{constructor(J){super(J);if(this._duplexState|=1|Y8|I8,this._readableState=new HG(this,J),J){if(this._readableState.readAhead===!1)this._duplexState&=YG;if(J.read)this._read=J.read;if(J.eagerOpen)this._readableState.updateNextTick();if(J.encoding)this.setEncoding(J.encoding)}}setEncoding(J){const q=new lW(J),Q=this._readableState.map||m4;return this._readableState.map=G,this;function G(X){const Y=q.push(X);return Y===""&&(X.byteLength!==0||q.remaining>0)?null:Q(Y)}}_read(J){J(null)}pipe(J,q){return this._readableState.updateNextTick(),this._readableState.pipe(J,q),J}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(J){return this._readableState.updateNextTickIfOpen(),this._readableState.push(J)}unshift(J){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(J)}resume(){return this._duplexState|=kQ,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?q4:tW,this}static _fromAsyncIterator(J,q){let Q;const G=new h1({...q,read(Y){J.next().then(X).then(Y.bind(null,null)).catch(Y)},predestroy(){Q=J.return()},destroy(Y){if(!Q)return Y(null);Q.then(Y.bind(null,null)).catch(Y)}});return G;function X(Y){if(Y.done)G.push(null);else G.push(Y.value)}}static from(J,q){if(c4(J))return J;if(J[_J])return this._fromAsyncIterator(J[_J](),q);if(!Array.isArray(J))J=J===void 0?[]:[J];let Q=0;return new h1({...q,read(G){this.push(Q===J.length?null:J[Q++]),G(null)}})}static isBackpressured(J){return(J._duplexState&j4)!==0||J._readableState.buffered>=J._readableState.highWaterMark}static isPaused(J){return(J._duplexState&b1)===0}[_J](){const J=this;let q=null,Q=null,G=null;return this.on("error",($)=>{q=$}),this.on("readable",X),this.on("close",Y),{[_J](){return this},next(){return new Promise(function($,W){Q=$,G=W;const Z=J.read();if(Z!==null)V(Z);else if((J._duplexState&8)!==0)V(null)})},return(){return K(null)},throw($){return K($)}};function X(){if(Q!==null)V(J.read())}function Y(){if(Q!==null)V(null)}function V($){if(G===null)return;if(q)G(q);else if($===null&&(J._duplexState&F0)===0)G(bJ);else Q({value:$,done:$===null});G=Q=null}function K($){return J.destroy($),new Promise((W,Z)=>{if(J._duplexState&8)return W({value:void 0,done:!0});J.once("close",function(){if($)Z($);else W({value:void 0,done:!0})})})}}}class NQ extends fJ{constructor(J){super(J);if(this._duplexState|=1|F0,this._writableState=new wQ(this,J),J){if(J.writev)this._writev=J.writev;if(J.write)this._write=J.write;if(J.final)this._final=J.final;if(J.eagerOpen)this._writableState.updateNextTick()}}cork(){this._duplexState|=cJ}uncork(){this._duplexState&=WG,this._writableState.updateNextTick()}_writev(J,q){q(null)}_write(J,q){this._writableState.autoBatch(J,q)}_final(J){J(null)}static isBackpressured(J){return(J._duplexState&N4)!==0}static drained(J){if(J.destroyed)return Promise.resolve(!1);const q=J._writableState,G=(d4(J)?Math.min(1,q.queue.length):q.queue.length)+(J._duplexState&CQ?1:0);if(G===0)return Promise.resolve(!0);if(q.drains===null)q.drains=[];return new Promise((X)=>{q.drains.push({writes:G,resolve:X})})}write(J){return this._writableState.updateNextTick(),this._writableState.push(J)}end(J){return this._writableState.updateNextTick(),this._writableState.end(J),this}}class lJ extends h1{constructor(J){super(J);if(this._duplexState=1|this._duplexState&I8,this._writableState=new wQ(this,J),J){if(J.writev)this._writev=J.writev;if(J.write)this._write=J.write;if(J.final)this._final=J.final}}cork(){this._duplexState|=cJ}uncork(){this._duplexState&=WG,this._writableState.updateNextTick()}_writev(J,q){q(null)}_write(J,q){this._writableState.autoBatch(J,q)}_final(J){J(null)}write(J){return this._writableState.updateNextTick(),this._writableState.push(J)}end(J){return this._writableState.updateNextTick(),this._writableState.end(J),this}}class xQ extends lJ{constructor(J){super(J);if(this._transformState=new jG(this),J){if(J.transform)this._transform=J.transform;if(J.flush)this._flush=J.flush}}_write(J,q){if(this._readableState.buffered>=this._readableState.highWaterMark)this._transformState.data=J;else this._transform(J,this._transformState.afterTransform)}_read(J){if(this._transformState.data!==null){const q=this._transformState.data;this._transformState.data=null,J(null),this._transform(q,this._transformState.afterTransform)}else J(null)}destroy(J){if(super.destroy(J),this._transformState.data!==null)this._transformState.data=null,this._transformState.afterTransform()}_transform(J,q){q(null,J)}_flush(J){J(null)}_final(J){this._transformState.afterFinal=J,this._flush(E4.bind(this))}}class PG extends xQ{}wG.exports={pipeline:kG,pipelinePromise:h4,isStream:CG,isStreamx:m1,isEnded:_4,isFinished:b4,isDisturbed:p4,getStreamError:u4,Stream:fJ,Writable:NQ,Readable:h1,Duplex:lJ,Transform:xQ,PassThrough:PG}});var FQ=K0((Kz,FG)=>{var xG=function(J,q){for(let Q in q)Object.defineProperty(J,Q,{value:q[Q],enumerable:!0,configurable:!0});return J},i4=function(J,q,Q){if(!J||typeof J==="string")throw new TypeError("Please pass an Error to err-code");if(!Q)Q={};if(typeof q==="object")Q=q,q="";if(q)Q.code=q;try{return xG(J,Q)}catch(G){Q.message=J.message,Q.stack=J.stack;const X=function(){};return X.prototype=Object.create(Object.getPrototypeOf(J)),xG(new X,Q)}};FG.exports=i4});function mQ(J){const q=J.length;let Q=0,G=0;while(G<q){let X=J.charCodeAt(G++);if((X&4294967168)===0){Q++;continue}else if((X&4294965248)===0)Q+=2;else{if(X>=55296&&X<=56319){if(G<q){const Y=J.charCodeAt(G);if((Y&64512)===56320)++G,X=((X&1023)<<10)+(Y&1023)+65536}}if((X&4294901760)===0)Q+=3;else Q+=4}}return Q}function W7(J,q,Q){const G=J.length;let X=Q,Y=0;while(Y<G){let V=J.charCodeAt(Y++);if((V&4294967168)===0){q[X++]=V;continue}else if((V&4294965248)===0)q[X++]=V>>6&31|192;else{if(V>=55296&&V<=56319){if(Y<G){const K=J.charCodeAt(Y);if((K&64512)===56320)++Y,V=((V&1023)<<10)+(K&1023)+65536}}if((V&4294901760)===0)q[X++]=V>>12&15|224,q[X++]=V>>6&63|128;else q[X++]=V>>18&7|240,q[X++]=V>>12&63|128,q[X++]=V>>6&63|128}q[X++]=V&63|128}}function z7(J,q,Q){Z7.encodeInto(J,q.subarray(Q))}function _Q(J,q,Q){if(J.length>$7)z7(J,q,Q);else W7(J,q,Q)}function aJ(J,q,Q){let G=q;const X=G+Q,Y=[];let V="";while(G<X){const K=J[G++];if((K&128)===0)Y.push(K);else if((K&224)===192){const $=J[G++]&63;Y.push((K&31)<<6|$)}else if((K&240)===224){const $=J[G++]&63,W=J[G++]&63;Y.push((K&31)<<12|$<<6|W)}else if((K&248)===240){const $=J[G++]&63,W=J[G++]&63,Z=J[G++]&63;let B=(K&7)<<18|$<<12|W<<6|Z;if(B>65535)B-=65536,Y.push(B>>>10&1023|55296),B=56320|B&1023;Y.push(B)}else Y.push(K);if(Y.length>=U7)V+=String.fromCharCode(...Y),Y.length=0}if(Y.length>0)V+=String.fromCharCode(...Y);return V}function M7(J,q,Q){const G=J.subarray(q,q+Q);return H7.decode(G)}function bQ(J,q,Q){if(Q>j7)return M7(J,q,Q);else return aJ(J,q,Q)}var Z7=new TextEncoder,$7=50,U7=4096,H7=new TextDecoder,j7=200;class g8{constructor(J,q){this.type=J,this.data=q}}class W0 extends Error{constructor(J){super(J);const q=Object.create(W0.prototype);Object.setPrototypeOf(this,q),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:W0.name})}}function uQ(J,q,Q){const G=Q/4294967296,X=Q;J.setUint32(q,G),J.setUint32(q+4,X)}function o1(J,q,Q){const G=Math.floor(Q/4294967296),X=Q;J.setUint32(q,G),J.setUint32(q+4,X)}function n1(J,q){const Q=J.getInt32(q),G=J.getUint32(q+4);return Q*4294967296+G}function cQ(J,q){const Q=J.getUint32(q),G=J.getUint32(q+4);return Q*4294967296+G}var y8=4294967295;function k7({sec:J,nsec:q}){if(J>=0&&q>=0&&J<=P7)if(q===0&&J<=L7){const Q=new Uint8Array(4);return new DataView(Q.buffer).setUint32(0,J),Q}else{const Q=J/4294967296,G=J&4294967295,X=new Uint8Array(8),Y=new DataView(X.buffer);return Y.setUint32(0,q<<2|Q&3),Y.setUint32(4,G),X}else{const Q=new Uint8Array(12),G=new DataView(Q.buffer);return G.setUint32(0,q),o1(G,4,J),Q}}function C7(J){const q=J.getTime(),Q=Math.floor(q/1000),G=(q-Q*1000)*1e6,X=Math.floor(G/1e9);return{sec:Q+X,nsec:G-X*1e9}}function O7(J){if(J instanceof Date){const q=C7(J);return k7(q)}else return null}function w7(J){const q=new DataView(J.buffer,J.byteOffset,J.byteLength);switch(J.byteLength){case 4:return{sec:q.getUint32(0),nsec:0};case 8:{const Q=q.getUint32(0),G=q.getUint32(4),X=(Q&3)*4294967296+G,Y=Q>>>2;return{sec:X,nsec:Y}}case 12:{const Q=n1(q,4),G=q.getUint32(0);return{sec:Q,nsec:G}}default:throw new W0(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${J.length}`)}}function N7(J){const q=w7(J);return new Date(q.sec*1000+q.nsec/1e6)}var B7=-1,L7=4294967295,P7=17179869183,pQ={type:B7,encode:O7,decode:N7};class K8{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(pQ)}register({type:J,encode:q,decode:Q}){if(J>=0)this.encoders[J]=q,this.decoders[J]=Q;else{const G=-1-J;this.builtInEncoders[G]=q,this.builtInDecoders[G]=Q}}tryToEncode(J,q){for(let Q=0;Q<this.builtInEncoders.length;Q++){const G=this.builtInEncoders[Q];if(G!=null){const X=G(J,q);if(X!=null){const Y=-1-Q;return new g8(Y,X)}}}for(let Q=0;Q<this.encoders.length;Q++){const G=this.encoders[Q];if(G!=null){const X=G(J,q);if(X!=null)return new g8(Q,X)}}if(J instanceof g8)return J;return null}decode(J,q,Q){const G=q<0?this.builtInDecoders[-1-q]:this.decoders[q];if(G)return G(J,q,Q);else return new g8(q,J)}}K8.defaultCodec=new K8;var x7=function(J){return J instanceof ArrayBuffer||typeof SharedArrayBuffer!=="undefined"&&J instanceof SharedArrayBuffer};function X1(J){if(J instanceof Uint8Array)return J;else if(ArrayBuffer.isView(J))return new Uint8Array(J.buffer,J.byteOffset,J.byteLength);else if(x7(J))return new Uint8Array(J);else return Uint8Array.from(J)}var fQ=function(J,q,Q){if(q!==null&&q!==void 0){if(typeof q!=="object"&&typeof q!=="function")throw new TypeError("Object expected.");var G,X;if(Q){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");G=q[Symbol.asyncDispose]}if(G===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");if(G=q[Symbol.dispose],Q)X=G}if(typeof G!=="function")throw new TypeError("Object not disposable.");if(X)G=function(){try{X.call(this)}catch(Y){return Promise.reject(Y)}};J.stack.push({value:q,dispose:G,async:Q})}else if(Q)J.stack.push({async:!0});return q},lQ=function(J){return function(q){function Q(V){q.error=q.hasError?new J(V,q.error,"An error was suppressed during disposal."):V,q.hasError=!0}var G,X=0;function Y(){while(G=q.stack.pop())try{if(!G.async&&X===1)return X=0,q.stack.push(G),Promise.resolve().then(Y);if(G.dispose){var V=G.dispose.call(G.value);if(G.async)return X|=2,Promise.resolve(V).then(Y,function(K){return Q(K),Y()})}else X|=1}catch(K){Q(K)}if(X===1)return q.hasError?Promise.reject(q.error):Promise.resolve();if(q.hasError)throw q.error}return Y()}}(typeof SuppressedError==="function"?SuppressedError:function(J,q,Q){var G=new Error(Q);return G.name="SuppressedError",G.error=J,G.suppressed=q,G}),F7=100,S7=2048;class r1{constructor(J){this.entered=!1,this.extensionCodec=J?.extensionCodec??K8.defaultCodec,this.context=J?.context,this.useBigInt64=J?.useBigInt64??!1,this.maxDepth=J?.maxDepth??F7,this.initialBufferSize=J?.initialBufferSize??S7,this.sortKeys=J?.sortKeys??!1,this.forceFloat32=J?.forceFloat32??!1,this.ignoreUndefined=J?.ignoreUndefined??!1,this.forceIntegerToFloat=J?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new r1({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}enteringGuard(){return this.entered=!0,{[Symbol.dispose]:()=>{this.entered=!1}}}encodeSharedRef(J){const q={stack:[],error:void 0,hasError:!1};try{if(this.entered)return this.clone().encodeSharedRef(J);const Q=fQ(q,this.enteringGuard(),!1);return this.reinitializeState(),this.doEncode(J,1),this.bytes.subarray(0,this.pos)}catch(Q){q.error=Q,q.hasError=!0}finally{lQ(q)}}encode(J){const q={stack:[],error:void 0,hasError:!1};try{if(this.entered)return this.clone().encode(J);const Q=fQ(q,this.enteringGuard(),!1);return this.reinitializeState(),this.doEncode(J,1),this.bytes.slice(0,this.pos)}catch(Q){q.error=Q,q.hasError=!0}finally{lQ(q)}}doEncode(J,q){if(q>this.maxDepth)throw new Error(`Too deep objects in depth ${q}`);if(J==null)this.encodeNil();else if(typeof J==="boolean")this.encodeBoolean(J);else if(typeof J==="number")if(!this.forceIntegerToFloat)this.encodeNumber(J);else this.encodeNumberAsFloat(J);else if(typeof J==="string")this.encodeString(J);else if(this.useBigInt64&&typeof J==="bigint")this.encodeBigInt64(J);else this.encodeObject(J,q)}ensureBufferSizeToWrite(J){const q=this.pos+J;if(this.view.byteLength<q)this.resizeBuffer(q*2)}resizeBuffer(J){const q=new ArrayBuffer(J),Q=new Uint8Array(q),G=new DataView(q);Q.set(this.bytes),this.view=G,this.bytes=Q}encodeNil(){this.writeU8(192)}encodeBoolean(J){if(J===!1)this.writeU8(194);else this.writeU8(195)}encodeNumber(J){if(!this.forceIntegerToFloat&&Number.isSafeInteger(J))if(J>=0)if(J<128)this.writeU8(J);else if(J<256)this.writeU8(204),this.writeU8(J);else if(J<65536)this.writeU8(205),this.writeU16(J);else if(J<4294967296)this.writeU8(206),this.writeU32(J);else if(!this.useBigInt64)this.writeU8(207),this.writeU64(J);else this.encodeNumberAsFloat(J);else if(J>=-32)this.writeU8(224|J+32);else if(J>=-128)this.writeU8(208),this.writeI8(J);else if(J>=-32768)this.writeU8(209),this.writeI16(J);else if(J>=-2147483648)this.writeU8(210),this.writeI32(J);else if(!this.useBigInt64)this.writeU8(211),this.writeI64(J);else this.encodeNumberAsFloat(J);else this.encodeNumberAsFloat(J)}encodeNumberAsFloat(J){if(this.forceFloat32)this.writeU8(202),this.writeF32(J);else this.writeU8(203),this.writeF64(J)}encodeBigInt64(J){if(J>=BigInt(0))this.writeU8(207),this.writeBigUint64(J);else this.writeU8(211),this.writeBigInt64(J)}writeStringHeader(J){if(J<32)this.writeU8(160+J);else if(J<256)this.writeU8(217),this.writeU8(J);else if(J<65536)this.writeU8(218),this.writeU16(J);else if(J<4294967296)this.writeU8(219),this.writeU32(J);else throw new Error(`Too long string: ${J} bytes in UTF-8`)}encodeString(J){const Q=mQ(J);this.ensureBufferSizeToWrite(5+Q),this.writeStringHeader(Q),_Q(J,this.bytes,this.pos),this.pos+=Q}encodeObject(J,q){const Q=this.extensionCodec.tryToEncode(J,this.context);if(Q!=null)this.encodeExtension(Q);else if(Array.isArray(J))this.encodeArray(J,q);else if(ArrayBuffer.isView(J))this.encodeBinary(J);else if(typeof J==="object")this.encodeMap(J,q);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(J)}`)}encodeBinary(J){const q=J.byteLength;if(q<256)this.writeU8(196),this.writeU8(q);else if(q<65536)this.writeU8(197),this.writeU16(q);else if(q<4294967296)this.writeU8(198),this.writeU32(q);else throw new Error(`Too large binary: ${q}`);const Q=X1(J);this.writeU8a(Q)}encodeArray(J,q){const Q=J.length;if(Q<16)this.writeU8(144+Q);else if(Q<65536)this.writeU8(220),this.writeU16(Q);else if(Q<4294967296)this.writeU8(221),this.writeU32(Q);else throw new Error(`Too large array: ${Q}`);for(let G of J)this.doEncode(G,q+1)}countWithoutUndefined(J,q){let Q=0;for(let G of q)if(J[G]!==void 0)Q++;return Q}encodeMap(J,q){const Q=Object.keys(J);if(this.sortKeys)Q.sort();const G=this.ignoreUndefined?this.countWithoutUndefined(J,Q):Q.length;if(G<16)this.writeU8(128+G);else if(G<65536)this.writeU8(222),this.writeU16(G);else if(G<4294967296)this.writeU8(223),this.writeU32(G);else throw new Error(`Too large map object: ${G}`);for(let X of Q){const Y=J[X];if(!(this.ignoreUndefined&&Y===void 0))this.encodeString(X),this.doEncode(Y,q+1)}}encodeExtension(J){if(typeof J.data==="function"){const Q=J.data(this.pos+6),G=Q.length;if(G>=4294967296)throw new Error(`Too large extension object: ${G}`);this.writeU8(201),this.writeU32(G),this.writeI8(J.type),this.writeU8a(Q);return}const q=J.data.length;if(q===1)this.writeU8(212);else if(q===2)this.writeU8(213);else if(q===4)this.writeU8(214);else if(q===8)this.writeU8(215);else if(q===16)this.writeU8(216);else if(q<256)this.writeU8(199),this.writeU8(q);else if(q<65536)this.writeU8(200),this.writeU16(q);else if(q<4294967296)this.writeU8(201),this.writeU32(q);else throw new Error(`Too large extension object: ${q}`);this.writeI8(J.type),this.writeU8a(J.data)}writeU8(J){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,J),this.pos++}writeU8a(J){const q=J.length;this.ensureBufferSizeToWrite(q),this.bytes.set(J,this.pos),this.pos+=q}writeI8(J){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,J),this.pos++}writeU16(J){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,J),this.pos+=2}writeI16(J){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,J),this.pos+=2}writeU32(J){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,J),this.pos+=4}writeI32(J){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,J),this.pos+=4}writeF32(J){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,J),this.pos+=4}writeF64(J){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,J),this.pos+=8}writeU64(J){this.ensureBufferSizeToWrite(8),uQ(this.view,this.pos,J),this.pos+=8}writeI64(J){this.ensureBufferSizeToWrite(8),o1(this.view,this.pos,J),this.pos+=8}writeBigUint64(J){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,J),this.pos+=8}writeBigInt64(J){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,J),this.pos+=8}}function l0(J,q){return new r1(q).encodeSharedRef(J)}function a1(J){return`${J<0?"-":""}0x${Math.abs(J).toString(16).padStart(2,"0")}`}var D7=16,I7=16;class sJ{constructor(J=D7,q=I7){this.hit=0,this.miss=0,this.maxKeyLength=J,this.maxLengthPerKey=q,this.caches=[];for(let Q=0;Q<this.maxKeyLength;Q++)this.caches.push([])}canBeCached(J){return J>0&&J<=this.maxKeyLength}find(J,q,Q){const G=this.caches[Q-1];J:for(let X of G){const Y=X.bytes;for(let V=0;V<Q;V++)if(Y[V]!==J[q+V])continue J;return X.str}return null}store(J,q){const Q=this.caches[J.length-1],G={bytes:J,str:q};if(Q.length>=this.maxLengthPerKey)Q[Math.random()*Q.length|0]=G;else Q.push(G)}decode(J,q,Q){const G=this.find(J,q,Q);if(G!=null)return this.hit++,G;this.miss++;const X=aJ(J,q,Q),Y=Uint8Array.prototype.slice.call(J,q,q+Q);return this.store(Y,X),X}}var s1=function(J,q,Q){if(q!==null&&q!==void 0){if(typeof q!=="object"&&typeof q!=="function")throw new TypeError("Object expected.");var G,X;if(Q){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");G=q[Symbol.asyncDispose]}if(G===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");if(G=q[Symbol.dispose],Q)X=G}if(typeof G!=="function")throw new TypeError("Object not disposable.");if(X)G=function(){try{X.call(this)}catch(Y){return Promise.reject(Y)}};J.stack.push({value:q,dispose:G,async:Q})}else if(Q)J.stack.push({async:!0});return q},t1=function(J){return function(q){function Q(V){q.error=q.hasError?new J(V,q.error,"An error was suppressed during disposal."):V,q.hasError=!0}var G,X=0;function Y(){while(G=q.stack.pop())try{if(!G.async&&X===1)return X=0,q.stack.push(G),Promise.resolve().then(Y);if(G.dispose){var V=G.dispose.call(G.value);if(G.async)return X|=2,Promise.resolve(V).then(Y,function(K){return Q(K),Y()})}else X|=1}catch(K){Q(K)}if(X===1)return q.hasError?Promise.reject(q.error):Promise.resolve();if(q.hasError)throw q.error}return Y()}}(typeof SuppressedError==="function"?SuppressedError:function(J,q,Q){var G=new Error(Q);return G.name="SuppressedError",G.error=J,G.suppressed=q,G}),tJ="array",V1="map_key",iQ="map_value",A7=(J)=>{if(typeof J==="string"||typeof J==="number")return J;throw new W0("The type of key must be string or number but "+typeof J)};class oQ{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(J){const q=this.getUninitializedStateFromPool();q.type=tJ,q.position=0,q.size=J,q.array=new Array(J)}pushMapState(J){const q=this.getUninitializedStateFromPool();q.type=V1,q.readCount=0,q.size=J,q.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const J={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(J)}return this.stack[this.stackHeadPosition]}release(J){if(this.stack[this.stackHeadPosition]!==J)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(J.type===tJ){const Q=J;Q.size=0,Q.array=void 0,Q.position=0,Q.type=void 0}if(J.type===V1||J.type===iQ){const Q=J;Q.size=0,Q.map=void 0,Q.readCount=0,Q.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}var Y1=-1,eJ=new DataView(new ArrayBuffer(0)),R7=new Uint8Array(eJ.buffer);try{eJ.getInt8(0)}catch(J){if(!(J instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}var dQ=new RangeError("Insufficient data"),T7=new sJ;class e1{constructor(J){this.totalPos=0,this.pos=0,this.view=eJ,this.bytes=R7,this.headByte=Y1,this.stack=new oQ,this.entered=!1,this.extensionCodec=J?.extensionCodec??K8.defaultCodec,this.context=J?.context,this.useBigInt64=J?.useBigInt64??!1,this.rawStrings=J?.rawStrings??!1,this.maxStrLength=J?.maxStrLength??y8,this.maxBinLength=J?.maxBinLength??y8,this.maxArrayLength=J?.maxArrayLength??y8,this.maxMapLength=J?.maxMapLength??y8,this.maxExtLength=J?.maxExtLength??y8,this.keyDecoder=J?.keyDecoder!==void 0?J.keyDecoder:T7,this.mapKeyConverter=J?.mapKeyConverter??A7}clone(){return new e1({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Y1,this.stack.reset()}setBuffer(J){const q=X1(J);this.bytes=q,this.view=new DataView(q.buffer,q.byteOffset,q.byteLength),this.pos=0}appendBuffer(J){if(this.headByte===Y1&&!this.hasRemaining(1))this.setBuffer(J);else{const q=this.bytes.subarray(this.pos),Q=X1(J),G=new Uint8Array(q.length+Q.length);G.set(q),G.set(Q,q.length),this.setBuffer(G)}}hasRemaining(J){return this.view.byteLength-this.pos>=J}createExtraByteError(J){const{view:q,pos:Q}=this;return new RangeError(`Extra ${q.byteLength-Q} of ${q.byteLength} byte(s) found at buffer[${J}]`)}enteringGuard(){return this.entered=!0,{[Symbol.dispose]:()=>{this.entered=!1}}}decode(J){const q={stack:[],error:void 0,hasError:!1};try{if(this.entered)return this.clone().decode(J);const Q=s1(q,this.enteringGuard(),!1);this.reinitializeState(),this.setBuffer(J);const G=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return G}catch(Q){q.error=Q,q.hasError=!0}finally{t1(q)}}*decodeMulti(J){const q={stack:[],error:void 0,hasError:!1};try{if(this.entered){yield*this.clone().decodeMulti(J);return}const Q=s1(q,this.enteringGuard(),!1);this.reinitializeState(),this.setBuffer(J);while(this.hasRemaining(1))yield this.doDecodeSync()}catch(Q){q.error=Q,q.hasError=!0}finally{t1(q)}}async decodeAsync(J){const q={stack:[],error:void 0,hasError:!1};try{if(this.entered)return this.clone().decodeAsync(J);const Q=s1(q,this.enteringGuard(),!1);let G=!1,X;for await(let $ of J){if(G)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer($);try{X=this.doDecodeSync(),G=!0}catch(W){if(!(W instanceof RangeError))throw W}this.totalPos+=this.pos}if(G){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return X}const{headByte:Y,pos:V,totalPos:K}=this;throw new RangeError(`Insufficient data in parsing ${a1(Y)} at ${K} (${V} in the current buffer)`)}catch(Q){q.error=Q,q.hasError=!0}finally{t1(q)}}decodeArrayStream(J){return this.decodeMultiAsync(J,!0)}decodeStream(J){return this.decodeMultiAsync(J,!1)}async*decodeMultiAsync(J,q){const Q={stack:[],error:void 0,hasError:!1};try{if(this.entered){yield*this.clone().decodeMultiAsync(J,q);return}const G=s1(Q,this.enteringGuard(),!1);let X=q,Y=-1;for await(let V of J){if(q&&Y===0)throw this.createExtraByteError(this.totalPos);if(this.appendBuffer(V),X)Y=this.readArraySize(),X=!1,this.complete();try{while(!0)if(yield this.doDecodeSync(),--Y===0)break}catch(K){if(!(K instanceof RangeError))throw K}this.totalPos+=this.pos}}catch(G){Q.error=G,Q.hasError=!0}finally{t1(Q)}}doDecodeSync(){J:while(!0){const J=this.readHeadByte();let q;if(J>=224)q=J-256;else if(J<192)if(J<128)q=J;else if(J<144){const G=J-128;if(G!==0){this.pushMapState(G),this.complete();continue J}else q={}}else if(J<160){const G=J-144;if(G!==0){this.pushArrayState(G),this.complete();continue J}else q=[]}else{const G=J-160;q=this.decodeString(G,0)}else if(J===192)q=null;else if(J===194)q=!1;else if(J===195)q=!0;else if(J===202)q=this.readF32();else if(J===203)q=this.readF64();else if(J===204)q=this.readU8();else if(J===205)q=this.readU16();else if(J===206)q=this.readU32();else if(J===207)if(this.useBigInt64)q=this.readU64AsBigInt();else q=this.readU64();else if(J===208)q=this.readI8();else if(J===209)q=this.readI16();else if(J===210)q=this.readI32();else if(J===211)if(this.useBigInt64)q=this.readI64AsBigInt();else q=this.readI64();else if(J===217){const G=this.lookU8();q=this.decodeString(G,1)}else if(J===218){const G=this.lookU16();q=this.decodeString(G,2)}else if(J===219){const G=this.lookU32();q=this.decodeString(G,4)}else if(J===220){const G=this.readU16();if(G!==0){this.pushArrayState(G),this.complete();continue J}else q=[]}else if(J===221){const G=this.readU32();if(G!==0){this.pushArrayState(G),this.complete();continue J}else q=[]}else if(J===222){const G=this.readU16();if(G!==0){this.pushMapState(G),this.complete();continue J}else q={}}else if(J===223){const G=this.readU32();if(G!==0){this.pushMapState(G),this.complete();continue J}else q={}}else if(J===196){const G=this.lookU8();q=this.decodeBinary(G,1)}else if(J===197){const G=this.lookU16();q=this.decodeBinary(G,2)}else if(J===198){const G=this.lookU32();q=this.decodeBinary(G,4)}else if(J===212)q=this.decodeExtension(1,0);else if(J===213)q=this.decodeExtension(2,0);else if(J===214)q=this.decodeExtension(4,0);else if(J===215)q=this.decodeExtension(8,0);else if(J===216)q=this.decodeExtension(16,0);else if(J===199){const G=this.lookU8();q=this.decodeExtension(G,1)}else if(J===200){const G=this.lookU16();q=this.decodeExtension(G,2)}else if(J===201){const G=this.lookU32();q=this.decodeExtension(G,4)}else throw new W0(`Unrecognized type byte: ${a1(J)}`);this.complete();const Q=this.stack;while(Q.length>0){const G=Q.top();if(G.type===tJ)if(G.array[G.position]=q,G.position++,G.position===G.size)q=G.array,Q.release(G);else continue J;else if(G.type===V1){if(q==="__proto__")throw new W0("The key __proto__ is not allowed");G.key=this.mapKeyConverter(q),G.type=iQ;continue J}else if(G.map[G.key]=q,G.readCount++,G.readCount===G.size)q=G.map,Q.release(G);else{G.key=null,G.type=V1;continue J}}return q}}readHeadByte(){if(this.headByte===Y1)this.headByte=this.readU8();return this.headByte}complete(){this.headByte=Y1}readArraySize(){const J=this.readHeadByte();switch(J){case 220:return this.readU16();case 221:return this.readU32();default:if(J<160)return J-144;else throw new W0(`Unrecognized array type byte: ${a1(J)}`)}}pushMapState(J){if(J>this.maxMapLength)throw new W0(`Max length exceeded: map length (${J}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(J)}pushArrayState(J){if(J>this.maxArrayLength)throw new W0(`Max length exceeded: array length (${J}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(J)}decodeString(J,q){if(!this.rawStrings||this.stateIsMapKey())return this.decodeUtf8String(J,q);return this.decodeBinary(J,q)}decodeUtf8String(J,q){if(J>this.maxStrLength)throw new W0(`Max length exceeded: UTF-8 byte length (${J}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+q+J)throw dQ;const Q=this.pos+q;let G;if(this.stateIsMapKey()&&this.keyDecoder?.canBeCached(J))G=this.keyDecoder.decode(this.bytes,Q,J);else G=bQ(this.bytes,Q,J);return this.pos+=q+J,G}stateIsMapKey(){if(this.stack.length>0)return this.stack.top().type===V1;return!1}decodeBinary(J,q){if(J>this.maxBinLength)throw new W0(`Max length exceeded: bin length (${J}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(J+q))throw dQ;const Q=this.pos+q,G=this.bytes.subarray(Q,Q+J);return this.pos+=q+J,G}decodeExtension(J,q){if(J>this.maxExtLength)throw new W0(`Max length exceeded: ext length (${J}) > maxExtLength (${this.maxExtLength})`);const Q=this.view.getInt8(this.pos+q),G=this.decodeBinary(J,q+1);return this.extensionCodec.decode(G,Q,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const J=this.view.getUint8(this.pos);return this.pos++,J}readI8(){const J=this.view.getInt8(this.pos);return this.pos++,J}readU16(){const J=this.view.getUint16(this.pos);return this.pos+=2,J}readI16(){const J=this.view.getInt16(this.pos);return this.pos+=2,J}readU32(){const J=this.view.getUint32(this.pos);return this.pos+=4,J}readI32(){const J=this.view.getInt32(this.pos);return this.pos+=4,J}readU64(){const J=cQ(this.view,this.pos);return this.pos+=8,J}readI64(){const J=n1(this.view,this.pos);return this.pos+=8,J}readU64AsBigInt(){const J=this.view.getBigUint64(this.pos);return this.pos+=8,J}readI64AsBigInt(){const J=this.view.getBigInt64(this.pos);return this.pos+=8,J}readF32(){const J=this.view.getFloat32(this.pos);return this.pos+=4,J}readF64(){const J=this.view.getFloat64(this.pos);return this.pos+=8,J}}function J9(J,q){return new e1(q).decode(J)}var u8=function(J){let q=J.length;while(--q>=0)J[q]=0},q9=function(J,q,Q,G,X){this.static_tree=J,this.extra_bits=q,this.extra_base=Q,this.elems=G,this.max_length=X,this.has_stree=J&&J.length},G9=function(J,q){this.dyn_tree=J,this.max_code=0,this.stat_desc=q},S0=function(J,q,Q,G,X){this.good_length=J,this.max_lazy=q,this.nice_length=Q,this.max_chain=G,this.func=X},gX=function(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ZJ,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(xX*2),this.dyn_dtree=new Uint16Array((2*wX+1)*2),this.bl_tree=new Uint16Array((2*NX+1)*2),d0(this.dyn_ltree),d0(this.dyn_dtree),d0(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(FX+1),this.heap=new Uint16Array(2*P9+1),d0(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*P9+1),d0(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0},QY=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},N1=function(J){this.options=$J.assign({level:KY,method:ZY,chunkSize:16384,windowBits:15,memLevel:8,strategy:WY},J||{});let q=this.options;if(q.raw&&q.windowBits>0)q.windowBits=-q.windowBits;else if(q.gzip&&q.windowBits>0&&q.windowBits<16)q.windowBits+=16;this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new eq,this.strm.avail_out=0;let Q=z1.deflateInit2(this.strm,q.level,q.method,q.windowBits,q.memLevel,q.strategy);if(Q!==KJ)throw new Error(z8[Q]);if(q.header)z1.deflateSetHeader(this.strm,q.header);if(q.dictionary){let G;if(typeof q.dictionary==="string")G=k1.string2buf(q.dictionary);else if(J6.call(q.dictionary)==="[object ArrayBuffer]")G=new Uint8Array(q.dictionary);else G=q.dictionary;if(Q=z1.deflateSetDictionary(this.strm,G),Q!==KJ)throw new Error(z8[Q]);this._dict_set=!0}},A9=function(J,q){const Q=new N1(q);if(Q.push(J,!0),Q.err)throw Q.msg||z8[Q.err];return Q.result},$Y=function(J,q){return q=q||{},q.raw=!0,A9(J,q)},zY=function(J,q){return q=q||{},q.gzip=!0,A9(J,q)},yY=function(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},sY=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},x1=function(J){this.options=$J.assign({chunkSize:65536,windowBits:15,to:""},J||{});const q=this.options;if(q.raw&&q.windowBits>=0&&q.windowBits<16){if(q.windowBits=-q.windowBits,q.windowBits===0)q.windowBits=-15}if(q.windowBits>=0&&q.windowBits<16&&!(J&&J.windowBits))q.windowBits+=32;if(q.windowBits>15&&q.windowBits<48){if((q.windowBits&15)===0)q.windowBits|=15}this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new eq,this.strm.avail_out=0;let Q=m0.inflateInit2(this.strm,q.windowBits);if(Q!==C1)throw new Error(z8[Q]);if(this.header=new tY,m0.inflateGetHeader(this.strm,this.header),q.dictionary){if(typeof q.dictionary==="string")q.dictionary=k1.string2buf(q.dictionary);else if(U6.call(q.dictionary)==="[object ArrayBuffer]")q.dictionary=new Uint8Array(q.dictionary);if(q.raw){if(Q=m0.inflateSetDictionary(this.strm,q.dictionary),Q!==C1)throw new Error(z8[Q])}}},R9=function(J,q){const Q=new x1(q);if(Q.push(J),Q.err)throw Q.msg||z8[Q.err];return Q.result},GV=function(J,q){return q=q||{},q.raw=!0,R9(J,q)};/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */var v7=0,vq=1,g7=2,y7=3,E7=258,x9=29,O1=256,H1=O1+1+x9,m8=30,F9=19,gq=2*H1+1,W8=15,Q9=16,h7=7,S9=256,yq=16,Eq=17,hq=18,M9=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),YJ=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),m7=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),mq=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_7=512,h0=new Array((H1+2)*2);u8(h0);var $1=new Array(m8*2);u8($1);var j1=new Array(_7);u8(j1);var M1=new Array(E7-y7+1);u8(M1);var D9=new Array(x9);u8(D9);var VJ=new Array(m8);u8(VJ);var _q,bq,uq,cq=(J)=>{return J<256?j1[J]:j1[256+(J>>>7)]},B1=(J,q)=>{J.pending_buf[J.pending++]=q&255,J.pending_buf[J.pending++]=q>>>8&255},$0=(J,q,Q)=>{if(J.bi_valid>Q9-Q)J.bi_buf|=q<<J.bi_valid&65535,B1(J,J.bi_buf),J.bi_buf=q>>Q9-J.bi_valid,J.bi_valid+=Q-Q9;else J.bi_buf|=q<<J.bi_valid&65535,J.bi_valid+=Q},D0=(J,q,Q)=>{$0(J,Q[q*2],Q[q*2+1])},pq=(J,q)=>{let Q=0;do Q|=J&1,J>>>=1,Q<<=1;while(--q>0);return Q>>>1},b7=(J)=>{if(J.bi_valid===16)B1(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0;else if(J.bi_valid>=8)J.pending_buf[J.pending++]=J.bi_buf&255,J.bi_buf>>=8,J.bi_valid-=8},u7=(J,q)=>{const{dyn_tree:Q,max_code:G}=q,X=q.stat_desc.static_tree,Y=q.stat_desc.has_stree,V=q.stat_desc.extra_bits,K=q.stat_desc.extra_base,$=q.stat_desc.max_length;let W,Z,B,U,H,j,z=0;for(U=0;U<=W8;U++)J.bl_count[U]=0;Q[J.heap[J.heap_max]*2+1]=0;for(W=J.heap_max+1;W<gq;W++){if(Z=J.heap[W],U=Q[Q[Z*2+1]*2+1]+1,U>$)U=$,z++;if(Q[Z*2+1]=U,Z>G)continue;if(J.bl_count[U]++,H=0,Z>=K)H=V[Z-K];if(j=Q[Z*2],J.opt_len+=j*(U+H),Y)J.static_len+=j*(X[Z*2+1]+H)}if(z===0)return;do{U=$-1;while(J.bl_count[U]===0)U--;J.bl_count[U]--,J.bl_count[U+1]+=2,J.bl_count[$]--,z-=2}while(z>0);for(U=$;U!==0;U--){Z=J.bl_count[U];while(Z!==0){if(B=J.heap[--W],B>G)continue;if(Q[B*2+1]!==U)J.opt_len+=(U-Q[B*2+1])*Q[B*2],Q[B*2+1]=U;Z--}}},fq=(J,q,Q)=>{const G=new Array(W8+1);let X=0,Y,V;for(Y=1;Y<=W8;Y++)X=X+Q[Y-1]<<1,G[Y]=X;for(V=0;V<=q;V++){let K=J[V*2+1];if(K===0)continue;J[V*2]=pq(G[K]++,K)}},c7=()=>{let J,q,Q,G,X;const Y=new Array(W8+1);Q=0;for(G=0;G<x9-1;G++){D9[G]=Q;for(J=0;J<1<<M9[G];J++)M1[Q++]=G}M1[Q-1]=G,X=0;for(G=0;G<16;G++){VJ[G]=X;for(J=0;J<1<<YJ[G];J++)j1[X++]=G}X>>=7;for(;G<m8;G++){VJ[G]=X<<7;for(J=0;J<1<<YJ[G]-7;J++)j1[256+X++]=G}for(q=0;q<=W8;q++)Y[q]=0;J=0;while(J<=143)h0[J*2+1]=8,J++,Y[8]++;while(J<=255)h0[J*2+1]=9,J++,Y[9]++;while(J<=279)h0[J*2+1]=7,J++,Y[7]++;while(J<=287)h0[J*2+1]=8,J++,Y[8]++;fq(h0,H1+1,Y);for(J=0;J<m8;J++)$1[J*2+1]=5,$1[J*2]=pq(J,5);_q=new q9(h0,M9,O1+1,H1,W8),bq=new q9($1,YJ,0,m8,W8),uq=new q9(new Array(0),m7,0,F9,h7)},lq=(J)=>{let q;for(q=0;q<H1;q++)J.dyn_ltree[q*2]=0;for(q=0;q<m8;q++)J.dyn_dtree[q*2]=0;for(q=0;q<F9;q++)J.bl_tree[q*2]=0;J.dyn_ltree[S9*2]=1,J.opt_len=J.static_len=0,J.sym_next=J.matches=0},dq=(J)=>{if(J.bi_valid>8)B1(J,J.bi_buf);else if(J.bi_valid>0)J.pending_buf[J.pending++]=J.bi_buf;J.bi_buf=0,J.bi_valid=0},nQ=(J,q,Q,G)=>{const X=q*2,Y=Q*2;return J[X]<J[Y]||J[X]===J[Y]&&G[q]<=G[Q]},X9=(J,q,Q)=>{const G=J.heap[Q];let X=Q<<1;while(X<=J.heap_len){if(X<J.heap_len&&nQ(q,J.heap[X+1],J.heap[X],J.depth))X++;if(nQ(q,G,J.heap[X],J.depth))break;J.heap[Q]=J.heap[X],Q=X,X<<=1}J.heap[Q]=G},rQ=(J,q,Q)=>{let G,X,Y=0,V,K;if(J.sym_next!==0)do if(G=J.pending_buf[J.sym_buf+Y++]&255,G+=(J.pending_buf[J.sym_buf+Y++]&255)<<8,X=J.pending_buf[J.sym_buf+Y++],G===0)D0(J,X,q);else{if(V=M1[X],D0(J,V+O1+1,q),K=M9[V],K!==0)X-=D9[V],$0(J,X,K);if(G--,V=cq(G),D0(J,V,Q),K=YJ[V],K!==0)G-=VJ[V],$0(J,G,K)}while(Y<J.sym_next);D0(J,S9,q)},B9=(J,q)=>{const Q=q.dyn_tree,G=q.stat_desc.static_tree,X=q.stat_desc.has_stree,Y=q.stat_desc.elems;let V,K,$=-1,W;J.heap_len=0,J.heap_max=gq;for(V=0;V<Y;V++)if(Q[V*2]!==0)J.heap[++J.heap_len]=$=V,J.depth[V]=0;else Q[V*2+1]=0;while(J.heap_len<2)if(W=J.heap[++J.heap_len]=$<2?++$:0,Q[W*2]=1,J.depth[W]=0,J.opt_len--,X)J.static_len-=G[W*2+1];q.max_code=$;for(V=J.heap_len>>1;V>=1;V--)X9(J,Q,V);W=Y;do V=J.heap[1],J.heap[1]=J.heap[J.heap_len--],X9(J,Q,1),K=J.heap[1],J.heap[--J.heap_max]=V,J.heap[--J.heap_max]=K,Q[W*2]=Q[V*2]+Q[K*2],J.depth[W]=(J.depth[V]>=J.depth[K]?J.depth[V]:J.depth[K])+1,Q[V*2+1]=Q[K*2+1]=W,J.heap[1]=W++,X9(J,Q,1);while(J.heap_len>=2);J.heap[--J.heap_max]=J.heap[1],u7(J,q),fq(Q,$,J.bl_count)},aQ=(J,q,Q)=>{let G,X=-1,Y,V=q[1],K=0,$=7,W=4;if(V===0)$=138,W=3;q[(Q+1)*2+1]=65535;for(G=0;G<=Q;G++){if(Y=V,V=q[(G+1)*2+1],++K<$&&Y===V)continue;else if(K<W)J.bl_tree[Y*2]+=K;else if(Y!==0){if(Y!==X)J.bl_tree[Y*2]++;J.bl_tree[yq*2]++}else if(K<=10)J.bl_tree[Eq*2]++;else J.bl_tree[hq*2]++;if(K=0,X=Y,V===0)$=138,W=3;else if(Y===V)$=6,W=3;else $=7,W=4}},sQ=(J,q,Q)=>{let G,X=-1,Y,V=q[1],K=0,$=7,W=4;if(V===0)$=138,W=3;for(G=0;G<=Q;G++){if(Y=V,V=q[(G+1)*2+1],++K<$&&Y===V)continue;else if(K<W)do D0(J,Y,J.bl_tree);while(--K!==0);else if(Y!==0){if(Y!==X)D0(J,Y,J.bl_tree),K--;D0(J,yq,J.bl_tree),$0(J,K-3,2)}else if(K<=10)D0(J,Eq,J.bl_tree),$0(J,K-3,3);else D0(J,hq,J.bl_tree),$0(J,K-11,7);if(K=0,X=Y,V===0)$=138,W=3;else if(Y===V)$=6,W=3;else $=7,W=4}},p7=(J)=>{let q;aQ(J,J.dyn_ltree,J.l_desc.max_code),aQ(J,J.dyn_dtree,J.d_desc.max_code),B9(J,J.bl_desc);for(q=F9-1;q>=3;q--)if(J.bl_tree[mq[q]*2+1]!==0)break;return J.opt_len+=3*(q+1)+5+5+4,q},f7=(J,q,Q,G)=>{let X;$0(J,q-257,5),$0(J,Q-1,5),$0(J,G-4,4);for(X=0;X<G;X++)$0(J,J.bl_tree[mq[X]*2+1],3);sQ(J,J.dyn_ltree,q-1),sQ(J,J.dyn_dtree,Q-1)},l7=(J)=>{let q=4093624447,Q;for(Q=0;Q<=31;Q++,q>>>=1)if(q&1&&J.dyn_ltree[Q*2]!==0)return 0;if(J.dyn_ltree[18]!==0||J.dyn_ltree[20]!==0||J.dyn_ltree[26]!==0)return 1;for(Q=32;Q<O1;Q++)if(J.dyn_ltree[Q*2]!==0)return 1;return 0},tQ=!1,d7=(J)=>{if(!tQ)c7(),tQ=!0;J.l_desc=new G9(J.dyn_ltree,_q),J.d_desc=new G9(J.dyn_dtree,bq),J.bl_desc=new G9(J.bl_tree,uq),J.bi_buf=0,J.bi_valid=0,lq(J)},iq=(J,q,Q,G)=>{if($0(J,(v7<<1)+(G?1:0),3),dq(J),B1(J,Q),B1(J,~Q),Q)J.pending_buf.set(J.window.subarray(q,q+Q),J.pending);J.pending+=Q},i7=(J)=>{$0(J,vq<<1,3),D0(J,S9,h0),b7(J)},o7=(J,q,Q,G)=>{let X,Y,V=0;if(J.level>0){if(J.strm.data_type===2)J.strm.data_type=l7(J);if(B9(J,J.l_desc),B9(J,J.d_desc),V=p7(J),X=J.opt_len+3+7>>>3,Y=J.static_len+3+7>>>3,Y<=X)X=Y}else X=Y=Q+5;if(Q+4<=X&&q!==-1)iq(J,q,Q,G);else if(J.strategy===4||Y===X)$0(J,(vq<<1)+(G?1:0),3),rQ(J,h0,$1);else $0(J,(g7<<1)+(G?1:0),3),f7(J,J.l_desc.max_code+1,J.d_desc.max_code+1,V+1),rQ(J,J.dyn_ltree,J.dyn_dtree);if(lq(J),G)dq(J)},n7=(J,q,Q)=>{if(J.pending_buf[J.sym_buf+J.sym_next++]=q,J.pending_buf[J.sym_buf+J.sym_next++]=q>>8,J.pending_buf[J.sym_buf+J.sym_next++]=Q,q===0)J.dyn_ltree[Q*2]++;else J.matches++,q--,J.dyn_ltree[(M1[Q]+O1+1)*2]++,J.dyn_dtree[cq(q)*2]++;return J.sym_next===J.sym_end},r7=d7,a7=iq,s7=o7,t7=n7,e7=i7,JX={_tr_init:r7,_tr_stored_block:a7,_tr_flush_block:s7,_tr_tally:t7,_tr_align:e7},QX=(J,q,Q,G)=>{let X=J&65535|0,Y=J>>>16&65535|0,V=0;while(Q!==0){V=Q>2000?2000:Q,Q-=V;do X=X+q[G++]|0,Y=Y+X|0;while(--V);X%=65521,Y%=65521}return X|Y<<16|0},L1=QX,qX=()=>{let J,q=[];for(var Q=0;Q<256;Q++){J=Q;for(var G=0;G<8;G++)J=J&1?3988292384^J>>>1:J>>>1;q[Q]=J}return q},GX=new Uint32Array(qX()),XX=(J,q,Q,G)=>{const X=GX,Y=G+Q;J^=-1;for(let V=G;V<Y;V++)J=J>>>8^X[(J^q[V])&255];return J^-1},q0=XX,z8={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},j8={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:YX,_tr_stored_block:L9,_tr_flush_block:VX,_tr_tally:o0,_tr_align:KX}=JX,{Z_NO_FLUSH:n0,Z_PARTIAL_FLUSH:WX,Z_FULL_FLUSH:ZX,Z_FINISH:P0,Z_BLOCK:eQ,Z_OK:Y0,Z_STREAM_END:Jq,Z_STREAM_ERROR:I0,Z_DATA_ERROR:$X,Z_BUF_ERROR:Y9,Z_DEFAULT_COMPRESSION:zX,Z_FILTERED:UX,Z_HUFFMAN_ONLY:JJ,Z_RLE:HX,Z_FIXED:jX,Z_DEFAULT_STRATEGY:MX,Z_UNKNOWN:BX,Z_DEFLATED:ZJ}=j8,LX=9,PX=15,kX=8,CX=29,OX=256,P9=OX+1+CX,wX=30,NX=19,xX=2*P9+1,FX=15,m=3,i0=258,A0=i0+m+1,SX=32,_8=42,I9=57,k9=69,C9=73,O9=91,w9=103,Z8=113,W1=666,Z0=1,c8=2,U8=3,p8=4,DX=3,$8=(J,q)=>{return J.msg=z8[q],q},Qq=(J)=>{return J*2-(J>4?9:0)},d0=(J)=>{let q=J.length;while(--q>=0)J[q]=0},IX=(J)=>{let q,Q,G,X=J.w_size;q=J.hash_size,G=q;do Q=J.head[--G],J.head[G]=Q>=X?Q-X:0;while(--q);q=X,G=q;do Q=J.prev[--G],J.prev[G]=Q>=X?Q-X:0;while(--q)},AX=(J,q,Q)=>(q<<J.hash_shift^Q)&J.hash_mask,r0=AX,j0=(J)=>{const q=J.state;let Q=q.pending;if(Q>J.avail_out)Q=J.avail_out;if(Q===0)return;if(J.output.set(q.pending_buf.subarray(q.pending_out,q.pending_out+Q),J.next_out),J.next_out+=Q,q.pending_out+=Q,J.total_out+=Q,J.avail_out-=Q,q.pending-=Q,q.pending===0)q.pending_out=0},M0=(J,q)=>{VX(J,J.block_start>=0?J.block_start:-1,J.strstart-J.block_start,q),J.block_start=J.strstart,j0(J.strm)},_=(J,q)=>{J.pending_buf[J.pending++]=q},K1=(J,q)=>{J.pending_buf[J.pending++]=q>>>8&255,J.pending_buf[J.pending++]=q&255},N9=(J,q,Q,G)=>{let X=J.avail_in;if(X>G)X=G;if(X===0)return 0;if(J.avail_in-=X,q.set(J.input.subarray(J.next_in,J.next_in+X),Q),J.state.wrap===1)J.adler=L1(J.adler,q,X,Q);else if(J.state.wrap===2)J.adler=q0(J.adler,q,X,Q);return J.next_in+=X,J.total_in+=X,X},oq=(J,q)=>{let{max_chain_length:Q,strstart:G}=J,X,Y,V=J.prev_length,K=J.nice_match;const $=J.strstart>J.w_size-A0?J.strstart-(J.w_size-A0):0,W=J.window,Z=J.w_mask,B=J.prev,U=J.strstart+i0;let H=W[G+V-1],j=W[G+V];if(J.prev_length>=J.good_match)Q>>=2;if(K>J.lookahead)K=J.lookahead;do{if(X=q,W[X+V]!==j||W[X+V-1]!==H||W[X]!==W[G]||W[++X]!==W[G+1])continue;G+=2,X++;do;while(W[++G]===W[++X]&&W[++G]===W[++X]&&W[++G]===W[++X]&&W[++G]===W[++X]&&W[++G]===W[++X]&&W[++G]===W[++X]&&W[++G]===W[++X]&&W[++G]===W[++X]&&G<U);if(Y=i0-(U-G),G=U-i0,Y>V){if(J.match_start=q,V=Y,Y>=K)break;H=W[G+V-1],j=W[G+V]}}while((q=B[q&Z])>$&&--Q!==0);if(V<=J.lookahead)return V;return J.lookahead},b8=(J)=>{const q=J.w_size;let Q,G,X;do{if(G=J.window_size-J.lookahead-J.strstart,J.strstart>=q+(q-A0)){if(J.window.set(J.window.subarray(q,q+q-G),0),J.match_start-=q,J.strstart-=q,J.block_start-=q,J.insert>J.strstart)J.insert=J.strstart;IX(J),G+=q}if(J.strm.avail_in===0)break;if(Q=N9(J.strm,J.window,J.strstart+J.lookahead,G),J.lookahead+=Q,J.lookahead+J.insert>=m){X=J.strstart-J.insert,J.ins_h=J.window[X],J.ins_h=r0(J,J.ins_h,J.window[X+1]);while(J.insert)if(J.ins_h=r0(J,J.ins_h,J.window[X+m-1]),J.prev[X&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=X,X++,J.insert--,J.lookahead+J.insert<m)break}}while(J.lookahead<A0&&J.strm.avail_in!==0)},nq=(J,q)=>{let Q=J.pending_buf_size-5>J.w_size?J.w_size:J.pending_buf_size-5,G,X,Y,V=0,K=J.strm.avail_in;do{if(G=65535,Y=J.bi_valid+42>>3,J.strm.avail_out<Y)break;if(Y=J.strm.avail_out-Y,X=J.strstart-J.block_start,G>X+J.strm.avail_in)G=X+J.strm.avail_in;if(G>Y)G=Y;if(G<Q&&(G===0&&q!==P0||q===n0||G!==X+J.strm.avail_in))break;if(V=q===P0&&G===X+J.strm.avail_in?1:0,L9(J,0,0,V),J.pending_buf[J.pending-4]=G,J.pending_buf[J.pending-3]=G>>8,J.pending_buf[J.pending-2]=~G,J.pending_buf[J.pending-1]=~G>>8,j0(J.strm),X){if(X>G)X=G;J.strm.output.set(J.window.subarray(J.block_start,J.block_start+X),J.strm.next_out),J.strm.next_out+=X,J.strm.avail_out-=X,J.strm.total_out+=X,J.block_start+=X,G-=X}if(G)N9(J.strm,J.strm.output,J.strm.next_out,G),J.strm.next_out+=G,J.strm.avail_out-=G,J.strm.total_out+=G}while(V===0);if(K-=J.strm.avail_in,K){if(K>=J.w_size)J.matches=2,J.window.set(J.strm.input.subarray(J.strm.next_in-J.w_size,J.strm.next_in),0),J.strstart=J.w_size,J.insert=J.strstart;else{if(J.window_size-J.strstart<=K){if(J.strstart-=J.w_size,J.window.set(J.window.subarray(J.w_size,J.w_size+J.strstart),0),J.matches<2)J.matches++;if(J.insert>J.strstart)J.insert=J.strstart}J.window.set(J.strm.input.subarray(J.strm.next_in-K,J.strm.next_in),J.strstart),J.strstart+=K,J.insert+=K>J.w_size-J.insert?J.w_size-J.insert:K}J.block_start=J.strstart}if(J.high_water<J.strstart)J.high_water=J.strstart;if(V)return p8;if(q!==n0&&q!==P0&&J.strm.avail_in===0&&J.strstart===J.block_start)return c8;if(Y=J.window_size-J.strstart,J.strm.avail_in>Y&&J.block_start>=J.w_size){if(J.block_start-=J.w_size,J.strstart-=J.w_size,J.window.set(J.window.subarray(J.w_size,J.w_size+J.strstart),0),J.matches<2)J.matches++;if(Y+=J.w_size,J.insert>J.strstart)J.insert=J.strstart}if(Y>J.strm.avail_in)Y=J.strm.avail_in;if(Y)N9(J.strm,J.window,J.strstart,Y),J.strstart+=Y,J.insert+=Y>J.w_size-J.insert?J.w_size-J.insert:Y;if(J.high_water<J.strstart)J.high_water=J.strstart;if(Y=J.bi_valid+42>>3,Y=J.pending_buf_size-Y>65535?65535:J.pending_buf_size-Y,Q=Y>J.w_size?J.w_size:Y,X=J.strstart-J.block_start,X>=Q||(X||q===P0)&&q!==n0&&J.strm.avail_in===0&&X<=Y)G=X>Y?Y:X,V=q===P0&&J.strm.avail_in===0&&G===X?1:0,L9(J,J.block_start,G,V),J.block_start+=G,j0(J.strm);return V?U8:Z0},V9=(J,q)=>{let Q,G;for(;;){if(J.lookahead<A0){if(b8(J),J.lookahead<A0&&q===n0)return Z0;if(J.lookahead===0)break}if(Q=0,J.lookahead>=m)J.ins_h=r0(J,J.ins_h,J.window[J.strstart+m-1]),Q=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart;if(Q!==0&&J.strstart-Q<=J.w_size-A0)J.match_length=oq(J,Q);if(J.match_length>=m)if(G=o0(J,J.strstart-J.match_start,J.match_length-m),J.lookahead-=J.match_length,J.match_length<=J.max_lazy_match&&J.lookahead>=m){J.match_length--;do J.strstart++,J.ins_h=r0(J,J.ins_h,J.window[J.strstart+m-1]),Q=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart;while(--J.match_length!==0);J.strstart++}else J.strstart+=J.match_length,J.match_length=0,J.ins_h=J.window[J.strstart],J.ins_h=r0(J,J.ins_h,J.window[J.strstart+1]);else G=o0(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++;if(G){if(M0(J,!1),J.strm.avail_out===0)return Z0}}if(J.insert=J.strstart<m-1?J.strstart:m-1,q===P0){if(M0(J,!0),J.strm.avail_out===0)return U8;return p8}if(J.sym_next){if(M0(J,!1),J.strm.avail_out===0)return Z0}return c8},E8=(J,q)=>{let Q,G,X;for(;;){if(J.lookahead<A0){if(b8(J),J.lookahead<A0&&q===n0)return Z0;if(J.lookahead===0)break}if(Q=0,J.lookahead>=m)J.ins_h=r0(J,J.ins_h,J.window[J.strstart+m-1]),Q=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart;if(J.prev_length=J.match_length,J.prev_match=J.match_start,J.match_length=m-1,Q!==0&&J.prev_length<J.max_lazy_match&&J.strstart-Q<=J.w_size-A0){if(J.match_length=oq(J,Q),J.match_length<=5&&(J.strategy===UX||J.match_length===m&&J.strstart-J.match_start>4096))J.match_length=m-1}if(J.prev_length>=m&&J.match_length<=J.prev_length){X=J.strstart+J.lookahead-m,G=o0(J,J.strstart-1-J.prev_match,J.prev_length-m),J.lookahead-=J.prev_length-1,J.prev_length-=2;do if(++J.strstart<=X)J.ins_h=r0(J,J.ins_h,J.window[J.strstart+m-1]),Q=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart;while(--J.prev_length!==0);if(J.match_available=0,J.match_length=m-1,J.strstart++,G){if(M0(J,!1),J.strm.avail_out===0)return Z0}}else if(J.match_available){if(G=o0(J,0,J.window[J.strstart-1]),G)M0(J,!1);if(J.strstart++,J.lookahead--,J.strm.avail_out===0)return Z0}else J.match_available=1,J.strstart++,J.lookahead--}if(J.match_available)G=o0(J,0,J.window[J.strstart-1]),J.match_available=0;if(J.insert=J.strstart<m-1?J.strstart:m-1,q===P0){if(M0(J,!0),J.strm.avail_out===0)return U8;return p8}if(J.sym_next){if(M0(J,!1),J.strm.avail_out===0)return Z0}return c8},RX=(J,q)=>{let Q,G,X,Y;const V=J.window;for(;;){if(J.lookahead<=i0){if(b8(J),J.lookahead<=i0&&q===n0)return Z0;if(J.lookahead===0)break}if(J.match_length=0,J.lookahead>=m&&J.strstart>0){if(X=J.strstart-1,G=V[X],G===V[++X]&&G===V[++X]&&G===V[++X]){Y=J.strstart+i0;do;while(G===V[++X]&&G===V[++X]&&G===V[++X]&&G===V[++X]&&G===V[++X]&&G===V[++X]&&G===V[++X]&&G===V[++X]&&X<Y);if(J.match_length=i0-(Y-X),J.match_length>J.lookahead)J.match_length=J.lookahead}}if(J.match_length>=m)Q=o0(J,1,J.match_length-m),J.lookahead-=J.match_length,J.strstart+=J.match_length,J.match_length=0;else Q=o0(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++;if(Q){if(M0(J,!1),J.strm.avail_out===0)return Z0}}if(J.insert=0,q===P0){if(M0(J,!0),J.strm.avail_out===0)return U8;return p8}if(J.sym_next){if(M0(J,!1),J.strm.avail_out===0)return Z0}return c8},TX=(J,q)=>{let Q;for(;;){if(J.lookahead===0){if(b8(J),J.lookahead===0){if(q===n0)return Z0;break}}if(J.match_length=0,Q=o0(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++,Q){if(M0(J,!1),J.strm.avail_out===0)return Z0}}if(J.insert=0,q===P0){if(M0(J,!0),J.strm.avail_out===0)return U8;return p8}if(J.sym_next){if(M0(J,!1),J.strm.avail_out===0)return Z0}return c8},Z1=[new S0(0,0,0,0,nq),new S0(4,4,8,4,V9),new S0(4,5,16,8,V9),new S0(4,6,32,32,V9),new S0(4,4,16,16,E8),new S0(8,16,32,32,E8),new S0(8,16,128,128,E8),new S0(8,32,128,256,E8),new S0(32,128,258,1024,E8),new S0(32,258,258,4096,E8)],vX=(J)=>{J.window_size=2*J.w_size,d0(J.head),J.max_lazy_match=Z1[J.level].max_lazy,J.good_match=Z1[J.level].good_length,J.nice_match=Z1[J.level].nice_length,J.max_chain_length=Z1[J.level].max_chain,J.strstart=0,J.block_start=0,J.lookahead=0,J.insert=0,J.match_length=J.prev_length=m-1,J.match_available=0,J.ins_h=0},w1=(J)=>{if(!J)return 1;const q=J.state;if(!q||q.strm!==J||q.status!==_8&&q.status!==I9&&q.status!==k9&&q.status!==C9&&q.status!==O9&&q.status!==w9&&q.status!==Z8&&q.status!==W1)return 1;return 0},rq=(J)=>{if(w1(J))return $8(J,I0);J.total_in=J.total_out=0,J.data_type=BX;const q=J.state;if(q.pending=0,q.pending_out=0,q.wrap<0)q.wrap=-q.wrap;return q.status=q.wrap===2?I9:q.wrap?_8:Z8,J.adler=q.wrap===2?0:1,q.last_flush=-2,YX(q),Y0},aq=(J)=>{const q=rq(J);if(q===Y0)vX(J.state);return q},yX=(J,q)=>{if(w1(J)||J.state.wrap!==2)return I0;return J.state.gzhead=q,Y0},sq=(J,q,Q,G,X,Y)=>{if(!J)return I0;let V=1;if(q===zX)q=6;if(G<0)V=0,G=-G;else if(G>15)V=2,G-=16;if(X<1||X>LX||Q!==ZJ||G<8||G>15||q<0||q>9||Y<0||Y>jX||G===8&&V!==1)return $8(J,I0);if(G===8)G=9;const K=new gX;return J.state=K,K.strm=J,K.status=_8,K.wrap=V,K.gzhead=null,K.w_bits=G,K.w_size=1<<K.w_bits,K.w_mask=K.w_size-1,K.hash_bits=X+7,K.hash_size=1<<K.hash_bits,K.hash_mask=K.hash_size-1,K.hash_shift=~~((K.hash_bits+m-1)/m),K.window=new Uint8Array(K.w_size*2),K.head=new Uint16Array(K.hash_size),K.prev=new Uint16Array(K.w_size),K.lit_bufsize=1<<X+6,K.pending_buf_size=K.lit_bufsize*4,K.pending_buf=new Uint8Array(K.pending_buf_size),K.sym_buf=K.lit_bufsize,K.sym_end=(K.lit_bufsize-1)*3,K.level=q,K.strategy=Y,K.method=Q,aq(J)},EX=(J,q)=>{return sq(J,q,ZJ,PX,kX,MX)},hX=(J,q)=>{if(w1(J)||q>eQ||q<0)return J?$8(J,I0):I0;const Q=J.state;if(!J.output||J.avail_in!==0&&!J.input||Q.status===W1&&q!==P0)return $8(J,J.avail_out===0?Y9:I0);const G=Q.last_flush;if(Q.last_flush=q,Q.pending!==0){if(j0(J),J.avail_out===0)return Q.last_flush=-1,Y0}else if(J.avail_in===0&&Qq(q)<=Qq(G)&&q!==P0)return $8(J,Y9);if(Q.status===W1&&J.avail_in!==0)return $8(J,Y9);if(Q.status===_8&&Q.wrap===0)Q.status=Z8;if(Q.status===_8){let X=ZJ+(Q.w_bits-8<<4)<<8,Y=-1;if(Q.strategy>=JJ||Q.level<2)Y=0;else if(Q.level<6)Y=1;else if(Q.level===6)Y=2;else Y=3;if(X|=Y<<6,Q.strstart!==0)X|=SX;if(X+=31-X%31,K1(Q,X),Q.strstart!==0)K1(Q,J.adler>>>16),K1(Q,J.adler&65535);if(J.adler=1,Q.status=Z8,j0(J),Q.pending!==0)return Q.last_flush=-1,Y0}if(Q.status===I9)if(J.adler=0,_(Q,31),_(Q,139),_(Q,8),!Q.gzhead){if(_(Q,0),_(Q,0),_(Q,0),_(Q,0),_(Q,0),_(Q,Q.level===9?2:Q.strategy>=JJ||Q.level<2?4:0),_(Q,DX),Q.status=Z8,j0(J),Q.pending!==0)return Q.last_flush=-1,Y0}else{if(_(Q,(Q.gzhead.text?1:0)+(Q.gzhead.hcrc?2:0)+(!Q.gzhead.extra?0:4)+(!Q.gzhead.name?0:8)+(!Q.gzhead.comment?0:16)),_(Q,Q.gzhead.time&255),_(Q,Q.gzhead.time>>8&255),_(Q,Q.gzhead.time>>16&255),_(Q,Q.gzhead.time>>24&255),_(Q,Q.level===9?2:Q.strategy>=JJ||Q.level<2?4:0),_(Q,Q.gzhead.os&255),Q.gzhead.extra&&Q.gzhead.extra.length)_(Q,Q.gzhead.extra.length&255),_(Q,Q.gzhead.extra.length>>8&255);if(Q.gzhead.hcrc)J.adler=q0(J.adler,Q.pending_buf,Q.pending,0);Q.gzindex=0,Q.status=k9}if(Q.status===k9){if(Q.gzhead.extra){let X=Q.pending,Y=(Q.gzhead.extra.length&65535)-Q.gzindex;while(Q.pending+Y>Q.pending_buf_size){let K=Q.pending_buf_size-Q.pending;if(Q.pending_buf.set(Q.gzhead.extra.subarray(Q.gzindex,Q.gzindex+K),Q.pending),Q.pending=Q.pending_buf_size,Q.gzhead.hcrc&&Q.pending>X)J.adler=q0(J.adler,Q.pending_buf,Q.pending-X,X);if(Q.gzindex+=K,j0(J),Q.pending!==0)return Q.last_flush=-1,Y0;X=0,Y-=K}let V=new Uint8Array(Q.gzhead.extra);if(Q.pending_buf.set(V.subarray(Q.gzindex,Q.gzindex+Y),Q.pending),Q.pending+=Y,Q.gzhead.hcrc&&Q.pending>X)J.adler=q0(J.adler,Q.pending_buf,Q.pending-X,X);Q.gzindex=0}Q.status=C9}if(Q.status===C9){if(Q.gzhead.name){let X=Q.pending,Y;do{if(Q.pending===Q.pending_buf_size){if(Q.gzhead.hcrc&&Q.pending>X)J.adler=q0(J.adler,Q.pending_buf,Q.pending-X,X);if(j0(J),Q.pending!==0)return Q.last_flush=-1,Y0;X=0}if(Q.gzindex<Q.gzhead.name.length)Y=Q.gzhead.name.charCodeAt(Q.gzindex++)&255;else Y=0;_(Q,Y)}while(Y!==0);if(Q.gzhead.hcrc&&Q.pending>X)J.adler=q0(J.adler,Q.pending_buf,Q.pending-X,X);Q.gzindex=0}Q.status=O9}if(Q.status===O9){if(Q.gzhead.comment){let X=Q.pending,Y;do{if(Q.pending===Q.pending_buf_size){if(Q.gzhead.hcrc&&Q.pending>X)J.adler=q0(J.adler,Q.pending_buf,Q.pending-X,X);if(j0(J),Q.pending!==0)return Q.last_flush=-1,Y0;X=0}if(Q.gzindex<Q.gzhead.comment.length)Y=Q.gzhead.comment.charCodeAt(Q.gzindex++)&255;else Y=0;_(Q,Y)}while(Y!==0);if(Q.gzhead.hcrc&&Q.pending>X)J.adler=q0(J.adler,Q.pending_buf,Q.pending-X,X)}Q.status=w9}if(Q.status===w9){if(Q.gzhead.hcrc){if(Q.pending+2>Q.pending_buf_size){if(j0(J),Q.pending!==0)return Q.last_flush=-1,Y0}_(Q,J.adler&255),_(Q,J.adler>>8&255),J.adler=0}if(Q.status=Z8,j0(J),Q.pending!==0)return Q.last_flush=-1,Y0}if(J.avail_in!==0||Q.lookahead!==0||q!==n0&&Q.status!==W1){let X=Q.level===0?nq(Q,q):Q.strategy===JJ?TX(Q,q):Q.strategy===HX?RX(Q,q):Z1[Q.level].func(Q,q);if(X===U8||X===p8)Q.status=W1;if(X===Z0||X===U8){if(J.avail_out===0)Q.last_flush=-1;return Y0}if(X===c8){if(q===WX)KX(Q);else if(q!==eQ){if(L9(Q,0,0,!1),q===ZX){if(d0(Q.head),Q.lookahead===0)Q.strstart=0,Q.block_start=0,Q.insert=0}}if(j0(J),J.avail_out===0)return Q.last_flush=-1,Y0}}if(q!==P0)return Y0;if(Q.wrap<=0)return Jq;if(Q.wrap===2)_(Q,J.adler&255),_(Q,J.adler>>8&255),_(Q,J.adler>>16&255),_(Q,J.adler>>24&255),_(Q,J.total_in&255),_(Q,J.total_in>>8&255),_(Q,J.total_in>>16&255),_(Q,J.total_in>>24&255);else K1(Q,J.adler>>>16),K1(Q,J.adler&65535);if(j0(J),Q.wrap>0)Q.wrap=-Q.wrap;return Q.pending!==0?Y0:Jq},mX=(J)=>{if(w1(J))return I0;const q=J.state.status;return J.state=null,q===Z8?$8(J,$X):Y0},_X=(J,q)=>{let Q=q.length;if(w1(J))return I0;const G=J.state,X=G.wrap;if(X===2||X===1&&G.status!==_8||G.lookahead)return I0;if(X===1)J.adler=L1(J.adler,q,Q,0);if(G.wrap=0,Q>=G.w_size){if(X===0)d0(G.head),G.strstart=0,G.block_start=0,G.insert=0;let $=new Uint8Array(G.w_size);$.set(q.subarray(Q-G.w_size,Q),0),q=$,Q=G.w_size}const{avail_in:Y,next_in:V,input:K}=J;J.avail_in=Q,J.next_in=0,J.input=q,b8(G);while(G.lookahead>=m){let $=G.strstart,W=G.lookahead-(m-1);do G.ins_h=r0(G,G.ins_h,G.window[$+m-1]),G.prev[$&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=$,$++;while(--W);G.strstart=$,G.lookahead=m-1,b8(G)}return G.strstart+=G.lookahead,G.block_start=G.strstart,G.insert=G.lookahead,G.lookahead=0,G.match_length=G.prev_length=m-1,G.match_available=0,J.next_in=V,J.input=K,J.avail_in=Y,G.wrap=X,Y0},bX=EX,uX=sq,cX=aq,pX=rq,fX=yX,lX=hX,dX=mX,iX=_X,oX="pako deflate (from Nodeca project)",z1={deflateInit:bX,deflateInit2:uX,deflateReset:cX,deflateResetKeep:pX,deflateSetHeader:fX,deflate:lX,deflateEnd:dX,deflateSetDictionary:iX,deflateInfo:oX},nX=(J,q)=>{return Object.prototype.hasOwnProperty.call(J,q)},rX=function(J){const q=Array.prototype.slice.call(arguments,1);while(q.length){const Q=q.shift();if(!Q)continue;if(typeof Q!=="object")throw new TypeError(Q+"must be non-object");for(let G in Q)if(nX(Q,G))J[G]=Q[G]}return J},aX=(J)=>{let q=0;for(let G=0,X=J.length;G<X;G++)q+=J[G].length;const Q=new Uint8Array(q);for(let G=0,X=0,Y=J.length;G<Y;G++){let V=J[G];Q.set(V,X),X+=V.length}return Q},$J={assign:rX,flattenChunks:aX},tq=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(J){tq=!1}var P1=new Uint8Array(256);for(let J=0;J<256;J++)P1[J]=J>=252?6:J>=248?5:J>=240?4:J>=224?3:J>=192?2:1;P1[254]=P1[254]=1;var sX=(J)=>{if(typeof TextEncoder==="function"&&TextEncoder.prototype.encode)return(new TextEncoder()).encode(J);let q,Q,G,X,Y,V=J.length,K=0;for(X=0;X<V;X++){if(Q=J.charCodeAt(X),(Q&64512)===55296&&X+1<V){if(G=J.charCodeAt(X+1),(G&64512)===56320)Q=65536+(Q-55296<<10)+(G-56320),X++}K+=Q<128?1:Q<2048?2:Q<65536?3:4}q=new Uint8Array(K);for(Y=0,X=0;Y<K;X++){if(Q=J.charCodeAt(X),(Q&64512)===55296&&X+1<V){if(G=J.charCodeAt(X+1),(G&64512)===56320)Q=65536+(Q-55296<<10)+(G-56320),X++}if(Q<128)q[Y++]=Q;else if(Q<2048)q[Y++]=192|Q>>>6,q[Y++]=128|Q&63;else if(Q<65536)q[Y++]=224|Q>>>12,q[Y++]=128|Q>>>6&63,q[Y++]=128|Q&63;else q[Y++]=240|Q>>>18,q[Y++]=128|Q>>>12&63,q[Y++]=128|Q>>>6&63,q[Y++]=128|Q&63}return q},tX=(J,q)=>{if(q<65534){if(J.subarray&&tq)return String.fromCharCode.apply(null,J.length===q?J:J.subarray(0,q))}let Q="";for(let G=0;G<q;G++)Q+=String.fromCharCode(J[G]);return Q},eX=(J,q)=>{const Q=q||J.length;if(typeof TextDecoder==="function"&&TextDecoder.prototype.decode)return(new TextDecoder()).decode(J.subarray(0,q));let G,X;const Y=new Array(Q*2);for(X=0,G=0;G<Q;){let V=J[G++];if(V<128){Y[X++]=V;continue}let K=P1[V];if(K>4){Y[X++]=65533,G+=K-1;continue}V&=K===2?31:K===3?15:7;while(K>1&&G<Q)V=V<<6|J[G++]&63,K--;if(K>1){Y[X++]=65533;continue}if(V<65536)Y[X++]=V;else V-=65536,Y[X++]=55296|V>>10&1023,Y[X++]=56320|V&1023}return tX(Y,X)},JY=(J,q)=>{if(q=q||J.length,q>J.length)q=J.length;let Q=q-1;while(Q>=0&&(J[Q]&192)===128)Q--;if(Q<0)return q;if(Q===0)return q;return Q+P1[J[Q]]>q?Q:q},k1={string2buf:sX,buf2string:eX,utf8border:JY},eq=QY,J6=Object.prototype.toString,{Z_NO_FLUSH:qY,Z_SYNC_FLUSH:GY,Z_FULL_FLUSH:XY,Z_FINISH:YY,Z_OK:KJ,Z_STREAM_END:VY,Z_DEFAULT_COMPRESSION:KY,Z_DEFAULT_STRATEGY:WY,Z_DEFLATED:ZY}=j8;N1.prototype.push=function(J,q){const Q=this.strm,G=this.options.chunkSize;let X,Y;if(this.ended)return!1;if(q===~~q)Y=q;else Y=q===!0?YY:qY;if(typeof J==="string")Q.input=k1.string2buf(J);else if(J6.call(J)==="[object ArrayBuffer]")Q.input=new Uint8Array(J);else Q.input=J;Q.next_in=0,Q.avail_in=Q.input.length;for(;;){if(Q.avail_out===0)Q.output=new Uint8Array(G),Q.next_out=0,Q.avail_out=G;if((Y===GY||Y===XY)&&Q.avail_out<=6){this.onData(Q.output.subarray(0,Q.next_out)),Q.avail_out=0;continue}if(X=z1.deflate(Q,Y),X===VY){if(Q.next_out>0)this.onData(Q.output.subarray(0,Q.next_out));return X=z1.deflateEnd(this.strm),this.onEnd(X),this.ended=!0,X===KJ}if(Q.avail_out===0){this.onData(Q.output);continue}if(Y>0&&Q.next_out>0){this.onData(Q.output.subarray(0,Q.next_out)),Q.avail_out=0;continue}if(Q.avail_in===0)break}return!0};N1.prototype.onData=function(J){this.chunks.push(J)};N1.prototype.onEnd=function(J){if(J===KJ)this.result=$J.flattenChunks(this.chunks);this.chunks=[],this.err=J,this.msg=this.strm.msg};var UY=N1,HY=A9,jY=$Y,MY=zY,BY=j8,LY={Deflate:UY,deflate:HY,deflateRaw:jY,gzip:MY,constants:BY},QJ=16209,PY=16191,kY=function J(q,Q){let G,X,Y,V,K,$,W,Z,B,U,H,j,z,M,P,O,w,L,D,S,F,I,y,A;const T=q.state;G=q.next_in,y=q.input,X=G+(q.avail_in-5),Y=q.next_out,A=q.output,V=Y-(Q-q.avail_out),K=Y+(q.avail_out-257),$=T.dmax,W=T.wsize,Z=T.whave,B=T.wnext,U=T.window,H=T.hold,j=T.bits,z=T.lencode,M=T.distcode,P=(1<<T.lenbits)-1,O=(1<<T.distbits)-1;J:do{if(j<15)H+=y[G++]<<j,j+=8,H+=y[G++]<<j,j+=8;w=z[H&P];Q:for(;;){if(L=w>>>24,H>>>=L,j-=L,L=w>>>16&255,L===0)A[Y++]=w&65535;else if(L&16){if(D=w&65535,L&=15,L){if(j<L)H+=y[G++]<<j,j+=8;D+=H&(1<<L)-1,H>>>=L,j-=L}if(j<15)H+=y[G++]<<j,j+=8,H+=y[G++]<<j,j+=8;w=M[H&O];q:for(;;){if(L=w>>>24,H>>>=L,j-=L,L=w>>>16&255,L&16){if(S=w&65535,L&=15,j<L){if(H+=y[G++]<<j,j+=8,j<L)H+=y[G++]<<j,j+=8}if(S+=H&(1<<L)-1,S>$){q.msg="invalid distance too far back",T.mode=QJ;break J}if(H>>>=L,j-=L,L=Y-V,S>L){if(L=S-L,L>Z){if(T.sane){q.msg="invalid distance too far back",T.mode=QJ;break J}}if(F=0,I=U,B===0){if(F+=W-L,L<D){D-=L;do A[Y++]=U[F++];while(--L);F=Y-S,I=A}}else if(B<L){if(F+=W+B-L,L-=B,L<D){D-=L;do A[Y++]=U[F++];while(--L);if(F=0,B<D){L=B,D-=L;do A[Y++]=U[F++];while(--L);F=Y-S,I=A}}}else if(F+=B-L,L<D){D-=L;do A[Y++]=U[F++];while(--L);F=Y-S,I=A}while(D>2)A[Y++]=I[F++],A[Y++]=I[F++],A[Y++]=I[F++],D-=3;if(D){if(A[Y++]=I[F++],D>1)A[Y++]=I[F++]}}else{F=Y-S;do A[Y++]=A[F++],A[Y++]=A[F++],A[Y++]=A[F++],D-=3;while(D>2);if(D){if(A[Y++]=A[F++],D>1)A[Y++]=A[F++]}}}else if((L&64)===0){w=M[(w&65535)+(H&(1<<L)-1)];continue q}else{q.msg="invalid distance code",T.mode=QJ;break J}break}}else if((L&64)===0){w=z[(w&65535)+(H&(1<<L)-1)];continue Q}else if(L&32){T.mode=PY;break J}else{q.msg="invalid literal/length code",T.mode=QJ;break J}break}}while(G<X&&Y<K);D=j>>3,G-=D,j-=D<<3,H&=(1<<j)-1,q.next_in=G,q.next_out=Y,q.avail_in=G<X?5+(X-G):5-(G-X),q.avail_out=Y<K?257+(K-Y):257-(Y-K),T.hold=H,T.bits=j;return},h8=15,qq=852,Gq=592,Xq=0,K9=1,Yq=2,CY=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),OY=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),wY=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),NY=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),xY=(J,q,Q,G,X,Y,V,K)=>{const $=K.bits;let W=0,Z=0,B=0,U=0,H=0,j=0,z=0,M=0,P=0,O=0,w,L,D,S,F,I=null,y;const A=new Uint16Array(h8+1),T=new Uint16Array(h8+1);let N=null,R,k,x;for(W=0;W<=h8;W++)A[W]=0;for(Z=0;Z<G;Z++)A[q[Q+Z]]++;H=$;for(U=h8;U>=1;U--)if(A[U]!==0)break;if(H>U)H=U;if(U===0)return X[Y++]=1<<24|64<<16|0,X[Y++]=1<<24|64<<16|0,K.bits=1,0;for(B=1;B<U;B++)if(A[B]!==0)break;if(H<B)H=B;M=1;for(W=1;W<=h8;W++)if(M<<=1,M-=A[W],M<0)return-1;if(M>0&&(J===Xq||U!==1))return-1;T[1]=0;for(W=1;W<h8;W++)T[W+1]=T[W]+A[W];for(Z=0;Z<G;Z++)if(q[Q+Z]!==0)V[T[q[Q+Z]]++]=Z;if(J===Xq)I=N=V,y=20;else if(J===K9)I=CY,N=OY,y=257;else I=wY,N=NY,y=0;if(O=0,Z=0,W=B,F=Y,j=H,z=0,D=-1,P=1<<H,S=P-1,J===K9&&P>qq||J===Yq&&P>Gq)return 1;for(;;){if(R=W-z,V[Z]+1<y)k=0,x=V[Z];else if(V[Z]>=y)k=N[V[Z]-y],x=I[V[Z]-y];else k=96,x=0;w=1<<W-z,L=1<<j,B=L;do L-=w,X[F+(O>>z)+L]=R<<24|k<<16|x|0;while(L!==0);w=1<<W-1;while(O&w)w>>=1;if(w!==0)O&=w-1,O+=w;else O=0;if(Z++,--A[W]===0){if(W===U)break;W=q[Q+V[Z]]}if(W>H&&(O&S)!==D){if(z===0)z=H;F+=B,j=W-z,M=1<<j;while(j+z<U){if(M-=A[j+z],M<=0)break;j++,M<<=1}if(P+=1<<j,J===K9&&P>qq||J===Yq&&P>Gq)return 1;D=O&S,X[D]=H<<24|j<<16|F-Y|0}}if(O!==0)X[F+O]=W-z<<24|64<<16|0;return K.bits=H,0},U1=xY,FY=0,Q6=1,q6=2,{Z_FINISH:Vq,Z_BLOCK:SY,Z_TREES:qJ,Z_OK:H8,Z_STREAM_END:DY,Z_NEED_DICT:IY,Z_STREAM_ERROR:k0,Z_DATA_ERROR:G6,Z_MEM_ERROR:X6,Z_BUF_ERROR:AY,Z_DEFLATED:Kq}=j8,zJ=16180,Wq=16181,Zq=16182,$q=16183,zq=16184,Uq=16185,Hq=16186,jq=16187,Mq=16188,Bq=16189,WJ=16190,E0=16191,W9=16192,Lq=16193,Z9=16194,Pq=16195,kq=16196,Cq=16197,Oq=16198,GJ=16199,XJ=16200,wq=16201,Nq=16202,xq=16203,Fq=16204,Sq=16205,$9=16206,Dq=16207,Iq=16208,d=16209,Y6=16210,V6=16211,RY=852,TY=592,vY=15,gY=vY,Aq=(J)=>{return(J>>>24&255)+(J>>>8&65280)+((J&65280)<<8)+((J&255)<<24)},M8=(J)=>{if(!J)return 1;const q=J.state;if(!q||q.strm!==J||q.mode<zJ||q.mode>V6)return 1;return 0},K6=(J)=>{if(M8(J))return k0;const q=J.state;if(J.total_in=J.total_out=q.total=0,J.msg="",q.wrap)J.adler=q.wrap&1;return q.mode=zJ,q.last=0,q.havedict=0,q.flags=-1,q.dmax=32768,q.head=null,q.hold=0,q.bits=0,q.lencode=q.lendyn=new Int32Array(RY),q.distcode=q.distdyn=new Int32Array(TY),q.sane=1,q.back=-1,H8},W6=(J)=>{if(M8(J))return k0;const q=J.state;return q.wsize=0,q.whave=0,q.wnext=0,K6(J)},Z6=(J,q)=>{let Q;if(M8(J))return k0;const G=J.state;if(q<0)Q=0,q=-q;else if(Q=(q>>4)+5,q<48)q&=15;if(q&&(q<8||q>15))return k0;if(G.window!==null&&G.wbits!==q)G.window=null;return G.wrap=Q,G.wbits=q,W6(J)},$6=(J,q)=>{if(!J)return k0;const Q=new yY;J.state=Q,Q.strm=J,Q.window=null,Q.mode=zJ;const G=Z6(J,q);if(G!==H8)J.state=null;return G},EY=(J)=>{return $6(J,gY)},Rq=!0,z9,U9,hY=(J)=>{if(Rq){z9=new Int32Array(512),U9=new Int32Array(32);let q=0;while(q<144)J.lens[q++]=8;while(q<256)J.lens[q++]=9;while(q<280)J.lens[q++]=7;while(q<288)J.lens[q++]=8;U1(Q6,J.lens,0,288,z9,0,J.work,{bits:9}),q=0;while(q<32)J.lens[q++]=5;U1(q6,J.lens,0,32,U9,0,J.work,{bits:5}),Rq=!1}J.lencode=z9,J.lenbits=9,J.distcode=U9,J.distbits=5},z6=(J,q,Q,G)=>{let X;const Y=J.state;if(Y.window===null)Y.wsize=1<<Y.wbits,Y.wnext=0,Y.whave=0,Y.window=new Uint8Array(Y.wsize);if(G>=Y.wsize)Y.window.set(q.subarray(Q-Y.wsize,Q),0),Y.wnext=0,Y.whave=Y.wsize;else{if(X=Y.wsize-Y.wnext,X>G)X=G;if(Y.window.set(q.subarray(Q-G,Q-G+X),Y.wnext),G-=X,G)Y.window.set(q.subarray(Q-G,Q),0),Y.wnext=G,Y.whave=Y.wsize;else{if(Y.wnext+=X,Y.wnext===Y.wsize)Y.wnext=0;if(Y.whave<Y.wsize)Y.whave+=X}}return 0},mY=(J,q)=>{let Q,G,X,Y,V,K,$,W,Z,B,U,H,j,z,M=0,P,O,w,L,D,S,F,I;const y=new Uint8Array(4);let A,T;const N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(M8(J)||!J.output||!J.input&&J.avail_in!==0)return k0;if(Q=J.state,Q.mode===E0)Q.mode=W9;V=J.next_out,X=J.output,$=J.avail_out,Y=J.next_in,G=J.input,K=J.avail_in,W=Q.hold,Z=Q.bits,B=K,U=$,I=H8;J:for(;;)switch(Q.mode){case zJ:if(Q.wrap===0){Q.mode=W9;break}while(Z<16){if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}if(Q.wrap&2&&W===35615){if(Q.wbits===0)Q.wbits=15;Q.check=0,y[0]=W&255,y[1]=W>>>8&255,Q.check=q0(Q.check,y,2,0),W=0,Z=0,Q.mode=Wq;break}if(Q.head)Q.head.done=!1;if(!(Q.wrap&1)||(((W&255)<<8)+(W>>8))%31){J.msg="incorrect header check",Q.mode=d;break}if((W&15)!==Kq){J.msg="unknown compression method",Q.mode=d;break}if(W>>>=4,Z-=4,F=(W&15)+8,Q.wbits===0)Q.wbits=F;if(F>15||F>Q.wbits){J.msg="invalid window size",Q.mode=d;break}Q.dmax=1<<Q.wbits,Q.flags=0,J.adler=Q.check=1,Q.mode=W&512?Bq:E0,W=0,Z=0;break;case Wq:while(Z<16){if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}if(Q.flags=W,(Q.flags&255)!==Kq){J.msg="unknown compression method",Q.mode=d;break}if(Q.flags&57344){J.msg="unknown header flags set",Q.mode=d;break}if(Q.head)Q.head.text=W>>8&1;if(Q.flags&512&&Q.wrap&4)y[0]=W&255,y[1]=W>>>8&255,Q.check=q0(Q.check,y,2,0);W=0,Z=0,Q.mode=Zq;case Zq:while(Z<32){if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}if(Q.head)Q.head.time=W;if(Q.flags&512&&Q.wrap&4)y[0]=W&255,y[1]=W>>>8&255,y[2]=W>>>16&255,y[3]=W>>>24&255,Q.check=q0(Q.check,y,4,0);W=0,Z=0,Q.mode=$q;case $q:while(Z<16){if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}if(Q.head)Q.head.xflags=W&255,Q.head.os=W>>8;if(Q.flags&512&&Q.wrap&4)y[0]=W&255,y[1]=W>>>8&255,Q.check=q0(Q.check,y,2,0);W=0,Z=0,Q.mode=zq;case zq:if(Q.flags&1024){while(Z<16){if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}if(Q.length=W,Q.head)Q.head.extra_len=W;if(Q.flags&512&&Q.wrap&4)y[0]=W&255,y[1]=W>>>8&255,Q.check=q0(Q.check,y,2,0);W=0,Z=0}else if(Q.head)Q.head.extra=null;Q.mode=Uq;case Uq:if(Q.flags&1024){if(H=Q.length,H>K)H=K;if(H){if(Q.head){if(F=Q.head.extra_len-Q.length,!Q.head.extra)Q.head.extra=new Uint8Array(Q.head.extra_len);Q.head.extra.set(G.subarray(Y,Y+H),F)}if(Q.flags&512&&Q.wrap&4)Q.check=q0(Q.check,G,H,Y);K-=H,Y+=H,Q.length-=H}if(Q.length)break J}Q.length=0,Q.mode=Hq;case Hq:if(Q.flags&2048){if(K===0)break J;H=0;do if(F=G[Y+H++],Q.head&&F&&Q.length<65536)Q.head.name+=String.fromCharCode(F);while(F&&H<K);if(Q.flags&512&&Q.wrap&4)Q.check=q0(Q.check,G,H,Y);if(K-=H,Y+=H,F)break J}else if(Q.head)Q.head.name=null;Q.length=0,Q.mode=jq;case jq:if(Q.flags&4096){if(K===0)break J;H=0;do if(F=G[Y+H++],Q.head&&F&&Q.length<65536)Q.head.comment+=String.fromCharCode(F);while(F&&H<K);if(Q.flags&512&&Q.wrap&4)Q.check=q0(Q.check,G,H,Y);if(K-=H,Y+=H,F)break J}else if(Q.head)Q.head.comment=null;Q.mode=Mq;case Mq:if(Q.flags&512){while(Z<16){if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}if(Q.wrap&4&&W!==(Q.check&65535)){J.msg="header crc mismatch",Q.mode=d;break}W=0,Z=0}if(Q.head)Q.head.hcrc=Q.flags>>9&1,Q.head.done=!0;J.adler=Q.check=0,Q.mode=E0;break;case Bq:while(Z<32){if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}J.adler=Q.check=Aq(W),W=0,Z=0,Q.mode=WJ;case WJ:if(Q.havedict===0)return J.next_out=V,J.avail_out=$,J.next_in=Y,J.avail_in=K,Q.hold=W,Q.bits=Z,IY;J.adler=Q.check=1,Q.mode=E0;case E0:if(q===SY||q===qJ)break J;case W9:if(Q.last){W>>>=Z&7,Z-=Z&7,Q.mode=$9;break}while(Z<3){if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}switch(Q.last=W&1,W>>>=1,Z-=1,W&3){case 0:Q.mode=Lq;break;case 1:if(hY(Q),Q.mode=GJ,q===qJ){W>>>=2,Z-=2;break J}break;case 2:Q.mode=kq;break;case 3:J.msg="invalid block type",Q.mode=d}W>>>=2,Z-=2;break;case Lq:W>>>=Z&7,Z-=Z&7;while(Z<32){if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}if((W&65535)!==(W>>>16^65535)){J.msg="invalid stored block lengths",Q.mode=d;break}if(Q.length=W&65535,W=0,Z=0,Q.mode=Z9,q===qJ)break J;case Z9:Q.mode=Pq;case Pq:if(H=Q.length,H){if(H>K)H=K;if(H>$)H=$;if(H===0)break J;X.set(G.subarray(Y,Y+H),V),K-=H,Y+=H,$-=H,V+=H,Q.length-=H;break}Q.mode=E0;break;case kq:while(Z<14){if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}if(Q.nlen=(W&31)+257,W>>>=5,Z-=5,Q.ndist=(W&31)+1,W>>>=5,Z-=5,Q.ncode=(W&15)+4,W>>>=4,Z-=4,Q.nlen>286||Q.ndist>30){J.msg="too many length or distance symbols",Q.mode=d;break}Q.have=0,Q.mode=Cq;case Cq:while(Q.have<Q.ncode){while(Z<3){if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}Q.lens[N[Q.have++]]=W&7,W>>>=3,Z-=3}while(Q.have<19)Q.lens[N[Q.have++]]=0;if(Q.lencode=Q.lendyn,Q.lenbits=7,A={bits:Q.lenbits},I=U1(FY,Q.lens,0,19,Q.lencode,0,Q.work,A),Q.lenbits=A.bits,I){J.msg="invalid code lengths set",Q.mode=d;break}Q.have=0,Q.mode=Oq;case Oq:while(Q.have<Q.nlen+Q.ndist){for(;;){if(M=Q.lencode[W&(1<<Q.lenbits)-1],P=M>>>24,O=M>>>16&255,w=M&65535,P<=Z)break;if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}if(w<16)W>>>=P,Z-=P,Q.lens[Q.have++]=w;else{if(w===16){T=P+2;while(Z<T){if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}if(W>>>=P,Z-=P,Q.have===0){J.msg="invalid bit length repeat",Q.mode=d;break}F=Q.lens[Q.have-1],H=3+(W&3),W>>>=2,Z-=2}else if(w===17){T=P+3;while(Z<T){if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}W>>>=P,Z-=P,F=0,H=3+(W&7),W>>>=3,Z-=3}else{T=P+7;while(Z<T){if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}W>>>=P,Z-=P,F=0,H=11+(W&127),W>>>=7,Z-=7}if(Q.have+H>Q.nlen+Q.ndist){J.msg="invalid bit length repeat",Q.mode=d;break}while(H--)Q.lens[Q.have++]=F}}if(Q.mode===d)break;if(Q.lens[256]===0){J.msg="invalid code -- missing end-of-block",Q.mode=d;break}if(Q.lenbits=9,A={bits:Q.lenbits},I=U1(Q6,Q.lens,0,Q.nlen,Q.lencode,0,Q.work,A),Q.lenbits=A.bits,I){J.msg="invalid literal/lengths set",Q.mode=d;break}if(Q.distbits=6,Q.distcode=Q.distdyn,A={bits:Q.distbits},I=U1(q6,Q.lens,Q.nlen,Q.ndist,Q.distcode,0,Q.work,A),Q.distbits=A.bits,I){J.msg="invalid distances set",Q.mode=d;break}if(Q.mode=GJ,q===qJ)break J;case GJ:Q.mode=XJ;case XJ:if(K>=6&&$>=258){if(J.next_out=V,J.avail_out=$,J.next_in=Y,J.avail_in=K,Q.hold=W,Q.bits=Z,kY(J,U),V=J.next_out,X=J.output,$=J.avail_out,Y=J.next_in,G=J.input,K=J.avail_in,W=Q.hold,Z=Q.bits,Q.mode===E0)Q.back=-1;break}Q.back=0;for(;;){if(M=Q.lencode[W&(1<<Q.lenbits)-1],P=M>>>24,O=M>>>16&255,w=M&65535,P<=Z)break;if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}if(O&&(O&240)===0){L=P,D=O,S=w;for(;;){if(M=Q.lencode[S+((W&(1<<L+D)-1)>>L)],P=M>>>24,O=M>>>16&255,w=M&65535,L+P<=Z)break;if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}W>>>=L,Z-=L,Q.back+=L}if(W>>>=P,Z-=P,Q.back+=P,Q.length=w,O===0){Q.mode=Sq;break}if(O&32){Q.back=-1,Q.mode=E0;break}if(O&64){J.msg="invalid literal/length code",Q.mode=d;break}Q.extra=O&15,Q.mode=wq;case wq:if(Q.extra){T=Q.extra;while(Z<T){if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}Q.length+=W&(1<<Q.extra)-1,W>>>=Q.extra,Z-=Q.extra,Q.back+=Q.extra}Q.was=Q.length,Q.mode=Nq;case Nq:for(;;){if(M=Q.distcode[W&(1<<Q.distbits)-1],P=M>>>24,O=M>>>16&255,w=M&65535,P<=Z)break;if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}if((O&240)===0){L=P,D=O,S=w;for(;;){if(M=Q.distcode[S+((W&(1<<L+D)-1)>>L)],P=M>>>24,O=M>>>16&255,w=M&65535,L+P<=Z)break;if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}W>>>=L,Z-=L,Q.back+=L}if(W>>>=P,Z-=P,Q.back+=P,O&64){J.msg="invalid distance code",Q.mode=d;break}Q.offset=w,Q.extra=O&15,Q.mode=xq;case xq:if(Q.extra){T=Q.extra;while(Z<T){if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}Q.offset+=W&(1<<Q.extra)-1,W>>>=Q.extra,Z-=Q.extra,Q.back+=Q.extra}if(Q.offset>Q.dmax){J.msg="invalid distance too far back",Q.mode=d;break}Q.mode=Fq;case Fq:if($===0)break J;if(H=U-$,Q.offset>H){if(H=Q.offset-H,H>Q.whave){if(Q.sane){J.msg="invalid distance too far back",Q.mode=d;break}}if(H>Q.wnext)H-=Q.wnext,j=Q.wsize-H;else j=Q.wnext-H;if(H>Q.length)H=Q.length;z=Q.window}else z=X,j=V-Q.offset,H=Q.length;if(H>$)H=$;$-=H,Q.length-=H;do X[V++]=z[j++];while(--H);if(Q.length===0)Q.mode=XJ;break;case Sq:if($===0)break J;X[V++]=Q.length,$--,Q.mode=XJ;break;case $9:if(Q.wrap){while(Z<32){if(K===0)break J;K--,W|=G[Y++]<<Z,Z+=8}if(U-=$,J.total_out+=U,Q.total+=U,Q.wrap&4&&U)J.adler=Q.check=Q.flags?q0(Q.check,X,U,V-U):L1(Q.check,X,U,V-U);if(U=$,Q.wrap&4&&(Q.flags?W:Aq(W))!==Q.check){J.msg="incorrect data check",Q.mode=d;break}W=0,Z=0}Q.mode=Dq;case Dq:if(Q.wrap&&Q.flags){while(Z<32){if(K===0)break J;K--,W+=G[Y++]<<Z,Z+=8}if(Q.wrap&4&&W!==(Q.total&4294967295)){J.msg="incorrect length check",Q.mode=d;break}W=0,Z=0}Q.mode=Iq;case Iq:I=DY;break J;case d:I=G6;break J;case Y6:return X6;case V6:default:return k0}if(J.next_out=V,J.avail_out=$,J.next_in=Y,J.avail_in=K,Q.hold=W,Q.bits=Z,Q.wsize||U!==J.avail_out&&Q.mode<d&&(Q.mode<$9||q!==Vq)){if(z6(J,J.output,J.next_out,U-J.avail_out));}if(B-=J.avail_in,U-=J.avail_out,J.total_in+=B,J.total_out+=U,Q.total+=U,Q.wrap&4&&U)J.adler=Q.check=Q.flags?q0(Q.check,X,U,J.next_out-U):L1(Q.check,X,U,J.next_out-U);if(J.data_type=Q.bits+(Q.last?64:0)+(Q.mode===E0?128:0)+(Q.mode===GJ||Q.mode===Z9?256:0),(B===0&&U===0||q===Vq)&&I===H8)I=AY;return I},_Y=(J)=>{if(M8(J))return k0;let q=J.state;if(q.window)q.window=null;return J.state=null,H8},bY=(J,q)=>{if(M8(J))return k0;const Q=J.state;if((Q.wrap&2)===0)return k0;return Q.head=q,q.done=!1,H8},uY=(J,q)=>{const Q=q.length;let G,X,Y;if(M8(J))return k0;if(G=J.state,G.wrap!==0&&G.mode!==WJ)return k0;if(G.mode===WJ){if(X=1,X=L1(X,q,Q,0),X!==G.check)return G6}if(Y=z6(J,q,Q,Q),Y)return G.mode=Y6,X6;return G.havedict=1,H8},cY=W6,pY=Z6,fY=K6,lY=EY,dY=$6,iY=mY,oY=_Y,nY=bY,rY=uY,aY="pako inflate (from Nodeca project)",m0={inflateReset:cY,inflateReset2:pY,inflateResetKeep:fY,inflateInit:lY,inflateInit2:dY,inflate:iY,inflateEnd:oY,inflateGetHeader:nY,inflateSetDictionary:rY,inflateInfo:aY},tY=sY,U6=Object.prototype.toString,{Z_NO_FLUSH:eY,Z_FINISH:JV,Z_OK:C1,Z_STREAM_END:H9,Z_NEED_DICT:j9,Z_STREAM_ERROR:QV,Z_DATA_ERROR:Tq,Z_MEM_ERROR:qV}=j8;x1.prototype.push=function(J,q){const Q=this.strm,G=this.options.chunkSize,X=this.options.dictionary;let Y,V,K;if(this.ended)return!1;if(q===~~q)V=q;else V=q===!0?JV:eY;if(U6.call(J)==="[object ArrayBuffer]")Q.input=new Uint8Array(J);else Q.input=J;Q.next_in=0,Q.avail_in=Q.input.length;for(;;){if(Q.avail_out===0)Q.output=new Uint8Array(G),Q.next_out=0,Q.avail_out=G;if(Y=m0.inflate(Q,V),Y===j9&&X){if(Y=m0.inflateSetDictionary(Q,X),Y===C1)Y=m0.inflate(Q,V);else if(Y===Tq)Y=j9}while(Q.avail_in>0&&Y===H9&&Q.state.wrap>0&&J[Q.next_in]!==0)m0.inflateReset(Q),Y=m0.inflate(Q,V);switch(Y){case QV:case Tq:case j9:case qV:return this.onEnd(Y),this.ended=!0,!1}if(K=Q.avail_out,Q.next_out){if(Q.avail_out===0||Y===H9)if(this.options.to==="string"){let $=k1.utf8border(Q.output,Q.next_out),W=Q.next_out-$,Z=k1.buf2string(Q.output,$);if(Q.next_out=W,Q.avail_out=G-W,W)Q.output.set(Q.output.subarray($,$+W),0);this.onData(Z)}else this.onData(Q.output.length===Q.next_out?Q.output:Q.output.subarray(0,Q.next_out))}if(Y===C1&&K===0)continue;if(Y===H9)return Y=m0.inflateEnd(this.strm),this.onEnd(Y),this.ended=!0,!0;if(Q.avail_in===0)break}return!0};x1.prototype.onData=function(J){this.chunks.push(J)};x1.prototype.onEnd=function(J){if(J===C1)if(this.options.to==="string")this.result=this.chunks.join("");else this.result=$J.flattenChunks(this.chunks);this.chunks=[],this.err=J,this.msg=this.strm.msg};var XV=x1,YV=R9,VV=GV,KV=R9,WV=j8,ZV={Inflate:XV,inflate:YV,inflateRaw:VV,ungzip:KV,constants:WV},{Deflate:$V,deflate:zV,deflateRaw:UV,gzip:HV}=LY,{Inflate:jV,inflate:MV,inflateRaw:BV,ungzip:LV}=ZV,PV=$V,kV=zV,CV=UV,OV=HV,wV=jV,NV=MV,xV=BV,FV=LV,SV=j8,T9={Deflate:PV,deflate:kV,deflateRaw:CV,gzip:OV,Inflate:wV,inflate:NV,inflateRaw:xV,ungzip:FV,constants:SV};var H6=function(J){if(!Number.isSafeInteger(J)||J<0)throw new Error("positive integer expected, got "+J)},DV=function(J){return J instanceof Uint8Array||ArrayBuffer.isView(J)&&J.constructor.name==="Uint8Array"},f8=function(J,...q){if(!DV(J))throw new Error("Uint8Array expected");if(q.length>0&&!q.includes(J.length))throw new Error("Uint8Array expected of length "+q+", got length="+J.length)},j6=function(J){if(typeof J!=="function"||typeof J.create!=="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");H6(J.outputLen),H6(J.blockLen)},l8=function(J,q=!0){if(J.destroyed)throw new Error("Hash instance has been destroyed");if(q&&J.finished)throw new Error("Hash#digest() has already been called")},M6=function(J,q){f8(J);const Q=q.outputLen;if(J.length<Q)throw new Error("digestInto() expects output buffer of length at least "+Q)};var B8=typeof globalThis==="object"&&("crypto"in globalThis)?globalThis.crypto:void 0;function UJ(J){return new DataView(J.buffer,J.byteOffset,J.byteLength)}function w0(J,q){return J<<32-q|J>>>q}function IV(J){if(typeof J!=="string")throw new Error("utf8ToBytes expected string, got "+typeof J);return new Uint8Array((new TextEncoder()).encode(J))}function F1(J){if(typeof J==="string")J=IV(J);return f8(J),J}function B6(...J){let q=0;for(let G=0;G<J.length;G++){const X=J[G];f8(X),q+=X.length}const Q=new Uint8Array(q);for(let G=0,X=0;G<J.length;G++){const Y=J[G];Q.set(Y,X),X+=Y.length}return Q}function L6(J){const q=(G)=>J().update(F1(G)).digest(),Q=J();return q.outputLen=Q.outputLen,q.blockLen=Q.blockLen,q.create=()=>J(),q}function HJ(J=32){if(B8&&typeof B8.getRandomValues==="function")return B8.getRandomValues(new Uint8Array(J));if(B8&&typeof B8.randomBytes==="function")return B8.randomBytes(J);throw new Error("crypto.getRandomValues must be defined")}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */class S1{clone(){return this._cloneInto()}}function AV(J,q,Q,G){if(typeof J.setBigUint64==="function")return J.setBigUint64(q,Q,G);const X=BigInt(32),Y=BigInt(4294967295),V=Number(Q>>X&Y),K=Number(Q&Y),$=G?4:0,W=G?0:4;J.setUint32(q+$,V,G),J.setUint32(q+W,K,G)}function P6(J,q,Q){return J&q^~J&Q}function k6(J,q,Q){return J&q^J&Q^q&Q}class v9 extends S1{constructor(J,q,Q,G){super();this.blockLen=J,this.outputLen=q,this.padOffset=Q,this.isLE=G,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(J),this.view=UJ(this.buffer)}update(J){l8(this);const{view:q,buffer:Q,blockLen:G}=this;J=F1(J);const X=J.length;for(let Y=0;Y<X;){const V=Math.min(G-this.pos,X-Y);if(V===G){const K=UJ(J);for(;G<=X-Y;Y+=G)this.process(K,Y);continue}if(Q.set(J.subarray(Y,Y+V),this.pos),this.pos+=V,Y+=V,this.pos===G)this.process(q,0),this.pos=0}return this.length+=J.length,this.roundClean(),this}digestInto(J){l8(this),M6(J,this),this.finished=!0;const{buffer:q,view:Q,blockLen:G,isLE:X}=this;let{pos:Y}=this;if(q[Y++]=128,this.buffer.subarray(Y).fill(0),this.padOffset>G-Y)this.process(Q,0),Y=0;for(let Z=Y;Z<G;Z++)q[Z]=0;AV(Q,G-8,BigInt(this.length*8),X),this.process(Q,0);const V=UJ(J),K=this.outputLen;if(K%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const $=K/4,W=this.get();if($>W.length)throw new Error("_sha2: outputLen bigger than state");for(let Z=0;Z<$;Z++)V.setUint32(4*Z,W[Z],X)}digest(){const{buffer:J,outputLen:q}=this;this.digestInto(J);const Q=J.slice(0,q);return this.destroy(),Q}_cloneInto(J){J||(J=new this.constructor),J.set(...this.get());const{blockLen:q,buffer:Q,length:G,finished:X,destroyed:Y,pos:V}=this;if(J.length=G,J.pos=V,J.finished=X,J.destroyed=Y,G%q)J.buffer.set(Q);return J}}var RV=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a0=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),s0=new Uint32Array(64);class C6 extends v9{constructor(){super(64,32,8,!1);this.A=a0[0]|0,this.B=a0[1]|0,this.C=a0[2]|0,this.D=a0[3]|0,this.E=a0[4]|0,this.F=a0[5]|0,this.G=a0[6]|0,this.H=a0[7]|0}get(){const{A:J,B:q,C:Q,D:G,E:X,F:Y,G:V,H:K}=this;return[J,q,Q,G,X,Y,V,K]}set(J,q,Q,G,X,Y,V,K){this.A=J|0,this.B=q|0,this.C=Q|0,this.D=G|0,this.E=X|0,this.F=Y|0,this.G=V|0,this.H=K|0}process(J,q){for(let Z=0;Z<16;Z++,q+=4)s0[Z]=J.getUint32(q,!1);for(let Z=16;Z<64;Z++){const B=s0[Z-15],U=s0[Z-2],H=w0(B,7)^w0(B,18)^B>>>3,j=w0(U,17)^w0(U,19)^U>>>10;s0[Z]=j+s0[Z-7]+H+s0[Z-16]|0}let{A:Q,B:G,C:X,D:Y,E:V,F:K,G:$,H:W}=this;for(let Z=0;Z<64;Z++){const B=w0(V,6)^w0(V,11)^w0(V,25),U=W+B+P6(V,K,$)+RV[Z]+s0[Z]|0,j=(w0(Q,2)^w0(Q,13)^w0(Q,22))+k6(Q,G,X)|0;W=$,$=K,K=V,V=Y+U|0,Y=X,X=G,G=Q,Q=U+j|0}Q=Q+this.A|0,G=G+this.B|0,X=X+this.C|0,Y=Y+this.D|0,V=V+this.E|0,K=K+this.F|0,$=$+this.G|0,W=W+this.H|0,this.set(Q,G,X,Y,V,K,$,W)}roundClean(){s0.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}var jJ=L6(()=>new C6);class g9 extends S1{constructor(J,q){super();this.finished=!1,this.destroyed=!1,j6(J);const Q=F1(q);if(this.iHash=J.create(),typeof this.iHash.update!=="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const G=this.blockLen,X=new Uint8Array(G);X.set(Q.length>G?J.create().update(Q).digest():Q);for(let Y=0;Y<X.length;Y++)X[Y]^=54;this.iHash.update(X),this.oHash=J.create();for(let Y=0;Y<X.length;Y++)X[Y]^=54^92;this.oHash.update(X),X.fill(0)}update(J){return l8(this),this.iHash.update(J),this}digestInto(J){l8(this),f8(J,this.outputLen),this.finished=!0,this.iHash.digestInto(J),this.oHash.update(J),this.oHash.digestInto(J),this.destroy()}digest(){const J=new Uint8Array(this.oHash.outputLen);return this.digestInto(J),J}_cloneInto(J){J||(J=Object.create(Object.getPrototypeOf(this),{}));const{oHash:q,iHash:Q,finished:G,destroyed:X,blockLen:Y,outputLen:V}=this;return J=J,J.finished=G,J.destroyed=X,J.blockLen=Y,J.outputLen=V,J.oHash=q._cloneInto(J.oHash),J.iHash=Q._cloneInto(J.iHash),J}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}var y9=(J,q,Q)=>new g9(J,q).update(Q).digest();y9.create=(J,q)=>new g9(J,q);var u9={};hQ(u9,{validateObject:()=>{{return J8}},utf8ToBytes:()=>{{return EV}},numberToVarBytesBE:()=>{{return gV}},numberToHexUnpadded:()=>{{return k8}},numberToBytesLE:()=>{{return PJ}},numberToBytesBE:()=>{{return N0}},notImplemented:()=>{{return bV}},memoized:()=>{{return kJ}},isBytes:()=>{{return t0}},inRange:()=>{{return e0}},hexToNumber:()=>{{return m9}},hexToBytes:()=>{{return C8}},equalBytes:()=>{{return yV}},ensureBytes:()=>{{return e}},createHmacDrbg:()=>{{return b9}},concatBytes:()=>{{return b0}},bytesToNumberLE:()=>{{return LJ}},bytesToNumberBE:()=>{{return C0}},bytesToHex:()=>{{return P8}},bitSet:()=>{{return mV}},bitMask:()=>{{return D1}},bitLen:()=>{{return _9}},bitGet:()=>{{return hV}},abytes:()=>{{return d8}},abool:()=>{{return L8}},aInRange:()=>{{return R0}}});function t0(J){return J instanceof Uint8Array||ArrayBuffer.isView(J)&&J.constructor.name==="Uint8Array"}function d8(J){if(!t0(J))throw new Error("Uint8Array expected")}function L8(J,q){if(typeof q!=="boolean")throw new Error(J+" boolean expected, got "+q)}function P8(J){d8(J);let q="";for(let Q=0;Q<J.length;Q++)q+=vV[J[Q]];return q}function k8(J){const q=J.toString(16);return q.length&1?"0"+q:q}function m9(J){if(typeof J!=="string")throw new Error("hex string expected, got "+typeof J);return J===""?MJ:BigInt("0x"+J)}var O6=function(J){if(J>=_0._0&&J<=_0._9)return J-_0._0;if(J>=_0.A&&J<=_0.F)return J-(_0.A-10);if(J>=_0.a&&J<=_0.f)return J-(_0.a-10);return};function C8(J){if(typeof J!=="string")throw new Error("hex string expected, got "+typeof J);const q=J.length,Q=q/2;if(q%2)throw new Error("hex string expected, got unpadded hex of length "+q);const G=new Uint8Array(Q);for(let X=0,Y=0;X<Q;X++,Y+=2){const V=O6(J.charCodeAt(Y)),K=O6(J.charCodeAt(Y+1));if(V===void 0||K===void 0){const $=J[Y]+J[Y+1];throw new Error('hex string expected, got non-hex character "'+$+'" at index '+Y)}G[X]=V*16+K}return G}function C0(J){return m9(P8(J))}function LJ(J){return d8(J),m9(P8(Uint8Array.from(J).reverse()))}function N0(J,q){return C8(J.toString(16).padStart(q*2,"0"))}function PJ(J,q){return N0(J,q).reverse()}function gV(J){return C8(k8(J))}function e(J,q,Q){let G;if(typeof q==="string")try{G=C8(q)}catch(Y){throw new Error(J+" must be hex string or Uint8Array, cause: "+Y)}else if(t0(q))G=Uint8Array.from(q);else throw new Error(J+" must be hex string or Uint8Array");const X=G.length;if(typeof Q==="number"&&X!==Q)throw new Error(J+" of length "+Q+" expected, got "+X);return G}function b0(...J){let q=0;for(let G=0;G<J.length;G++){const X=J[G];d8(X),q+=X.length}const Q=new Uint8Array(q);for(let G=0,X=0;G<J.length;G++){const Y=J[G];Q.set(Y,X),X+=Y.length}return Q}function yV(J,q){if(J.length!==q.length)return!1;let Q=0;for(let G=0;G<J.length;G++)Q|=J[G]^q[G];return Q===0}function EV(J){if(typeof J!=="string")throw new Error("string expected");return new Uint8Array((new TextEncoder()).encode(J))}function e0(J,q,Q){return E9(J)&&E9(q)&&E9(Q)&&q<=J&&J<Q}function R0(J,q,Q,G){if(!e0(q,Q,G))throw new Error("expected valid "+J+": "+Q+" <= n < "+G+", got "+q)}function _9(J){let q;for(q=0;J>MJ;J>>=BJ,q+=1);return q}function hV(J,q){return J>>BigInt(q)&BJ}function mV(J,q,Q){return J|(Q?BJ:MJ)<<BigInt(q)}function b9(J,q,Q){if(typeof J!=="number"||J<2)throw new Error("hashLen must be a number");if(typeof q!=="number"||q<2)throw new Error("qByteLen must be a number");if(typeof Q!=="function")throw new Error("hmacFn must be a function");let G=h9(J),X=h9(J),Y=0;const V=()=>{G.fill(1),X.fill(0),Y=0},K=(...B)=>Q(X,G,...B),$=(B=h9())=>{if(X=K(w6([0]),B),G=K(),B.length===0)return;X=K(w6([1]),B),G=K()},W=()=>{if(Y++>=1000)throw new Error("drbg: tried 1000 values");let B=0;const U=[];while(B<q){G=K();const H=G.slice();U.push(H),B+=G.length}return b0(...U)};return(B,U)=>{V(),$(B);let H=void 0;while(!(H=U(W())))$();return V(),H}}function J8(J,q,Q={}){const G=(X,Y,V)=>{const K=_V[Y];if(typeof K!=="function")throw new Error("invalid validator function");const $=J[X];if(V&&$===void 0)return;if(!K($,J))throw new Error("param "+String(X)+" is invalid. Expected "+Y+", got "+$)};for(let[X,Y]of Object.entries(q))G(X,Y,!1);for(let[X,Y]of Object.entries(Q))G(X,Y,!0);return J}function kJ(J){const q=new WeakMap;return(Q,...G)=>{const X=q.get(Q);if(X!==void 0)return X;const Y=J(Q,...G);return q.set(Q,Y),Y}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var MJ=BigInt(0),BJ=BigInt(1),TV=BigInt(2),vV=Array.from({length:256},(J,q)=>q.toString(16).padStart(2,"0")),_0={_0:48,_9:57,A:65,F:70,a:97,f:102},E9=(J)=>typeof J==="bigint"&&MJ<=J,D1=(J)=>(TV<<BigInt(J-1))-BJ,h9=(J)=>new Uint8Array(J),w6=(J)=>Uint8Array.from(J),_V={bigint:(J)=>typeof J==="bigint",function:(J)=>typeof J==="function",boolean:(J)=>typeof J==="boolean",string:(J)=>typeof J==="string",stringOrUint8Array:(J)=>typeof J==="string"||t0(J),isSafeInteger:(J)=>Number.isSafeInteger(J),array:(J)=>Array.isArray(J),field:(J,q)=>q.Fp.isValid(J),hash:(J)=>typeof J==="function"&&Number.isSafeInteger(J.outputLen)},bV=()=>{throw new Error("not implemented")};function J0(J,q){const Q=J%q;return Q>=Q0?Q:q+Q}function fV(J,q,Q){if(q<Q0)throw new Error("invalid exponent, negatives unsupported");if(Q<=Q0)throw new Error("invalid modulus");if(Q===r)return Q0;let G=r;while(q>Q0){if(q&r)G=G*J%Q;J=J*J%Q,q>>=r}return G}function B0(J,q,Q){let G=J;while(q-- >Q0)G*=G,G%=Q;return G}function CJ(J,q){if(J===Q0)throw new Error("invert: expected non-zero number");if(q<=Q0)throw new Error("invert: expected positive modulus, got "+q);let Q=J0(J,q),G=q,X=Q0,Y=r,V=r,K=Q0;while(Q!==Q0){const W=G/Q,Z=G%Q,B=X-V*W,U=Y-K*W;G=Q,Q=Z,X=V,Y=K,V=B,K=U}if(G!==r)throw new Error("invert: does not exist");return J0(X,q)}function lV(J){const q=(J-r)/O8;let Q,G,X;for(Q=J-r,G=0;Q%O8===Q0;Q/=O8,G++);for(X=O8;X<J&&fV(X,q,J)!==J-r;X++)if(X>1000)throw new Error("Cannot find square root: likely non-prime P");if(G===1){const V=(J+r)/c9;return function K($,W){const Z=$.pow(W,V);if(!$.eql($.sqr(Z),W))throw new Error("Cannot find square root");return Z}}const Y=(Q+r)/O8;return function V(K,$){if(K.pow($,q)===K.neg(K.ONE))throw new Error("Cannot find square root");let W=G,Z=K.pow(K.mul(K.ONE,X),Q),B=K.pow($,Y),U=K.pow($,Q);while(!K.eql(U,K.ONE)){if(K.eql(U,K.ZERO))return K.ZERO;let H=1;for(let z=K.sqr(U);H<W;H++){if(K.eql(z,K.ONE))break;z=K.sqr(z)}const j=K.pow(Z,r<<BigInt(W-H-1));Z=K.sqr(j),B=K.mul(B,j),U=K.mul(U,Z),W=H}return B}}function dV(J){if(J%c9===uV){const q=(J+r)/c9;return function Q(G,X){const Y=G.pow(X,q);if(!G.eql(G.sqr(Y),X))throw new Error("Cannot find square root");return Y}}if(J%x6===N6){const q=(J-N6)/x6;return function Q(G,X){const Y=G.mul(X,O8),V=G.pow(Y,q),K=G.mul(X,V),$=G.mul(G.mul(K,O8),V),W=G.mul(K,G.sub($,G.ONE));if(!G.eql(G.sqr(W),X))throw new Error("Cannot find square root");return W}}if(J%pV===cV);return lV(J)}function p9(J){const q={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},Q=iV.reduce((G,X)=>{return G[X]="function",G},q);return J8(J,Q)}function oV(J,q,Q){if(Q<Q0)throw new Error("invalid exponent, negatives unsupported");if(Q===Q0)return J.ONE;if(Q===r)return q;let G=J.ONE,X=q;while(Q>Q0){if(Q&r)G=J.mul(G,X);X=J.sqr(X),Q>>=r}return G}function nV(J,q){const Q=new Array(q.length),G=q.reduce((Y,V,K)=>{if(J.is0(V))return Y;return Q[K]=Y,J.mul(Y,V)},J.ONE),X=J.inv(G);return q.reduceRight((Y,V,K)=>{if(J.is0(V))return Y;return Q[K]=J.mul(Y,Q[K]),J.mul(Y,V)},X),Q}function f9(J,q){const Q=q!==void 0?q:J.toString(2).length,G=Math.ceil(Q/8);return{nBitLength:Q,nByteLength:G}}function OJ(J,q,Q=!1,G={}){if(J<=Q0)throw new Error("invalid field: expected ORDER > 0, got "+J);const{nBitLength:X,nByteLength:Y}=f9(J,q);if(Y>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let V;const K=Object.freeze({ORDER:J,isLE:Q,BITS:X,BYTES:Y,MASK:D1(X),ZERO:Q0,ONE:r,create:($)=>J0($,J),isValid:($)=>{if(typeof $!=="bigint")throw new Error("invalid field element: expected bigint, got "+typeof $);return Q0<=$&&$<J},is0:($)=>$===Q0,isOdd:($)=>($&r)===r,neg:($)=>J0(-$,J),eql:($,W)=>$===W,sqr:($)=>J0($*$,J),add:($,W)=>J0($+W,J),sub:($,W)=>J0($-W,J),mul:($,W)=>J0($*W,J),pow:($,W)=>oV(K,$,W),div:($,W)=>J0($*CJ(W,J),J),sqrN:($)=>$*$,addN:($,W)=>$+W,subN:($,W)=>$-W,mulN:($,W)=>$*W,inv:($)=>CJ($,J),sqrt:G.sqrt||(($)=>{if(!V)V=dV(J);return V(K,$)}),invertBatch:($)=>nV(K,$),cmov:($,W,Z)=>Z?W:$,toBytes:($)=>Q?PJ($,Y):N0($,Y),fromBytes:($)=>{if($.length!==Y)throw new Error("Field.fromBytes: expected "+Y+" bytes, got "+$.length);return Q?LJ($):C0($)}});return Object.freeze(K)}function F6(J){if(typeof J!=="bigint")throw new Error("field order must be bigint");const q=J.toString(2).length;return Math.ceil(q/8)}function l9(J){const q=F6(J);return q+Math.ceil(q/2)}function S6(J,q,Q=!1){const G=J.length,X=F6(q),Y=l9(q);if(G<16||G<Y||G>1024)throw new Error("expected "+Y+"-1024 bytes of input, got "+G);const V=Q?LJ(J):C0(J),K=J0(V,q-r)+r;return Q?PJ(K,X):N0(K,X)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var Q0=BigInt(0),r=BigInt(1),O8=BigInt(2),uV=BigInt(3),c9=BigInt(4),N6=BigInt(5),x6=BigInt(8),cV=BigInt(9),pV=BigInt(16);var iV=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];var d9=function(J,q){const Q=q.negate();return J?Q:q},I6=function(J,q){if(!Number.isSafeInteger(J)||J<=0||J>q)throw new Error("invalid window size, expected [1.."+q+"], got W="+J)},i9=function(J,q){I6(J,q);const Q=Math.ceil(q/J)+1,G=2**(J-1);return{windows:Q,windowSize:G}},rV=function(J,q){if(!Array.isArray(J))throw new Error("array expected");J.forEach((Q,G)=>{if(!(Q instanceof q))throw new Error("invalid point at index "+G)})},aV=function(J,q){if(!Array.isArray(J))throw new Error("array of scalars expected");J.forEach((Q,G)=>{if(!q.isValid(Q))throw new Error("invalid scalar at index "+G)})},n9=function(J){return A6.get(J)||1};function R6(J,q){return{constTimeNegate:d9,hasPrecomputes(Q){return n9(Q)!==1},unsafeLadder(Q,G,X=J.ZERO){let Y=Q;while(G>D6){if(G&wJ)X=X.add(Y);Y=Y.double(),G>>=wJ}return X},precomputeWindow(Q,G){const{windows:X,windowSize:Y}=i9(G,q),V=[];let K=Q,$=K;for(let W=0;W<X;W++){$=K,V.push($);for(let Z=1;Z<Y;Z++)$=$.add(K),V.push($);K=$.double()}return V},wNAF(Q,G,X){const{windows:Y,windowSize:V}=i9(Q,q);let{ZERO:K,BASE:$}=J;const W=BigInt(2**Q-1),Z=2**Q,B=BigInt(Q);for(let U=0;U<Y;U++){const H=U*V;let j=Number(X&W);if(X>>=B,j>V)j-=Z,X+=wJ;const z=H,M=H+Math.abs(j)-1,P=U%2!==0,O=j<0;if(j===0)$=$.add(d9(P,G[z]));else K=K.add(d9(O,G[M]))}return{p:K,f:$}},wNAFUnsafe(Q,G,X,Y=J.ZERO){const{windows:V,windowSize:K}=i9(Q,q),$=BigInt(2**Q-1),W=2**Q,Z=BigInt(Q);for(let B=0;B<V;B++){const U=B*K;if(X===D6)break;let H=Number(X&$);if(X>>=Z,H>K)H-=W,X+=wJ;if(H===0)continue;let j=G[U+Math.abs(H)-1];if(H<0)j=j.negate();Y=Y.add(j)}return Y},getPrecomputes(Q,G,X){let Y=o9.get(G);if(!Y){if(Y=this.precomputeWindow(G,Q),Q!==1)o9.set(G,X(Y))}return Y},wNAFCached(Q,G,X){const Y=n9(Q);return this.wNAF(Y,this.getPrecomputes(Y,Q,X),G)},wNAFCachedUnsafe(Q,G,X,Y){const V=n9(Q);if(V===1)return this.unsafeLadder(Q,G,Y);return this.wNAFUnsafe(V,this.getPrecomputes(V,Q,X),G,Y)},setWindowSize(Q,G){I6(G,q),A6.set(Q,G),o9.delete(Q)}}}function T6(J,q,Q,G){if(rV(Q,J),aV(G,q),Q.length!==G.length)throw new Error("arrays of points and scalars must have equal length");const X=J.ZERO,Y=_9(BigInt(Q.length)),V=Y>12?Y-3:Y>4?Y-2:Y?2:1,K=(1<<V)-1,$=new Array(K+1).fill(X),W=Math.floor((q.BITS-1)/V)*V;let Z=X;for(let B=W;B>=0;B-=V){$.fill(X);for(let H=0;H<G.length;H++){const j=G[H],z=Number(j>>BigInt(B)&BigInt(K));$[z]=$[z].add(Q[H])}let U=X;for(let H=$.length-1,j=X;H>0;H--)j=j.add($[H]),U=U.add(j);if(Z=Z.add(U),B!==0)for(let H=0;H<V;H++)Z=Z.double()}return Z}function r9(J){return p9(J.Fp),J8(J,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...f9(J.n,J.nBitLength),...J,...{p:J.Fp.ORDER}})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var D6=BigInt(0),wJ=BigInt(1),o9=new WeakMap,A6=new WeakMap;var v6=function(J){if(J.lowS!==void 0)L8("lowS",J.lowS);if(J.prehash!==void 0)L8("prehash",J.prehash)},sV=function(J){const q=r9(J);J8(q,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:Q,Fp:G,a:X}=q;if(Q){if(!G.eql(X,G.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof Q!=="object"||typeof Q.beta!=="bigint"||typeof Q.splitScalar!=="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...q})};function JK(J){const q=sV(J),{Fp:Q}=q,G=OJ(q.n,q.nBitLength),X=q.toBytes||((z,M,P)=>{const O=M.toAffine();return b0(Uint8Array.from([4]),Q.toBytes(O.x),Q.toBytes(O.y))}),Y=q.fromBytes||((z)=>{const M=z.subarray(1),P=Q.fromBytes(M.subarray(0,Q.BYTES)),O=Q.fromBytes(M.subarray(Q.BYTES,2*Q.BYTES));return{x:P,y:O}});function V(z){const{a:M,b:P}=q,O=Q.sqr(z),w=Q.mul(O,z);return Q.add(Q.add(w,Q.mul(z,M)),P)}if(!Q.eql(Q.sqr(q.Gy),V(q.Gx)))throw new Error("bad generator point: equation left != right");function K(z){return e0(z,G0,q.n)}function $(z){const{allowedPrivateKeyLengths:M,nByteLength:P,wrapPrivateKey:O,n:w}=q;if(M&&typeof z!=="bigint"){if(t0(z))z=P8(z);if(typeof z!=="string"||!M.includes(z.length))throw new Error("invalid private key");z=z.padStart(P*2,"0")}let L;try{L=typeof z==="bigint"?z:C0(e("private key",z,P))}catch(D){throw new Error("invalid private key, expected hex or "+P+" bytes, got "+typeof z)}if(O)L=J0(L,w);return R0("private key",L,G0,w),L}function W(z){if(!(z instanceof U))throw new Error("ProjectivePoint expected")}const Z=kJ((z,M)=>{const{px:P,py:O,pz:w}=z;if(Q.eql(w,Q.ONE))return{x:P,y:O};const L=z.is0();if(M==null)M=L?Q.ONE:Q.inv(w);const D=Q.mul(P,M),S=Q.mul(O,M),F=Q.mul(w,M);if(L)return{x:Q.ZERO,y:Q.ZERO};if(!Q.eql(F,Q.ONE))throw new Error("invZ was invalid");return{x:D,y:S}}),B=kJ((z)=>{if(z.is0()){if(q.allowInfinityPoint&&!Q.is0(z.py))return;throw new Error("bad point: ZERO")}const{x:M,y:P}=z.toAffine();if(!Q.isValid(M)||!Q.isValid(P))throw new Error("bad point: x or y not FE");const O=Q.sqr(P),w=V(M);if(!Q.eql(O,w))throw new Error("bad point: equation left != right");if(!z.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class U{constructor(z,M,P){if(this.px=z,this.py=M,this.pz=P,z==null||!Q.isValid(z))throw new Error("x required");if(M==null||!Q.isValid(M))throw new Error("y required");if(P==null||!Q.isValid(P))throw new Error("z required");Object.freeze(this)}static fromAffine(z){const{x:M,y:P}=z||{};if(!z||!Q.isValid(M)||!Q.isValid(P))throw new Error("invalid affine point");if(z instanceof U)throw new Error("projective point not allowed");const O=(w)=>Q.eql(w,Q.ZERO);if(O(M)&&O(P))return U.ZERO;return new U(M,P,Q.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(z){const M=Q.invertBatch(z.map((P)=>P.pz));return z.map((P,O)=>P.toAffine(M[O])).map(U.fromAffine)}static fromHex(z){const M=U.fromAffine(Y(e("pointHex",z)));return M.assertValidity(),M}static fromPrivateKey(z){return U.BASE.multiply($(z))}static msm(z,M){return T6(U,G,z,M)}_setWindowSize(z){j.setWindowSize(this,z)}assertValidity(){B(this)}hasEvenY(){const{y:z}=this.toAffine();if(Q.isOdd)return!Q.isOdd(z);throw new Error("Field doesn't support isOdd")}equals(z){W(z);const{px:M,py:P,pz:O}=this,{px:w,py:L,pz:D}=z,S=Q.eql(Q.mul(M,D),Q.mul(w,O)),F=Q.eql(Q.mul(P,D),Q.mul(L,O));return S&&F}negate(){return new U(this.px,Q.neg(this.py),this.pz)}double(){const{a:z,b:M}=q,P=Q.mul(M,g6),{px:O,py:w,pz:L}=this;let{ZERO:D,ZERO:S,ZERO:F}=Q,I=Q.mul(O,O),y=Q.mul(w,w),A=Q.mul(L,L),T=Q.mul(O,w);return T=Q.add(T,T),F=Q.mul(O,L),F=Q.add(F,F),D=Q.mul(z,F),S=Q.mul(P,A),S=Q.add(D,S),D=Q.sub(y,S),S=Q.add(y,S),S=Q.mul(D,S),D=Q.mul(T,D),F=Q.mul(P,F),A=Q.mul(z,A),T=Q.sub(I,A),T=Q.mul(z,T),T=Q.add(T,F),F=Q.add(I,I),I=Q.add(F,I),I=Q.add(I,A),I=Q.mul(I,T),S=Q.add(S,I),A=Q.mul(w,L),A=Q.add(A,A),I=Q.mul(A,T),D=Q.sub(D,I),F=Q.mul(A,y),F=Q.add(F,F),F=Q.add(F,F),new U(D,S,F)}add(z){W(z);const{px:M,py:P,pz:O}=this,{px:w,py:L,pz:D}=z;let{ZERO:S,ZERO:F,ZERO:I}=Q;const y=q.a,A=Q.mul(q.b,g6);let T=Q.mul(M,w),N=Q.mul(P,L),R=Q.mul(O,D),k=Q.add(M,P),x=Q.add(w,L);k=Q.mul(k,x),x=Q.add(T,N),k=Q.sub(k,x),x=Q.add(M,O);let C=Q.add(w,D);return x=Q.mul(x,C),C=Q.add(T,R),x=Q.sub(x,C),C=Q.add(P,O),S=Q.add(L,D),C=Q.mul(C,S),S=Q.add(N,R),C=Q.sub(C,S),I=Q.mul(y,x),S=Q.mul(A,R),I=Q.add(S,I),S=Q.sub(N,I),I=Q.add(N,I),F=Q.mul(S,I),N=Q.add(T,T),N=Q.add(N,T),R=Q.mul(y,R),x=Q.mul(A,x),N=Q.add(N,R),R=Q.sub(T,R),R=Q.mul(y,R),x=Q.add(x,R),T=Q.mul(N,x),F=Q.add(F,T),T=Q.mul(C,x),S=Q.mul(k,S),S=Q.sub(S,T),T=Q.mul(k,N),I=Q.mul(C,I),I=Q.add(I,T),new U(S,F,I)}subtract(z){return this.add(z.negate())}is0(){return this.equals(U.ZERO)}wNAF(z){return j.wNAFCached(this,z,U.normalizeZ)}multiplyUnsafe(z){const{endo:M,n:P}=q;R0("scalar",z,c0,P);const O=U.ZERO;if(z===c0)return O;if(this.is0()||z===G0)return this;if(!M||j.hasPrecomputes(this))return j.wNAFCachedUnsafe(this,z,U.normalizeZ);let{k1neg:w,k1:L,k2neg:D,k2:S}=M.splitScalar(z),F=O,I=O,y=this;while(L>c0||S>c0){if(L&G0)F=F.add(y);if(S&G0)I=I.add(y);y=y.double(),L>>=G0,S>>=G0}if(w)F=F.negate();if(D)I=I.negate();return I=new U(Q.mul(I.px,M.beta),I.py,I.pz),F.add(I)}multiply(z){const{endo:M,n:P}=q;R0("scalar",z,G0,P);let O,w;if(M){const{k1neg:L,k1:D,k2neg:S,k2:F}=M.splitScalar(z);let{p:I,f:y}=this.wNAF(D),{p:A,f:T}=this.wNAF(F);I=j.constTimeNegate(L,I),A=j.constTimeNegate(S,A),A=new U(Q.mul(A.px,M.beta),A.py,A.pz),O=I.add(A),w=y.add(T)}else{const{p:L,f:D}=this.wNAF(z);O=L,w=D}return U.normalizeZ([O,w])[0]}multiplyAndAddUnsafe(z,M,P){const O=U.BASE,w=(D,S)=>S===c0||S===G0||!D.equals(O)?D.multiplyUnsafe(S):D.multiply(S),L=w(this,M).add(w(z,P));return L.is0()?void 0:L}toAffine(z){return Z(this,z)}isTorsionFree(){const{h:z,isTorsionFree:M}=q;if(z===G0)return!0;if(M)return M(U,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:z,clearCofactor:M}=q;if(z===G0)return this;if(M)return M(U,this);return this.multiplyUnsafe(q.h)}toRawBytes(z=!0){return L8("isCompressed",z),this.assertValidity(),X(U,this,z)}toHex(z=!0){return L8("isCompressed",z),P8(this.toRawBytes(z))}}U.BASE=new U(q.Gx,q.Gy,Q.ONE),U.ZERO=new U(Q.ZERO,Q.ONE,Q.ZERO);const H=q.nBitLength,j=R6(U,q.endo?Math.ceil(H/2):H);return{CURVE:q,ProjectivePoint:U,normPrivateKeyToScalar:$,weierstrassEquation:V,isWithinCurveOrder:K}}var QK=function(J){const q=r9(J);return J8(q,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...q})};function E6(J){const q=QK(J),{Fp:Q,n:G}=q,X=Q.BYTES+1,Y=2*Q.BYTES+1;function V(k){return J0(k,G)}function K(k){return CJ(k,G)}const{ProjectivePoint:$,normPrivateKeyToScalar:W,weierstrassEquation:Z,isWithinCurveOrder:B}=JK({...q,toBytes(k,x,C){const v=x.toAffine(),g=Q.toBytes(v.x),E=b0;if(L8("isCompressed",C),C)return E(Uint8Array.from([x.hasEvenY()?2:3]),g);else return E(Uint8Array.from([4]),g,Q.toBytes(v.y))},fromBytes(k){const x=k.length,C=k[0],v=k.subarray(1);if(x===X&&(C===2||C===3)){const g=C0(v);if(!e0(g,G0,Q.ORDER))throw new Error("Point is not on curve");const E=Z(g);let c;try{c=Q.sqrt(E)}catch(s){const b=s instanceof Error?": "+s.message:"";throw new Error("Point is not on curve"+b)}const f=(c&G0)===G0;if((C&1)===1!==f)c=Q.neg(c);return{x:g,y:c}}else if(x===Y&&C===4){const g=Q.fromBytes(v.subarray(0,Q.BYTES)),E=Q.fromBytes(v.subarray(Q.BYTES,2*Q.BYTES));return{x:g,y:E}}else{const g=X,E=Y;throw new Error("invalid Point, expected length of "+g+", or uncompressed "+E+", got "+x)}}}),U=(k)=>P8(N0(k,q.nByteLength));function H(k){const x=G>>G0;return k>x}function j(k){return H(k)?V(-k):k}const z=(k,x,C)=>C0(k.slice(x,C));class M{constructor(k,x,C){this.r=k,this.s=x,this.recovery=C,this.assertValidity()}static fromCompact(k){const x=q.nByteLength;return k=e("compactSignature",k,x*2),new M(z(k,0,x),z(k,x,2*x))}static fromDER(k){const{r:x,s:C}=u0.toSig(e("DER",k));return new M(x,C)}assertValidity(){R0("r",this.r,G0,G),R0("s",this.s,G0,G)}addRecoveryBit(k){return new M(this.r,this.s,k)}recoverPublicKey(k){const{r:x,s:C,recovery:v}=this,g=S(e("msgHash",k));if(v==null||![0,1,2,3].includes(v))throw new Error("recovery id invalid");const E=v===2||v===3?x+q.n:x;if(E>=Q.ORDER)throw new Error("recovery id 2 or 3 invalid");const c=(v&1)===0?"02":"03",f=$.fromHex(c+U(E)),h=K(E),s=V(-g*h),b=V(C*h),a=$.BASE.multiplyAndAddUnsafe(f,s,b);if(!a)throw new Error("point at infinify");return a.assertValidity(),a}hasHighS(){return H(this.s)}normalizeS(){return this.hasHighS()?new M(this.r,V(-this.s),this.recovery):this}toDERRawBytes(){return C8(this.toDERHex())}toDERHex(){return u0.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return C8(this.toCompactHex())}toCompactHex(){return U(this.r)+U(this.s)}}const P={isValidPrivateKey(k){try{return W(k),!0}catch(x){return!1}},normPrivateKeyToScalar:W,randomPrivateKey:()=>{const k=l9(q.n);return S6(q.randomBytes(k),q.n)},precompute(k=8,x=$.BASE){return x._setWindowSize(k),x.multiply(BigInt(3)),x}};function O(k,x=!0){return $.fromPrivateKey(k).toRawBytes(x)}function w(k){const x=t0(k),C=typeof k==="string",v=(x||C)&&k.length;if(x)return v===X||v===Y;if(C)return v===2*X||v===2*Y;if(k instanceof $)return!0;return!1}function L(k,x,C=!0){if(w(k))throw new Error("first arg must be private key");if(!w(x))throw new Error("second arg must be public key");return $.fromHex(x).multiply(W(k)).toRawBytes(C)}const D=q.bits2int||function(k){if(k.length>8192)throw new Error("input is too large");const x=C0(k),C=k.length*8-q.nBitLength;return C>0?x>>BigInt(C):x},S=q.bits2int_modN||function(k){return V(D(k))},F=D1(q.nBitLength);function I(k){return R0("num < 2^"+q.nBitLength,k,c0,F),N0(k,q.nByteLength)}function y(k,x,C=A){if(["recovered","canonical"].some((V0)=>(V0 in C)))throw new Error("sign() legacy options not supported");const{hash:v,randomBytes:g}=q;let{lowS:E,prehash:c,extraEntropy:f}=C;if(E==null)E=!0;if(k=e("msgHash",k),v6(C),c)k=e("prehashed msgHash",v(k));const h=S(k),s=W(x),b=[I(s),I(h)];if(f!=null&&f!==!1){const V0=f===!0?g(Q.BYTES):f;b.push(e("extraEntropy",V0))}const a=b0(...b),p=h;function i(V0){const t=D(V0);if(!B(t))return;const U0=K(t),H0=$.BASE.multiply(t).toAffine(),X0=V(H0.x);if(X0===c0)return;const V8=V(U0*V(p+X0*s));if(V8===c0)return;let y0=(H0.x===X0?0:2)|Number(H0.y&G0),vQ=V8;if(E&&H(V8))vQ=j(V8),y0^=1;return new M(X0,vQ,y0)}return{seed:a,k2sig:i}}const A={lowS:q.lowS,prehash:!1},T={lowS:q.lowS,prehash:!1};function N(k,x,C=A){const{seed:v,k2sig:g}=y(k,x,C),E=q;return b9(E.hash.outputLen,E.nByteLength,E.hmac)(v,g)}$.BASE._setWindowSize(8);function R(k,x,C,v=T){const g=k;x=e("msgHash",x),C=e("publicKey",C);const{lowS:E,prehash:c,format:f}=v;if(v6(v),("strict"in v))throw new Error("options.strict was renamed to lowS");if(f!==void 0&&f!=="compact"&&f!=="der")throw new Error("format must be compact or der");const h=typeof g==="string"||t0(g),s=!h&&!f&&typeof g==="object"&&g!==null&&typeof g.r==="bigint"&&typeof g.s==="bigint";if(!h&&!s)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let b=void 0,a;try{if(s)b=new M(g.r,g.s);if(h){try{if(f!=="compact")b=M.fromDER(g)}catch(y0){if(!(y0 instanceof u0.Err))throw y0}if(!b&&f!=="der")b=M.fromCompact(g)}a=$.fromHex(C)}catch(y0){return!1}if(!b)return!1;if(E&&b.hasHighS())return!1;if(c)x=q.hash(x);const{r:p,s:i}=b,V0=S(x),t=K(i),U0=V(V0*t),H0=V(p*t),X0=$.BASE.multiplyAndAddUnsafe(a,U0,H0)?.toAffine();if(!X0)return!1;return V(X0.x)===p}return{CURVE:q,getPublicKey:O,getSharedSecret:L,sign:N,verify:R,ProjectivePoint:$,Signature:M,utils:P}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var{bytesToNumberBE:tV,hexToBytes:eV}=u9;class y6 extends Error{constructor(J=""){super(J)}}var u0={Err:y6,_tlv:{encode:(J,q)=>{const{Err:Q}=u0;if(J<0||J>256)throw new Q("tlv.encode: wrong tag");if(q.length&1)throw new Q("tlv.encode: unpadded data");const G=q.length/2,X=k8(G);if(X.length/2&128)throw new Q("tlv.encode: long form length too big");const Y=G>127?k8(X.length/2|128):"";return k8(J)+Y+X+q},decode(J,q){const{Err:Q}=u0;let G=0;if(J<0||J>256)throw new Q("tlv.encode: wrong tag");if(q.length<2||q[G++]!==J)throw new Q("tlv.decode: wrong tlv");const X=q[G++],Y=!!(X&128);let V=0;if(!Y)V=X;else{const $=X&127;if(!$)throw new Q("tlv.decode(long): indefinite length not supported");if($>4)throw new Q("tlv.decode(long): byte length is too big");const W=q.subarray(G,G+$);if(W.length!==$)throw new Q("tlv.decode: length bytes not complete");if(W[0]===0)throw new Q("tlv.decode(long): zero leftmost byte");for(let Z of W)V=V<<8|Z;if(G+=$,V<128)throw new Q("tlv.decode(long): not minimal encoding")}const K=q.subarray(G,G+V);if(K.length!==V)throw new Q("tlv.decode: wrong value length");return{v:K,l:q.subarray(G+V)}}},_int:{encode(J){const{Err:q}=u0;if(J<c0)throw new q("integer: negative integers are not allowed");let Q=k8(J);if(Number.parseInt(Q[0],16)&8)Q="00"+Q;if(Q.length&1)throw new q("unexpected DER parsing assertion: unpadded hex");return Q},decode(J){const{Err:q}=u0;if(J[0]&128)throw new q("invalid signature integer: negative");if(J[0]===0&&!(J[1]&128))throw new q("invalid signature integer: unnecessary leading zero");return tV(J)}},toSig(J){const{Err:q,_int:Q,_tlv:G}=u0,X=typeof J==="string"?eV(J):J;d8(X);const{v:Y,l:V}=G.decode(48,X);if(V.length)throw new q("invalid signature: left bytes after parsing");const{v:K,l:$}=G.decode(2,Y),{v:W,l:Z}=G.decode(2,$);if(Z.length)throw new q("invalid signature: left bytes after parsing");return{r:Q.decode(K),s:Q.decode(W)}},hexFromSig(J){const{_tlv:q,_int:Q}=u0,G=q.encode(2,Q.encode(J.r)),X=q.encode(2,Q.encode(J.s)),Y=G+X;return q.encode(48,Y)}},c0=BigInt(0),G0=BigInt(1),j$=BigInt(2),g6=BigInt(3),M$=BigInt(4);function qK(J){return{hash:J,hmac:(q,...Q)=>y9(J,q,B6(...Q)),randomBytes:HJ}}function h6(J,q){const Q=(G)=>E6({...J,...qK(G)});return{...Q(q),create:Q}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var b6=function(J){const q=R1,Q=BigInt(3),G=BigInt(6),X=BigInt(11),Y=BigInt(22),V=BigInt(23),K=BigInt(44),$=BigInt(88),W=J*J*J%q,Z=W*W*J%q,B=B0(Z,Q,q)*Z%q,U=B0(B,Q,q)*Z%q,H=B0(U,xJ,q)*W%q,j=B0(H,X,q)*H%q,z=B0(j,Y,q)*j%q,M=B0(z,K,q)*z%q,P=B0(M,$,q)*M%q,O=B0(P,K,q)*z%q,w=B0(O,Q,q)*Z%q,L=B0(w,V,q)*j%q,D=B0(L,G,q)*W%q,S=B0(D,xJ,q);if(!s9.eql(s9.sqr(S),J))throw new Error("Cannot find square root");return S},FJ=function(J,...q){let Q=_6[J];if(Q===void 0){const G=jJ(Uint8Array.from(J,(X)=>X.charCodeAt(0)));Q=b0(G,G),_6[J]=Q}return jJ(b0(Q,...q))},e9=function(J){let q=JQ.utils.normPrivateKeyToScalar(J),Q=qQ.fromPrivateKey(q);return{scalar:Q.hasEvenY()?q:A1(-q),bytes:QQ(Q)}},c6=function(J){R0("x",J,I1,R1);const q=a9(J*J),Q=a9(q*J+BigInt(7));let G=b6(Q);if(G%xJ!==u6)G=a9(-G);const X=new qQ(J,G,I1);return X.assertValidity(),X},p6=function(...J){return A1(i8(FJ("BIP0340/challenge",...J)))},XK=function(J){return e9(J).bytes},YK=function(J,q,Q=HJ(32)){const G=e("message",J),{bytes:X,scalar:Y}=e9(q),V=e("auxRand",Q,32),K=t9(Y^i8(FJ("BIP0340/aux",V))),$=FJ("BIP0340/nonce",K,X,G),W=A1(i8($));if(W===u6)throw new Error("sign failed: k is zero");const{bytes:Z,scalar:B}=e9(W),U=p6(Z,X,G),H=new Uint8Array(64);if(H.set(Z,0),H.set(t9(A1(B+U*Y)),32),!f6(H,G,X))throw new Error("sign: Invalid signature produced");return H},f6=function(J,q,Q){const G=e("signature",J,64),X=e("message",q),Y=e("publicKey",Q,32);try{const V=c6(i8(Y)),K=i8(G.subarray(0,32));if(!e0(K,I1,R1))return!1;const $=i8(G.subarray(32,64));if(!e0($,I1,NJ))return!1;const W=p6(t9(K),QQ(V),X),Z=GK(V,$,A1(-W));if(!Z||!Z.hasEvenY()||Z.toAffine().x!==K)return!1;return!0}catch(V){return!1}};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var R1=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),NJ=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),I1=BigInt(1),xJ=BigInt(2),m6=(J,q)=>(J+q/xJ)/q,s9=OJ(R1,void 0,void 0,{sqrt:b6}),JQ=h6({a:BigInt(0),b:BigInt(7),Fp:s9,n:NJ,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:(J)=>{const q=NJ,Q=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),G=-I1*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),X=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),Y=Q,V=BigInt("0x100000000000000000000000000000000"),K=m6(Y*J,q),$=m6(-G*J,q);let W=J0(J-K*Q-$*X,q),Z=J0(-K*G-$*Y,q);const B=W>V,U=Z>V;if(B)W=q-W;if(U)Z=q-Z;if(W>V||Z>V)throw new Error("splitScalar: Endomorphism failed, k="+J);return{k1neg:B,k1:W,k2neg:U,k2:Z}}}},jJ),u6=BigInt(0),_6={},QQ=(J)=>J.toRawBytes(!0).slice(1),t9=(J)=>N0(J,32),a9=(J)=>J0(J,R1),A1=(J)=>J0(J,NJ),qQ=JQ.ProjectivePoint,GK=(J,q,Q)=>qQ.BASE.multiplyAndAddUnsafe(J,q,Q),i8=C0,SJ=(()=>({getPublicKey:XK,sign:YK,verify:f6,utils:{randomPrivateKey:JQ.utils.randomPrivateKey,lift_x:c6,pointToBytes:QQ,numberToBytesBE:N0,bytesToNumberBE:C0,taggedHash:FJ,mod:J0}}))();var{floor:GQ,random:VK,sin:KK}=Math,w8="Trystero",Q8=(J,q)=>Array(J).fill().map(q);var IJ=(J)=>Q8(J,()=>"0123456789AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz"[GQ(VK()*"0123456789AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz".length)]).join(""),T0=IJ(20),q8=Promise.all.bind(Promise),T1=typeof window!=="undefined",{entries:AJ,fromEntries:XQ,keys:l6}=Object,p0=()=>{},x0=(J)=>new Error(`Trystero: ${J}`),WK=new TextEncoder,ZK=new TextDecoder,v0=(J)=>WK.encode(J),o8=(J)=>ZK.decode(J),RJ=(J)=>J.reduce((q,Q)=>q+Q.toString(16).padStart(2,"0"),""),v1=(...J)=>J.join("@"),$K=(J,q)=>{const Q=[...J],G=()=>{const Y=KK(q++)*1e4;return Y-GQ(Y)};let X=Q.length;while(X){const Y=GQ(G()*X--);[Q[X],Q[Y]]=[Q[Y],Q[X]]}return Q},d6=(J,q,Q,G)=>{return(J.relayUrls||(G?$K(q,YQ(J.appId)):q)).slice(0,J.relayUrls?J.relayUrls.length:J.relayRedundancy||Q)},O0=JSON.stringify,N8=JSON.parse,YQ=(J,q=Number.MAX_SAFE_INTEGER)=>J.split("").reduce((Q,G)=>Q+G.charCodeAt(0),0)%q;var DJ={},i6=(J,q)=>{const Q={},G=()=>{const X=new WebSocket(J);X.onclose=()=>{DJ[J]??=3333,setTimeout(G,DJ[J]),DJ[J]*=2},X.onmessage=(Y)=>q(Y.data),Q.socket=X,Q.url=X.url,Q.ready=new Promise((Y)=>X.onopen=()=>{Y(Q),DJ[J]=3333}),Q.send=(Y)=>{if(X.readyState===1)X.send(Y)}};return G(),Q},o6=(J)=>()=>XQ(AJ(J).map(([q,Q])=>[q,Q.socket]));var KQ="AES-GCM",VQ={},zK=(J)=>btoa(String.fromCharCode.apply(null,new Uint8Array(J))),UK=(J)=>{const q=atob(J);return new Uint8Array(q.length).map((Q,G)=>q.charCodeAt(G)).buffer},g1=async(J)=>{if(VQ[J])return VQ[J];const q=Array.from(new Uint8Array(await crypto.subtle.digest("SHA-1",v0(J)))).map((Q)=>Q.toString(36)).join("");return VQ[J]=q,q},n6=async(J,q,Q)=>crypto.subtle.importKey("raw",await crypto.subtle.digest({name:"SHA-256"},v0(`${J}:${q}:${Q}`)),{name:KQ},!1,["encrypt","decrypt"]),r6="$",a6=",",s6=async(J,q)=>{const Q=crypto.getRandomValues(new Uint8Array(16));return Q.join(a6)+r6+zK(await crypto.subtle.encrypt({name:KQ,iv:Q},await J,v0(q)))},t6=async(J,q)=>{const[Q,G]=q.split(r6);return o8(await crypto.subtle.decrypt({name:KQ,iv:new Uint8Array(Q.split(a6))},await J,UK(G)))};var vG=i1(X5(),1);var l=typeof window!=="undefined"?window:self,yJ=l.RTCPeerConnection||l.mozRTCPeerConnection||l.webkitRTCPeerConnection,Y5=l.RTCSessionDescription||l.mozRTCSessionDescription||l.webkitRTCSessionDescription,V5=l.RTCIceCandidate||l.mozRTCIceCandidate||l.webkitRTCIceCandidate,g$=l.RTCIceTransport,y$=l.RTCDataChannel,E$=l.RTCSctpTransport,h$=l.RTCDtlsTransport,m$=l.RTCCertificate,_$=l.MediaStream,b$=l.MediaStreamTrack,u$=l.MediaStreamTrackEvent,c$=l.RTCPeerConnectionIceEvent,p$=l.RTCDataChannelEvent,f$=l.RTCTrackEvent,l$=l.RTCError,d$=l.RTCErrorEvent,i$=l.RTCRtpTransceiver,o$=l.RTCRtpReceiver,n$=l.RTCRtpSender;var gG=i1(NG(),1),n=i1(FQ(),1);var DG=[],SG=[];for(let J=0;J<256;J++)if(DG[J]="0123456789abcdef"[J>>4&15]+"0123456789abcdef"[J&15],J<16)if(J<10)SG[48+J]=J;else SG[87+J]=J;var dJ=(J)=>{const q=J.length;let Q="",G=0;while(G<q)Q+=DG[J[G++]];return Q};var IG="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o4=typeof Uint8Array==="undefined"?[]:new Uint8Array(256);for(p1=0;p1<IG.length;p1++)o4[IG.charCodeAt(p1)]=p1;var p1;var n4=new TextEncoder,RG=(J)=>n4.encode(J);var AG=typeof window!=="undefined"?window:self,SQ=AG.crypto||AG.msCrypto||{},Bz=SQ.subtle||SQ.webkitSubtle;var DQ=(J)=>{const q=new Uint8Array(J);return SQ.getRandomValues(q)};var TG=function(J){return J.replace(/a=ice-options:trickle\s\n/g,"")},t4=function(J){console.warn(J)};/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var r4=vG.default("simple-peer"),IQ=65536,a4=5000,s4=5000;class T8 extends gG.Duplex{_pc;constructor(J){J=Object.assign({allowHalfOpen:!1},J);super(J);if(this.__objectMode=!!J.objectMode,this._id=dJ(DQ(4)).slice(0,7),this._debug("new peer %o",J),this.channelName=J.initiator?J.channelName||dJ(DQ(20)):null,this.initiator=J.initiator||!1,this.channelConfig=J.channelConfig||T8.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},T8.config,J.config),this.offerOptions=J.offerOptions||{},this.answerOptions=J.answerOptions||{},this.sdpTransform=J.sdpTransform||((q)=>q),this.trickle=J.trickle!==void 0?J.trickle:!0,this.allowHalfTrickle=J.allowHalfTrickle!==void 0?J.allowHalfTrickle:!1,this.iceCompleteTimeout=J.iceCompleteTimeout||a4,this._destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,!yJ)if(typeof window==="undefined")throw n.default(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT");else throw n.default(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new yJ(this.config)}catch(q){this.__destroy(n.default(q,"ERR_PC_CONSTRUCTOR"));return}if(this._isReactNativeWebrtc=typeof this._pc._peerConnectionId==="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=(q)=>{this._onIceCandidate(q)},typeof this._pc.peerIdentity==="object")this._pc.peerIdentity.catch((q)=>{this.__destroy(n.default(q,"ERR_PC_PEER_IDENTITY"))});if(this.initiator||this.channelNegotiated)this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)});else this._pc.ondatachannel=(q)=>{this._setupData(q)};this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(J){if(this._destroying)return;if(this.destroyed)throw n.default(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof J==="string")try{J=JSON.parse(J)}catch(q){J={}}if(this._debug("signal()"),J.renegotiate&&this.initiator)this._debug("got request to renegotiate"),this._needsNegotiation();if(J.transceiverRequest&&this.initiator)this._debug("got request for transceiver"),this.addTransceiver(J.transceiverRequest.kind,J.transceiverRequest.init);if(J.candidate)if(this._pc.remoteDescription&&this._pc.remoteDescription.type)this._addIceCandidate(J.candidate);else this._pendingCandidates.push(J.candidate);if(J.sdp)this._pc.setRemoteDescription(new Y5(J)).then(()=>{if(this.destroyed)return;if(this._pendingCandidates.forEach((q)=>{this._addIceCandidate(q)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer")this._createAnswer()}).catch((q)=>{this.__destroy(n.default(q,"ERR_SET_REMOTE_DESCRIPTION"))});if(!J.sdp&&!J.candidate&&!J.renegotiate&&!J.transceiverRequest)this.__destroy(n.default(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}_addIceCandidate(J){const q=new V5(J);this._pc.addIceCandidate(q).catch((Q)=>{if(!q.address||q.address.endsWith(".local"))t4("Ignoring unsupported ICE candidate.");else this.__destroy(n.default(Q,"ERR_ADD_ICE_CANDIDATE"))})}send(J){if(this._destroying)return;if(this.destroyed)throw n.default(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(J)}_needsNegotiation(){if(this._debug("_needsNegotiation"),this._batchedNegotiation)return;this._batchedNegotiation=!0,queueMicrotask(()=>{if(this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation)this._debug("starting batched negotiation"),this.negotiate();else this._debug("non-initiator initial negotiation request discarded");this._firstNegotiation=!1})}negotiate(){if(this._destroying)return;if(this.destroyed)throw n.default(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");if(this.initiator)if(this._isNegotiating)this._queuedNegotiation=!0,this._debug("already negotiating, queueing");else this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0);else if(this._isNegotiating)this._queuedNegotiation=!0,this._debug("already negotiating, queueing");else this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0});this._isNegotiating=!0}_final(J){if(!this._readableState.ended)this.push(null);J(null)}__destroy(J){this.end(),this._destroy(()=>{},J)}_destroy(J,q){if(this.destroyed||this._destroying)return;this._destroying=!0,this._debug("destroying (error: %s)",q&&(q.message||q)),setTimeout(()=>{if(this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound)this.removeListener("finish",this._onFinishBound);if(this._onFinishBound=null,this._channel){try{this._channel.close()}catch(Q){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(Q){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}if(this._pc=null,this._channel=null,q)this.emit("error",q);J()},0)}_setupData(J){if(!J.channel)return this.__destroy(n.default(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));if(this._channel=J.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold==="number")this._channel.bufferedAmountLowThreshold=IQ;this.channelName=this._channel.label,this._channel.onmessage=(Q)=>{this._onChannelMessage(Q)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=(Q)=>{const G=Q.error instanceof Error?Q.error:new Error(`Datachannel error: ${Q.message} ${Q.filename}:${Q.lineno}:${Q.colno}`);this.__destroy(n.default(G,"ERR_DATA_CHANNEL"))};let q=!1;this._closingInterval=setInterval(()=>{if(this._channel&&this._channel.readyState==="closing"){if(q)this._onChannelClose();q=!0}else q=!1},s4)}_write(J,q){if(this.destroyed)return q(n.default(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(J)}catch(Q){return this.__destroy(n.default(Q,"ERR_DATA_CHANNEL"))}if(this._channel.bufferedAmount>IQ)this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=q;else q(null)}else this._debug("write before connect"),this._chunk=J,this._cb=q}_onFinish(){if(this.destroyed)return;const J=()=>{setTimeout(()=>this.__destroy(),1000)};if(this._connected)J();else this.once("connect",J)}_startIceCompleteTimeout(){if(this.destroyed)return;if(this._iceCompleteTimer)return;this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{if(!this._iceComplete)this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete")},this.iceCompleteTimeout)}_createOffer(){if(this.destroyed)return;this._pc.createOffer(this.offerOptions).then((J)=>{if(this.destroyed)return;if(!this.trickle&&!this.allowHalfTrickle)J.sdp=TG(J.sdp);J.sdp=this.sdpTransform(J.sdp);const q=()=>{if(this.destroyed)return;const X=this._pc.localDescription||J;this._debug("signal"),this.emit("signal",{type:X.type,sdp:X.sdp})},Q=()=>{if(this._debug("createOffer success"),this.destroyed)return;if(this.trickle||this._iceComplete)q();else this.once("_iceComplete",q)},G=(X)=>{this.__destroy(n.default(X,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(J).then(Q).catch(G)}).catch((J)=>{this.__destroy(n.default(J,"ERR_CREATE_OFFER"))})}_createAnswer(){if(this.destroyed)return;this._pc.createAnswer(this.answerOptions).then((J)=>{if(this.destroyed)return;if(!this.trickle&&!this.allowHalfTrickle)J.sdp=TG(J.sdp);J.sdp=this.sdpTransform(J.sdp);const q=()=>{if(this.destroyed)return;const X=this._pc.localDescription||J;if(this._debug("signal"),this.emit("signal",{type:X.type,sdp:X.sdp}),!this.initiator)this._requestMissingTransceivers?.()},Q=()=>{if(this.destroyed)return;if(this.trickle||this._iceComplete)q();else this.once("_iceComplete",q)},G=(X)=>{this.__destroy(n.default(X,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(J).then(Q).catch(G)}).catch((J)=>{this.__destroy(n.default(J,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){if(this.destroyed||this._destroying)return;if(this._pc.connectionState==="failed")this.__destroy(n.default(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const J=this._pc.iceConnectionState,q=this._pc.iceGatheringState;if(this._debug("iceStateChange (connection: %s) (gathering: %s)",J,q),this.emit("iceStateChange",J,q),J==="connected"||J==="completed")this._pcReady=!0,this._maybeReady();if(J==="failed")this.__destroy(n.default(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE"));if(J==="closed")this.__destroy(n.default(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(J){const q=(Q)=>{if(Object.prototype.toString.call(Q.values)==="[object Array]")Q.values.forEach((G)=>{Object.assign(Q,G)});return Q};if(this._pc.getStats.length===0||this._isReactNativeWebrtc)this._pc.getStats().then((Q)=>{const G=[];Q.forEach((X)=>{G.push(q(X))}),J(null,G)},(Q)=>J(Q));else if(this._pc.getStats.length>0)this._pc.getStats((Q)=>{if(this.destroyed)return;const G=[];Q.result().forEach((X)=>{const Y={};X.names().forEach((V)=>{Y[V]=X.stat(V)}),Y.id=X.id,Y.type=X.type,Y.timestamp=X.timestamp,G.push(q(Y))}),J(null,G)},(Q)=>J(Q));else J(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const J=()=>{if(this.destroyed||this._destroying)return;this.getStats((q,Q)=>{if(this.destroyed||this._destroying)return;if(q)Q=[];const G={},X={},Y={};let V=!1;Q.forEach(($)=>{if($.type==="remotecandidate"||$.type==="remote-candidate")G[$.id]=$;if($.type==="localcandidate"||$.type==="local-candidate")X[$.id]=$;if($.type==="candidatepair"||$.type==="candidate-pair")Y[$.id]=$});const K=($)=>{V=!0;let W=X[$.localCandidateId];if(W&&(W.ip||W.address))this.localAddress=W.ip||W.address,this.localPort=Number(W.port);else if(W&&W.ipAddress)this.localAddress=W.ipAddress,this.localPort=Number(W.portNumber);else if(typeof $.googLocalAddress==="string")W=$.googLocalAddress.split(":"),this.localAddress=W[0],this.localPort=Number(W[1]);if(this.localAddress)this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4";let Z=G[$.remoteCandidateId];if(Z&&(Z.ip||Z.address))this.remoteAddress=Z.ip||Z.address,this.remotePort=Number(Z.port);else if(Z&&Z.ipAddress)this.remoteAddress=Z.ipAddress,this.remotePort=Number(Z.portNumber);else if(typeof $.googRemoteAddress==="string")Z=$.googRemoteAddress.split(":"),this.remoteAddress=Z[0],this.remotePort=Number(Z[1]);if(this.remoteAddress)this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4";this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(Q.forEach(($)=>{if($.type==="transport"&&$.selectedCandidatePairId)K(Y[$.selectedCandidatePairId]);if($.type==="googCandidatePair"&&$.googActiveConnection==="true"||($.type==="candidatepair"||$.type==="candidate-pair")&&$.selected)K($)}),!V&&(!Object.keys(Y).length||Object.keys(X).length)){setTimeout(J,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(W){return this.__destroy(n.default(W,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const $=this._cb;this._cb=null,$(null)}if(typeof this._channel.bufferedAmountLowThreshold!=="number"){if(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref)this._interval.unref()}this._debug("connect"),this.emit("connect")})};J()}_onInterval(){if(!this._cb||!this._channel||this._channel.bufferedAmount>IQ)return;this._onChannelBufferedAmountLow()}_onSignalingStateChange(){if(this.destroyed)return;if(this._pc.signalingState==="stable")if(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach((J)=>{this._pc.removeTrack(J),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation)this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation();else this._debug("negotiated"),this.emit("negotiated");this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState)}_onIceCandidate(J){if(this.destroyed)return;if(J.candidate&&this.trickle)this.emit("signal",{type:"candidate",candidate:{candidate:J.candidate.candidate,sdpMLineIndex:J.candidate.sdpMLineIndex,sdpMid:J.candidate.sdpMid}});else if(!J.candidate&&!this._iceComplete)this._iceComplete=!0,this.emit("_iceComplete");if(J.candidate)this._startIceCompleteTimeout()}_onChannelMessage(J){if(this.destroyed)return;let q=J.data;if(q instanceof ArrayBuffer)q=new Uint8Array(q);else if(this.__objectMode===!1)q=RG(q);this.push(q)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const J=this._cb;this._cb=null,J(null)}_onChannelOpen(){if(this._connected||this.destroyed)return;this._debug("on channel open"),this._channelReady=!0,this._maybeReady()}_onChannelClose(){if(this.destroyed)return;this._debug("on channel close"),this.__destroy()}_debug(){const J=[].slice.call(arguments);J[0]="["+this._id+"] "+J[0],r4.apply(null,J)}}T8.WEBRTC_SUPPORT=!!yJ;T8.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"};T8.channelConfig={};var yG=T8;var z0=i1(FQ(),1);/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */class EG extends yG{constructor(J={}){super(J);if(!this._pc)return;if(this.streams=J.streams||(J.stream?[J.stream]:[]),this._senderMap=new Map,this.streams)this.streams.forEach((q)=>{this.addStream(q)});this._pc.ontrack=(q)=>{this._onTrack(q)}}addTransceiver(J,q){if(this._destroying)return;if(this.destroyed)throw z0.default(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(J,q),this._needsNegotiation()}catch(Q){this.__destroy(z0.default(Q,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:J,init:q}})}addStream(J){if(this._destroying)return;if(this.destroyed)throw z0.default(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),J.getTracks().forEach((q)=>{this.addTrack(q,J)})}addTrack(J,q){if(this._destroying)return;if(this.destroyed)throw z0.default(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const Q=this._senderMap.get(J)||new Map;let G=Q.get(q);if(!G)G=this._pc.addTrack(J,q),Q.set(q,G),this._senderMap.set(J,Q),this._needsNegotiation();else if(G.removed)throw z0.default(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED");else throw z0.default(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(J,q,Q){if(this._destroying)return;if(this.destroyed)throw z0.default(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const G=this._senderMap.get(J),X=G?G.get(Q):null;if(!X)throw z0.default(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");if(q)this._senderMap.set(q,G);if(X.replaceTrack!=null)X.replaceTrack(q);else this.__destroy(z0.default(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(J,q){if(this._destroying)return;if(this.destroyed)throw z0.default(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const Q=this._senderMap.get(J),G=Q?Q.get(q):null;if(!G)throw z0.default(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{G.removed=!0,this._pc.removeTrack(G)}catch(X){if(X.name==="NS_ERROR_UNEXPECTED")this._sendersAwaitingStable.push(G);else this.__destroy(z0.default(X,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(J){if(this._destroying)return;if(this.destroyed)throw z0.default(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),J.getTracks().forEach((q)=>{this.removeTrack(q,J)})}_requestMissingTransceivers(){if(this._pc.getTransceivers)this._pc.getTransceivers().forEach((J)=>{if(!J.mid&&J.sender.track&&!J.requested)J.requested=!0,this.addTransceiver(J.sender.track.kind)})}_onTrack(J){if(this.destroyed)return;J.streams.forEach((q)=>{if(this._debug("on track"),this.emit("track",J.track,q),this._remoteTracks.push({track:J.track,stream:q}),this._remoteStreams.some((Q)=>{return Q.id===q.id}))return;this._remoteStreams.push(q),queueMicrotask(()=>{this._debug("on stream"),this.emit("stream",q)})})}}var hG=EG;var mG="data",_G="signal",AQ=(J,q)=>{const Q=new hG({...{iceServers:[{urls:e4}]},...q,initiator:J,trickle:!1}),G=(Y)=>X.push(Y);let X=[];return Q.on(mG,G),{id:Q._id,created:Date.now(),connection:Q._pc,get channel(){return Q._channel},get isDead(){return Q.destroyed},signal:(Y)=>new Promise((V)=>{if(!J)Q.on(_G,V);Q.signal(Y)}),sendData:(Y)=>Q.send(Y),destroy:()=>Q.destroy(),setHandlers:(Y)=>Object.entries(Y).forEach(([V,K])=>Q.on(V,K)),offerPromise:J?new Promise((Y)=>Q.on(_G,Y)):Promise.resolve(),addStream:(Y)=>Q.addStream(Y),removeStream:(Y)=>Q.removeStream(Y),addTrack:(Y,V)=>Q.addTrack(Y,V),removeTrack:(Y,V)=>Q.removeTrack(Y,V),replaceTrack:(Y,V,K)=>Q.replaceTrack(Y,V,K),drainEarlyData:(Y)=>{Q.off(mG,G),X.forEach(Y),X=null}}},e4=[...Q8(5,(J,q)=>`stun:stun${q||""}.l.google.com:19302`),"stun:global.stun.twilio.com:3478"];var JZ=Object.getPrototypeOf(Uint8Array),oJ=12,uG=0,nJ=uG+oJ,rJ=nJ+1,f1=rJ+1,l1=f1+1,v8=16384-l1,iJ=255,bG="bufferedamountlow",q1=(J)=>"@_"+J,cG=(J,q,Q)=>{const G={},X={},Y={},V={},K={},$={},W={},Z={onPeerJoin:p0,onPeerLeave:p0,onPeerStream:p0,onPeerTrack:p0},B=(N,R)=>(N?Array.isArray(N)?N:[N]:l6(G)).flatMap((k)=>{const x=G[k];if(!x)return console.warn(`${w8}: no peer with id ${k} found`),[];return R(k,x)}),U=(N)=>{if(!G[N])return;delete G[N],delete V[N],delete K[N],Z.onPeerLeave(N),q(N)},H=(N)=>{if(X[N])return Y[N];if(!N)throw x0("action type argument is required");const R=v0(N);if(R.byteLength>oJ)throw x0(`action type string "${N}" (${R.byteLength}b) exceeds `+`byte limit (${oJ}). Hint: choose a shorter name.`);const k=new Uint8Array(oJ);k.set(R);let x=0;return X[N]={onComplete:p0,onProgress:p0,setOnComplete:(C)=>X[N]={...X[N],onComplete:C},setOnProgress:(C)=>X[N]={...X[N],onProgress:C},send:async(C,v,g,E)=>{if(g&&typeof g!=="object")throw x0("action meta argument must be an object");const c=typeof C;if(c==="undefined")throw x0("action data cannot be undefined");const f=c!=="string",h=C instanceof Blob,s=h||C instanceof ArrayBuffer||C instanceof JZ;if(g&&!s)throw x0("action meta argument can only be used with binary data");const b=s?new Uint8Array(h?await C.arrayBuffer():C):v0(f?O0(C):C),a=g?v0(O0(g)):null,p=Math.ceil(b.byteLength/v8)+(g?1:0)||1,i=Q8(p,(V0,t)=>{const U0=t===p-1,H0=g&&t===0,X0=new Uint8Array(l1+(H0?a.byteLength:U0?b.byteLength-v8*(p-(g?2:1)):v8));return X0.set(k),X0.set([x],nJ),X0.set([U0|H0<<1|s<<2|f<<3],rJ),X0.set([Math.round((t+1)/p*iJ)],f1),X0.set(g?H0?a:b.subarray((t-1)*v8,t*v8):b.subarray(t*v8,(t+1)*v8),l1),X0});return x=x+1&iJ,q8(B(v,async(V0,t)=>{const{channel:U0}=t;let H0=0;while(H0<p){const X0=i[H0];if(U0.bufferedAmount>U0.bufferedAmountLowThreshold)await new Promise((V8)=>{const y0=()=>{U0.removeEventListener(bG,y0),V8()};U0.addEventListener(bG,y0)});if(!G[V0])break;t.sendData(X0),H0++,E?.(X0[f1]/iJ,V0,g)}}))}},Y[N]||=[X[N].send,X[N].setOnComplete,X[N].setOnProgress]},j=(N,R)=>{const k=new Uint8Array(R),x=o8(k.subarray(uG,nJ)).replaceAll("\0",""),[C]=k.subarray(nJ,rJ),[v]=k.subarray(rJ,f1),[g]=k.subarray(f1,l1),E=k.subarray(l1),c=!!(v&1),f=!!(v&1<<1),h=!!(v&1<<2),s=!!(v&1<<3);if(!X[x]){console.warn(`${w8}: received message with unregistered type (${x})`);return}V[N]||={},V[N][x]||={};const b=V[N][x][C]||={chunks:[]};if(f)b.meta=N8(o8(E));else b.chunks.push(E);if(X[x].onProgress(g/iJ,N,b.meta),!c)return;const a=new Uint8Array(b.chunks.reduce((p,i)=>p+i.byteLength,0));if(b.chunks.reduce((p,i)=>{return a.set(i,p),p+i.byteLength},0),delete V[N][x][C],h)X[x].onComplete(a,N,b.meta);else{const p=o8(a);X[x].onComplete(s?N8(p):p,N)}},z=async()=>{await A(""),await new Promise((N)=>setTimeout(N,99)),AJ(G).forEach(([N,R])=>{R.destroy(),delete G[N]}),Q()},[M,P]=H(q1("ping")),[O,w]=H(q1("pong")),[L,D]=H(q1("signal")),[S,F]=H(q1("stream")),[I,y]=H(q1("track")),[A,T]=H(q1("leave"));if(J((N,R)=>{if(G[R])return;G[R]=N,N.setHandlers({data:(k)=>j(R,k),stream:(k)=>{Z.onPeerStream(k,R,$[R]),delete $[R]},track:(k,x)=>{Z.onPeerTrack(k,x,R,W[R]),delete W[R]},signal:(k)=>L(k,R),close:()=>U(R),error:()=>U(R)}),Z.onPeerJoin(R),N.drainEarlyData?.((k)=>j(R,k))}),P((N,R)=>O("",R)),w((N,R)=>{K[R]?.(),delete K[R]}),D((N,R)=>G[R]?.signal(N)),F((N,R)=>$[R]=N),y((N,R)=>W[R]=N),T((N,R)=>U(R)),T1)addEventListener("beforeunload",z);return{makeAction:H,leave:z,ping:async(N)=>{if(!N)throw x0("ping() must be called with target peer ID");const R=Date.now();return M("",N),await new Promise((k)=>K[N]=k),Date.now()-R},getPeers:()=>XQ(AJ(G).map(([N,R])=>[N,R.connection])),addStream:(N,R,k)=>B(R,async(x,C)=>{if(k)await S(k,x);C.addStream(N)}),removeStream:(N,R)=>B(R,(k,x)=>x.removeStream(N)),addTrack:(N,R,k,x)=>B(k,async(C,v)=>{if(x)await I(x,C);v.addTrack(N,R)}),removeTrack:(N,R,k)=>B(k,(x,C)=>C.removeTrack(N,R)),replaceTrack:(N,R,k,x,C)=>B(x,async(v,g)=>{if(C)await I(C,v);g.replaceTrack(N,R,k)}),onPeerJoin:(N)=>Z.onPeerJoin=N,onPeerLeave:(N)=>Z.onPeerLeave=N,onPeerStream:(N)=>Z.onPeerStream=N,onPeerTrack:(N)=>Z.onPeerTrack=N}};var QZ=20,qZ=5333,pG=57333,fG=({init:J,subscribe:q,announce:Q})=>{const G={};let X=!1,Y,V,K;return($,W,Z)=>{const{appId:B}=$;if(G[B]?.[W])return G[B][W];const U={},H={},j=v1(w8,B,W),z=g1(j),M=g1(v1(j,T0)),P=n6($.password||"",B,W),O=(C)=>async(v)=>({type:v.type,sdp:await C(P,v.sdp)}),w=O(t6),L=O(s6),D=()=>AQ(!0,$.rtcConfig),S=(C,v,g)=>{if(H[v]){if(H[v]!==C)C.destroy();return}H[v]=C,x(C,v),U[v]?.forEach((E,c)=>{if(c!==g)E.destroy()}),delete U[v]},F=(C,v)=>{if(H[v]===C)delete H[v]},I=(C,v)=>{if(H[C])return;const g=U[C]?.[v];if(g)delete U[C][v],g.destroy()},y=(C)=>{return V.push(...Q8(C,D)),q8(V.splice(0,C).map((v)=>v.offerPromise.then(L).then((g)=>({peer:v,offer:g}))))},A=(C,v)=>Z?.({error:`incorrect password (${$.password}) when decrypting ${v}`,appId:B,peerId:C,roomId:W}),T=(C)=>async(v,g,E)=>{const[c,f]=await q8([z,M]);if(v!==c&&v!==f)return;const{peerId:h,offer:s,answer:b,peer:a}=typeof g==="string"?N8(g):g;if(h===T0||H[h])return;if(h&&!s&&!b){if(U[h]?.[C])return;const[[{peer:p,offer:i}],V0]=await q8([y(1),g1(v1(j,h))]);U[h]||=[],U[h][C]=p,setTimeout(()=>I(h,C),N[C]*0.9),p.setHandlers({connect:()=>S(p,h,C),close:()=>F(p,h)}),E(V0,O0({peerId:T0,offer:i}))}else if(s){if(U[h]?.[C]&&T0>h)return;const i=AQ(!1,$.rtcConfig);i.setHandlers({connect:()=>S(i,h,C),close:()=>F(i,h)});let V0;try{V0=await w(s)}catch{A(h,"offer");return}if(i.isDead)return;const[t,U0]=await q8([g1(v1(j,h)),i.signal(V0)]);E(t,O0({peerId:T0,answer:await L(U0)}))}else if(b){let p;try{p=await w(b)}catch(i){A(h,"answer");return}if(a)a.setHandlers({connect:()=>S(a,h,C),close:()=>F(a,h)}),a.signal(p);else{const i=U[h]?.[C];if(i&&!i.isDead)i.signal(p)}}};if(!$)throw x0("requires a config map as the first argument");if(!B&&!$.firebaseApp)throw x0("config map is missing appId field");if(!W)throw x0("roomId argument required");if(!X){const C=J($);V=Q8(QZ,D),Y=Array.isArray(C)?C:[C],X=!0,K=setInterval(()=>V=V.filter((v)=>{const g=Date.now()-v.created<pG;if(!g)v.destroy();return g}),pG*1.03)}const N=Y.map(()=>qZ),R=[],k=Y.map(async(C,v)=>q(await C,await z,await M,T(v),y));q8([z,M]).then(([C,v])=>{const g=async(E,c)=>{const f=await Q(E,C,v);if(typeof f==="number")N[c]=f;R[c]=setTimeout(()=>g(E,c),N[c])};k.forEach(async(E,c)=>{await E,g(await Y[c],c)})});let x=p0;return G[B]||={},G[B][W]=cG((C)=>x=C,(C)=>delete H[C],()=>{delete G[B][W],R.forEach(clearTimeout),k.forEach(async(C)=>(await C)()),clearInterval(K)})}};var nG={},GZ=5,rG="x",aG="EVENT",sG=T1&&SJ.utils.randomPrivateKey(),XZ=T1&&RJ(SJ.getPublicKey(sG)),RQ={},d1={},lG={},tG=()=>Math.floor(Date.now()/1000),eG=(J)=>lG[J]??(lG[J]=YQ(J,1e4)+20000),dG=async(J,q)=>{const Q={kind:eG(J),content:q,pubkey:XZ,created_at:tG(),tags:[[rG,J]]},G=RJ(new Uint8Array(await crypto.subtle.digest("SHA-256",v0(O0([0,Q.pubkey,Q.created_at,Q.kind,Q.tags,Q.content])))));return O0([aG,{...Q,id:G,sig:RJ(await SJ.sign(G,sG))}])},iG=(J,q)=>{return RQ[J]=q,O0(["REQ",J,{kinds:[eG(q)],since:tG(),["#"+rG]:[q]}])},oG=(J)=>{return delete RQ[J],O0(["CLOSE",J])},TQ=fG({init:(J)=>d6(J,VZ,GZ,!0).map((q)=>{const Q=i6(q,(G)=>{const[X,Y,V,K]=N8(G);if(X!==aG){const $=`${w8}: relay failure from ${Q.url} - `;if(X==="NOTICE")console.warn($+Y);else if(X==="OK"&&!V)console.warn($+K);return}d1[Y]?.(RQ[Y],V.content)});return nG[q]=Q,Q.ready}),subscribe:(J,q,Q,G)=>{const X=IJ(64),Y=IJ(64);return d1[X]=d1[Y]=(V,K)=>G(V,K,async($,W)=>J.send(await dG($,W))),J.send(iG(X,q)),J.send(iG(Y,Q)),()=>{J.send(oG(X)),J.send(oG(Y)),delete d1[X],delete d1[Y]}},announce:async(J,q)=>J.send(await dG(q,O0({peerId:T0})))}),YZ=o6(nG),VZ=["eu.purplerelay.com","ftp.halifax.rwth-aachen.de/nostr","longhorn.bgp.rodeo","multiplexer.huszonegy.world","nfdb.noswhere.com","nostr-verified.wellorder.net","nostr.cool110.xyz","nostr.data.haus","nostr.grooveix.com","nostr.huszonegy.world","nostr.mom","nostr.openhoofd.nl","nostr.petrkr.net/strfry","nostr.sathoarder.com","nostr.stakey.net","nostr.vulpem.com","nostr2.sanhauf.com","nostrelay.circum.space","relay.fountain.fm","relay.nostraddress.com","relay.nostromo.social","relay.snort.social","relay.verified-nostr.com","strfry.openhoofd.nl","yabu.me/v2"].map((J)=>"wss://"+J);var J7=(J,q)=>{if(!J||!J.timestamp)return{resolved:!0,value:q.newValue,timestamp:q.timestamp};if(J.timestamp<q.timestamp)return{resolved:!0,value:q.newValue,timestamp:q.timestamp};return{resolved:!1}};var KZ=()=>{let J=!1;const q=async(X)=>{while(J)await new Promise((Y)=>setTimeout(Y,10));J=!0;try{return await X()}finally{J=!1}},Q=async(X)=>{return q(async()=>{try{const Y=await(await navigator.storage.getDirectory()).getFileHandle(X,{create:!1}).then((K)=>K.createSyncAccessHandle()),V=new Uint8Array(Y.getSize());return Y.read(V,{at:0}),Y.close(),{type:"loaded",name:X,data:V}}catch(Y){return{type:"error",name:X,message:Y.message||"File not found"}}})},G=async(X,Y)=>{return q(async()=>{if(!(Y instanceof Uint8Array))throw new Error("Content must be a Uint8Array");try{const V=await(await navigator.storage.getDirectory()).getFileHandle(X,{create:!0}).then((K)=>K.createSyncAccessHandle());return V.write(Y,{at:0}),V.truncate(Y.byteLength),V.close(),{type:"saved",name:X}}catch(V){return{type:"error",name:X,message:V.message||"Error saving the file"}}})};self.onmessage=async({data:{type:X,name:Y,content:V}})=>{try{const K=X==="load"?await Q(Y):X==="save"?await G(Y,V):{type:"error",message:"Unrecognized action"};self.postMessage(K)}catch(K){self.postMessage({type:"error",message:K.message||"Unexpected error"})}}},Q7=KZ;async function WZ(){if(console.log("\u26A1 GDB-P2P: Empowering distributed graph databases with real-time synchronization and scalability. Learn more: https://github.com/estebanrfp/gdb \u26A1"),navigator?.storage?.getDirectory){const J=await navigator.storage.getDirectory();console.log("OPFS is enabled.")}else console.log("OPFS is not available.")}if(Symbol.dispose===void 0)Object.defineProperty(Symbol,"dispose",{value:Symbol.for("Symbol.dispose")});class q7{constructor(){this.nodes={}}insert(J,q){this.nodes[J]={id:J,value:q,edges:[],timestamp:Date.now()}}get(J){return this.nodes[J]||null}link(J,q){const Q=this.nodes[J],G=this.nodes[q];if(Q&&G&&!Q.edges.includes(q))Q.edges.push(q)}getAllNodes(){return Object.values(this.nodes)}serialize(){return T9.deflate(l0(this.nodes))}deserialize(J){this.nodes=J9(T9.inflate(new Uint8Array(J)))}}class G7{constructor(J,{password:q}={}){this.name=J,this.password=q,this.graph=new q7,this.eventListeners=[],this.localHash,this.localTime=Date.now(),this.operators={},this.initWorker(),this.ready=this.loadGraphFromOPFS();const Q=`graph-sync-room-${this.name}`,G={appId:"1234",...this.password&&{password:this.password}},X=TQ(G,Q);this.room=X,window.addEventListener("online",async()=>{console.log("\u2705 Reconnected to the network."),this.sendData([{type:"sync",hash:this.localHash,ts:this.localTime}])}),window.addEventListener("offline",async()=>{console.log("\u274C Disconnected from the network.")}),document.addEventListener("visibilitychange",()=>{if(document.visibilityState==="visible")console.log("La pesta\xF1a es visible nuevamente."),this.sendData([{type:"sync",hash:this.localHash,ts:this.localTime}]);else if(document.visibilityState==="hidden")console.log("La pesta\xF1a ya no es visible.")}),setInterval(async()=>{this.sendData([{type:"sync",hash:this.localHash,ts:this.localTime}])},5000),WZ(),X.onPeerJoin(async(K)=>{console.log("\u26A1 New pair connected:",K),this.sendData([{type:"sync",hash:this.localHash,ts:this.localTime}])}),X.onPeerLeave((K)=>{console.log("\u26A1 Pair disconnected:",K)});const[Y,V]=X.makeAction("syncGraph");this.sendData=Y,V((K)=>this.receiveChanges(K)),this.channel=new BroadcastChannel(`graphdb_sync_${this.name}`),this.channel.onmessage=async(K)=>{if(K.data==="update")console.log("\uD83D\uDD04 Update received from another tab..."),await this.loadGraphFromOPFS(),this.emit()}}initWorker=async()=>{try{const J=new Blob([`(${Q7.toString()})()`],{type:"application/javascript"}),q=URL.createObjectURL(J);this.worker=new Worker(q),URL.revokeObjectURL(q),this.worker.addEventListener("message",(Q)=>{console.log("Worker message:",`${Q.data.name} ${Q.data.type}`)}),console.log("Worker inicializado correctamente.")}catch(J){console.error("Error al inicializar el worker:",J.message)}};getWorker(){return this.worker}emit(){const J=this.graph.getAllNodes();this.eventListeners.forEach((q)=>q(J))}on(J){this.eventListeners.push(J)}off(J){if(J)this.eventListeners=this.eventListeners.filter((q)=>q!==J);else this.eventListeners=[]}async getAllNodes(){return await this.ready,this.graph.getAllNodes()}async generateHash(){return crypto.randomUUID()}async hashValue(J){const q=(new TextEncoder()).encode(J),Q=await crypto.subtle.digest("SHA-256",q);return Array.from(new Uint8Array(Q)).map((G)=>G.toString(16).padStart(2,"0")).join("")}async generateGraphHash(){const J=this.graph.serialize();return await this.hashValue(J)}async loadGraphFromOPFS(){try{const q=await((Q)=>{return new Promise((G,X)=>{this.worker.postMessage({type:"load",name:Q});const Y=(V)=>{if(V.data.type==="loaded"&&V.data.name===Q)this.worker.removeEventListener("message",Y),G(new Uint8Array(V.data.data));else if(V.data.type==="error")this.worker.removeEventListener("message",Y),X(new Error(V.data.message||"Error desconocido al cargar el archivo."))};this.worker.addEventListener("message",Y)})})(`${this.name}_graph.msgpack`).catch(()=>new Uint8Array);if(q.byteLength>0)this.graph.deserialize(q);else console.warn("The file '_graph.msgpack' is empty or could not be loaded.");console.log(`Graph loaded from OPFS: [ ${this.graph.getAllNodes().length} nodes ]`)}catch(J){console.error("General error loading the graph from OPFS:",J.message)}}async saveGraphToOPFS(){try{console.log("graph hash: ",await this.generateGraphHash());const J=this.graph.serialize();return await((Q,G)=>new Promise((X,Y)=>{this.worker.postMessage({type:"save",name:Q,content:G});const V=({data:K})=>{if(K.type==="saved"&&K.name===Q)this.worker.removeEventListener("message",V),X();else if(K.type==="error")this.worker.removeEventListener("message",V),Y(new Error(K.message||"Error al guardar"))};this.worker.addEventListener("message",V)}))(`${this.name}_graph.msgpack`,J),this.localHash=await this.generateGraphHash(),this.localTime=Date.now(),this.channel.postMessage("update"),!0}catch(J){throw console.error("Error guardando:",J),new Error("Guardado fallido")}}async put(J,q){await this.ready,q??=await this.generateHash(l0(J));const Q=this.graph.get(q);return this.graph.insert(q,J),await this.saveGraphToOPFS(),this.sendData([{type:"insert",id:q,value:J,timestamp:Date.now()}]),this.emit(),q}async get(J,q=null){if(await this.ready,typeof J!=="string")return console.error("El par\xE1metro debe ser un ID v\xE1lido (cadena)."),{result:null};const Q=this.graph.get(J);if(!Q)return console.error(`Nodo con ID '${J}' no encontrado.`),{result:null};if(!q)return{result:Q};q(Q);const G=(X)=>{const Y=X.find((V)=>V.id===J);if(Y?.value!==Q.value)Q.value=Y.value,q(Y)};return this.eventListeners.push(G),{result:Q,...q&&{unsubscribe:()=>this.eventListeners.splice(this.eventListeners.indexOf(G),1)}}}async map(...J){await this.ready;let Q={...{realtime:!1,query:{},field:null,order:"asc",$limit:null,$after:null,$before:null,strictMode:!1}},G=null,X=!1;if(J.forEach((j)=>{if(typeof j==="function")G=j;else if(j&&typeof j==="object"){if("realtime"in j)X=!0;Object.assign(Q,j)}}),G&&!X)Q.realtime=!0;const Y={$eq:(j,z)=>j===z,$ne:(j,z)=>j!==z,$gt:(j,z)=>j>z,$gte:(j,z)=>j>=z,$lt:(j,z)=>j<z,$lte:(j,z)=>j<=z,$in:(j,z)=>Array.isArray(z)&&z.includes(j),$between:(j,[z,M])=>j>=z&&j<=M,$exists:(j,z)=>z?j!==void 0:j===void 0,$text:{global:(j,z)=>{const M=(O)=>String(O).normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^\w\s]/g,""),P=M(z);return Object.values(j).some((O)=>{if(typeof O==="object")return this.fieldSearch(O,P);return M(O).includes(P)})},field:(j,z)=>{const M=(P)=>String(P).normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^\w\s]/g,"");return Array.isArray(j)?j.some((P)=>M(P).includes(M(z))):M(j).includes(M(z))}},$like:(j,z)=>{if(typeof j!=="string"||typeof z!=="string")return!1;return new RegExp(`^${z.replace(/%/g,".*").replace(/_/g,".")}\$`,"i").test(j)},$regex:(j,z)=>typeof j==="string"&&new RegExp(z.$regex||z,"i").test(j),$and:(j,z,M)=>z.every((P)=>{return M.createFilter(P)(j)}),$or:(j,z,M)=>z.some((P)=>{return M.createFilter(P)(j)}),$not:(j,z,M)=>{return!M.createFilter(z)(j)}},V=(j,z)=>{try{return z.split(".").reduce((M,P)=>{if(M&&typeof M==="object"&&(P in M))return M[P];if(Q.strictMode)throw new Error(`Campo no encontrado: ${z}`);return},j)}catch(M){if(Q.strictMode)throw M;return}},K=(j)=>{const z=(M)=>{return Object.entries(j).every(([P,O])=>{if(P.startsWith("$"))return Y[P](M,O,{filterNode:z,createFilter:K});const w=V(M.value,P);if(typeof O!=="object"||O===null)return Y.$eq(w,O);return Object.entries(O).every(([L,D])=>{if(L==="$text")return Y.$text.field(w,D);if(L==="$between"&&D.every((S)=>S instanceof Date)){const S=new Date(w);return Y.$between(S,D)}return Y[L]?.(w,D)??!1})})};return z},$=K(Q.query);function W(j,z){return j.length===z.length&&j.every((M,P)=>M===z[P])}const Z=(j)=>{let z=Object.values(j).filter($);if(Q.field)z.sort((M,P)=>{const O=V(M.value,Q.field),w=V(P.value,Q.field),L=Q.order==="asc"?1:-1;if(typeof O==="string"&&typeof w==="string")return O.localeCompare(w)*L;return((O??0)-(w??0))*L});if(Q.$after){const M=z.findIndex((P)=>P.id===Q.$after);z=M>=0?z.slice(M+1):[]}if(Q.$before){const M=z.findIndex((P)=>P.id===Q.$before);z=M>=0?z.slice(0,M):[]}return Q.$limit?z.slice(0,Q.$limit):z};let B=Z(this.graph.nodes),U=null;const H=(j)=>{const z=j.filter((w)=>!B.some((L)=>L.id===w.id)),M=B.filter((w)=>!j.some((L)=>L.id===w.id)),P=j.filter((w)=>{const L=B.find((D)=>D.id===w.id);return L&&!W(l0(w.value),l0(L.value))}),O=(w,L)=>{const D=L==="removed"?null:w.value,S={id:w.id,value:D,edges:w.edges||[],timestamp:w.timestamp||null,action:L};G(S)};z.forEach((w)=>O(w,"added")),M.forEach((w)=>O(w,"removed")),P.forEach((w)=>O(w,"updated"))};if(G){if(B.forEach((j)=>{if(j.value)G({id:j.id,value:j.value,edges:j.edges,timestamp:j.timestamp,action:"initial"})}),Q.realtime)U=(j)=>{const z=Z(j);if(!W(l0(z),l0(B)))H(z),B=z},this.on(U)}return{results:B,...Q.realtime&&{unsubscribe:()=>U&&this.off(U)}}}async remove(J){await this.ready;const q=this.graph.get(J);if(!q)return console.error(`Nodo con ID '${J}' no encontrado.`);delete this.graph.nodes[J];for(let Q of Object.values(this.graph.nodes))Q.edges=Q.edges.filter((G)=>G!==J);await this.saveGraphToOPFS(),this.sendData([{type:"remove",id:J,value:q.value,timestamp:Date.now()}]),this.emit()}async clear(){await this.ready,this.graph.nodes={};const J=await navigator.storage.getDirectory();try{await J.removeEntry(`${this.name}_graph.msgpack`)}catch(q){console.warn(`Error deleting _graph.msgpack: ${q.message}`)}console.log("All data has been deleted.")}async link(J,q){if(await this.ready,!this.graph.nodes[J]||!this.graph.nodes[q]){console.error(`Uno o ambos nodos (${J}, ${q}) no existen.`);return}this.graph.link(J,q),await this.saveGraphToOPFS(),this.sendData([{type:"link",sourceId:J,targetId:q,timestamp:Date.now()}]),this.emit()}async applyFullGraph(J){try{this.graph.nodes={};for(let[q,Q]of Object.entries(J.nodes))this.graph.nodes[q]=Q;await this.saveGraphToOPFS()}catch(q){console.error("Error applying the full graph:",q.message)}}async receiveChanges(J){const q={insert:(Q)=>this.graph.insert(Q.id,Q.value),update:(Q)=>{const G=this.graph.get(Q.id),X=J7(G,Q);X.resolved&&Object.assign(G,{value:X.value,timestamp:X.timestamp})},remove:(Q)=>delete this.graph.nodes[Q.id],link:(Q)=>this.graph.link(Q.sourceId,Q.targetId),sync:(Q)=>this.localHash!==Q.hash&&this.localTime>Q.ts&&(console.log("Sending recent data to remote node."),this.sendData([{type:"syncReceive",graph:this.graph}])),syncReceive:async(Q)=>await this.applyFullGraph(Q.graph)};for(let Q of J)q[Q.type]?.(Q);await this.saveGraphToOPFS(),this.emit()}}export{G7 as default};
