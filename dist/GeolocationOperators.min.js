function I(z){const C={$near:(c,j)=>{console.log("Ejecutando operador $near");const{latitude:f,longitude:k,radius:h}=j;if(typeof f!=="number"||typeof k!=="number"||typeof h!=="number")return console.error("Consulta inv\xE1lida para $near:",j),!1;const w=c?.latitude||c?.location?.latitude,b=c?.longitude||c?.location?.longitude;if(typeof w!=="number"||typeof b!=="number")return!1;return E(w,b,f,k)<=h},$bbox:(c,j)=>{console.log("Ejecutando operador $bbox");const{minLat:f,maxLat:k,minLng:h,maxLng:w}=j;if(typeof f!=="number"||typeof k!=="number"||typeof h!=="number"||typeof w!=="number")return console.error("Consulta inv\xE1lida para $bbox:",j),!1;const b=c?.latitude||c?.location?.latitude,p=c?.longitude||c?.location?.longitude;if(typeof b!=="number"||typeof p!=="number")return!1;return b>=f&&b<=k&&p>=h&&p<=w}};function E(c,j,f,k){const h=(F)=>F*Math.PI/180,b=h(f-c),p=h(k-j),A=Math.sin(b/2)*Math.sin(b/2)+Math.cos(h(c))*Math.cos(h(f))*Math.sin(p/2)*Math.sin(p/2);return 6371*(2*Math.atan2(Math.sqrt(A),Math.sqrt(1-A)))}return z.operators={...z.operators,...C},z}export{I as withGeolocationOperators};
