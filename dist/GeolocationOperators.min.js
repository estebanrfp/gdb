function J(C){const F={$near:(b,f)=>{console.log("Ejecutando operador $near");const{latitude:c,longitude:w,radius:j}=f;if(typeof c!=="number"||typeof w!=="number"||typeof j!=="number")return console.error("Consulta inv\xE1lida para $near:",f),!1;const A=b?.latitude||b?.location?.latitude,k=b?.longitude||b?.location?.longitude;if(typeof A!=="number"||typeof k!=="number")return!1;return G(A,k,c,w)<=j},$bbox:(b,f)=>{console.log("Ejecutando operador $bbox");const{minLat:c,maxLat:w,minLng:j,maxLng:A}=f;if(typeof c!=="number"||typeof w!=="number"||typeof j!=="number"||typeof A!=="number")return console.error("Consulta inv\xE1lida para $bbox:",f),!1;const k=b?.latitude||b?.location?.latitude,z=b?.longitude||b?.location?.longitude;if(typeof k!=="number"||typeof z!=="number")return!1;return k>=c&&k<=w&&z>=j&&z<=A}};function G(b,f,c,w){const j=(H)=>H*Math.PI/180,k=j(c-b),z=j(w-f),E=Math.sin(k/2)*Math.sin(k/2)+Math.cos(j(b))*Math.cos(j(c))*Math.sin(z/2)*Math.sin(z/2);return 6371*(2*Math.atan2(Math.sqrt(E),Math.sqrt(1-E)))}return C.operators={...C.operators,...F},console.log(C.operators),C}export{J as withGeolocationOperators};
