var H7=Object.create;var{defineProperty:X1,getPrototypeOf:M7,getOwnPropertyNames:uQ,getOwnPropertyDescriptor:B7}=Object,cQ=Object.prototype.hasOwnProperty;var o1=(J,q,Q)=>{Q=J!=null?H7(M7(J)):{};const G=q||!J||!J.__esModule?X1(Q,"default",{value:J,enumerable:!0}):Q;for(let X of uQ(J))if(!cQ.call(G,X))X1(G,X,{get:()=>J[X],enumerable:!0});return G},fQ=(J)=>{const q=fQ.moduleCache??=new WeakMap;var Q=q.get(J);if(Q)return Q;var G=X1({},"__esModule",{value:!0}),X={enumerable:!1};if(J&&typeof J==="object"||typeof J==="function"){for(let Y of uQ(J))if(!cQ.call(G,Y))X1(G,Y,{get:()=>J[Y],enumerable:!(X=B7(J,Y))||X.enumerable})}return q.set(J,G),G};var K0=(J,q)=>()=>(q||J((q={exports:{}}).exports,q),q.exports);var pQ=(J,q)=>{for(var Q in q)X1(J,Q,{get:q[Q],enumerable:!0,configurable:!0,set:(G)=>q[Q]=()=>G})};var L7=(J,q)=>()=>(J&&(q=J(J=0)),q);var K5=K0((n$,V5)=>{var NK=function(J){if(J=String(J),J.length>100)return;var q=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(J);if(!q)return;var Q=parseFloat(q[1]),G=(q[2]||"ms").toLowerCase();switch(G){case"years":case"year":case"yrs":case"yr":case"y":return Q*FK;case"weeks":case"week":case"w":return Q*xK;case"days":case"day":case"d":return Q*F8;case"hours":case"hour":case"hrs":case"hr":case"h":return Q*s8;case"minutes":case"minute":case"mins":case"min":case"m":return Q*a8;case"seconds":case"second":case"secs":case"sec":case"s":return Q*r8;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return Q;default:return}},SK=function(J){var q=Math.abs(J);if(q>=F8)return Math.round(J/F8)+"d";if(q>=s8)return Math.round(J/s8)+"h";if(q>=a8)return Math.round(J/a8)+"m";if(q>=r8)return Math.round(J/r8)+"s";return J+"ms"},DK=function(J){var q=Math.abs(J);if(q>=F8)return gJ(J,q,F8,"day");if(q>=s8)return gJ(J,q,s8,"hour");if(q>=a8)return gJ(J,q,a8,"minute");if(q>=r8)return gJ(J,q,r8,"second");return J+" ms"},gJ=function(J,q,Q,G){var X=q>=Q*1.5;return Math.round(J/Q)+" "+G+(X?"s":"")},r8=1000,a8=r8*60,s8=a8*60,F8=s8*24,xK=F8*7,FK=F8*365.25;V5.exports=function(J,q){q=q||{};var Q=typeof J;if(Q==="string"&&J.length>0)return NK(J);else if(Q==="number"&&isFinite(J))return q.long?DK(J):SK(J);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(J))}});var W5=K0((r$,Z5)=>{var IK=function(J){Q.debug=Q,Q.default=Q,Q.coerce=W,Q.disable=V,Q.enable=X,Q.enabled=K,Q.humanize=K5(),Q.destroy=Z,Object.keys(J).forEach(($)=>{Q[$]=J[$]}),Q.names=[],Q.skips=[],Q.formatters={};function q($){let H=0;for(let U=0;U<$.length;U++)H=(H<<5)-H+$.charCodeAt(U),H|=0;return Q.colors[Math.abs(H)%Q.colors.length]}Q.selectColor=q;function Q($){let H,U=null,z,P;function j(...M){if(!j.enabled)return;const O=j,F=Number(new Date),N=F-(H||F);if(O.diff=N,O.prev=H,O.curr=F,H=F,M[0]=Q.coerce(M[0]),typeof M[0]!=="string")M.unshift("%O");let B=0;M[0]=M[0].replace(/%([a-zA-Z%])/g,(D,x)=>{if(D==="%%")return"%";B++;const S=Q.formatters[x];if(typeof S==="function"){const y=M[B];D=S.call(O,y),M.splice(B,1),B--}return D}),Q.formatArgs.call(O,M),(O.log||Q.log).apply(O,M)}if(j.namespace=$,j.useColors=Q.useColors(),j.color=Q.selectColor($),j.extend=G,j.destroy=Q.destroy,Object.defineProperty(j,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(U!==null)return U;if(z!==Q.namespaces)z=Q.namespaces,P=Q.enabled($);return P},set:(M)=>{U=M}}),typeof Q.init==="function")Q.init(j);return j}function G($,H){const U=Q(this.namespace+(typeof H==="undefined"?":":H)+$);return U.log=this.log,U}function X($){Q.save($),Q.namespaces=$,Q.names=[],Q.skips=[];const H=(typeof $==="string"?$:"").trim().replace(" ",",").split(",").filter(Boolean);for(let U of H)if(U[0]==="-")Q.skips.push(U.slice(1));else Q.names.push(U)}function Y($,H){let U=0,z=0,P=-1,j=0;while(U<$.length)if(z<H.length&&(H[z]===$[U]||H[z]==="*"))if(H[z]==="*")P=z,j=U,z++;else U++,z++;else if(P!==-1)z=P+1,j++,U=j;else return!1;while(z<H.length&&H[z]==="*")z++;return z===H.length}function V(){const $=[...Q.names,...Q.skips.map((H)=>"-"+H)].join(",");return Q.enable(""),$}function K($){for(let H of Q.skips)if(Y($,H))return!1;for(let H of Q.names)if(Y($,H))return!0;return!1}function W($){if($ instanceof Error)return $.stack||$.message;return $}function Z(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return Q.enable(Q.load()),Q};Z5.exports=IK});var z5=K0(($5,EJ)=>{var AK=function(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let J;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&(J=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(J[1],10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},RK=function(J){if(J[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+J[0]+(this.useColors?"%c ":" ")+"+"+$5.humanize(this.diff),!this.useColors)return;const q="color: "+this.color;J.splice(1,0,q,"color: inherit");let Q=0,G=0;J[0].replace(/%[a-zA-Z%]/g,(X)=>{if(X==="%%")return;if(Q++,X==="%c")G=Q}),J.splice(G,0,q)},TK=function(J){try{if(J)$5.storage.setItem("debug",J);else $5.storage.removeItem("debug")}catch(q){}},vK=function(){let J;try{J=$5.storage.getItem("debug")}catch(q){}if(!J&&typeof process!=="undefined"&&("env"in process))J=process.env.DEBUG;return J},gK=function(){try{return localStorage}catch(J){}};$5.formatArgs=RK;$5.save=TK;$5.load=vK;$5.useColors=AK;$5.storage=gK();$5.destroy=(()=>{let J=!1;return()=>{if(!J)J=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();$5.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];$5.log=console.debug||console.log||(()=>{});EJ.exports=W5()($5);var{formatters:yK}=EJ.exports;yK.j=function(J){try{return JSON.stringify(J)}catch(q){return"[UnexpectedJSONParseError]: "+q.message}}});var F5={};pQ(F5,{prototype:()=>{{return aK}},once:()=>{{return oK}},default:()=>{{return rK}},EventEmitter:()=>{{return u}}});var pK,u,mJ,L5,P5,lK,k5,C5,O5,w5,dK,iK,oK,nK,x5,t8,H5,_J,B5,M5,rK,aK;var N5=L7(()=>{pK=function(J){console&&console.warn&&console.warn(J)},u=function(){u.init.call(this)},mJ=function(J){if(typeof J!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof J)},L5=function(J){return J._maxListeners===void 0?u.defaultMaxListeners:J._maxListeners},P5=function(J,q,Q,G){var X,Y,V;if(mJ(Q),Y=J._events,Y===void 0?(Y=J._events=Object.create(null),J._eventsCount=0):(Y.newListener!==void 0&&(J.emit("newListener",q,Q.listener?Q.listener:Q),Y=J._events),V=Y[q]),V===void 0)V=Y[q]=Q,++J._eventsCount;else if(typeof V=="function"?V=Y[q]=G?[Q,V]:[V,Q]:G?V.unshift(Q):V.push(Q),X=L5(J),X>0&&V.length>X&&!V.warned){V.warned=!0;var K=new Error("Possible EventEmitter memory leak detected. "+V.length+" "+String(q)+" listeners added. Use emitter.setMaxListeners() to increase limit");K.name="MaxListenersExceededWarning",K.emitter=J,K.type=q,K.count=V.length,pK(K)}return J},lK=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)},k5=function(J,q,Q){var G={fired:!1,wrapFn:void 0,target:J,type:q,listener:Q},X=lK.bind(G);return X.listener=Q,G.wrapFn=X,X},C5=function(J,q,Q){var G=J._events;if(G===void 0)return[];var X=G[q];return X===void 0?[]:typeof X=="function"?Q?[X.listener||X]:[X]:Q?iK(X):w5(X,X.length)},O5=function(J){var q=this._events;if(q!==void 0){var Q=q[J];if(typeof Q=="function")return 1;if(Q!==void 0)return Q.length}return 0},w5=function(J,q){for(var Q=new Array(q),G=0;G<q;++G)Q[G]=J[G];return Q},dK=function(J,q){for(;q+1<J.length;q++)J[q]=J[q+1];J.pop()},iK=function(J){for(var q=new Array(J.length),Q=0;Q<q.length;++Q)q[Q]=J[Q].listener||J[Q];return q},oK=function(J,q){return new Promise(function(Q,G){function X(V){J.removeListener(q,Y),G(V)}function Y(){typeof J.removeListener=="function"&&J.removeListener("error",X),Q([].slice.call(arguments))}x5(J,q,Y,{once:!0}),q!=="error"&&nK(J,X,{once:!0})})},nK=function(J,q,Q){typeof J.on=="function"&&x5(J,"error",q,Q)},x5=function(J,q,Q,G){if(typeof J.on=="function")G.once?J.once(q,Q):J.on(q,Q);else if(typeof J.addEventListener=="function")J.addEventListener(q,function X(Y){G.once&&J.removeEventListener(q,X),Q(Y)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof J)},t8=typeof Reflect=="object"?Reflect:null,H5=t8&&typeof t8.apply=="function"?t8.apply:function(J,q,Q){return Function.prototype.apply.call(J,q,Q)};t8&&typeof t8.ownKeys=="function"?_J=t8.ownKeys:Object.getOwnPropertySymbols?_J=function(J){return Object.getOwnPropertyNames(J).concat(Object.getOwnPropertySymbols(J))}:_J=function(J){return Object.getOwnPropertyNames(J)};B5=Number.isNaN||function(J){return J!==J};u.EventEmitter=u;u.prototype._events=void 0;u.prototype._eventsCount=0;u.prototype._maxListeners=void 0;M5=10;Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return M5},set:function(J){if(typeof J!="number"||J<0||B5(J))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+J+".");M5=J}});u.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};u.prototype.setMaxListeners=function(J){if(typeof J!="number"||J<0||B5(J))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+J+".");return this._maxListeners=J,this};u.prototype.getMaxListeners=function(){return L5(this)};u.prototype.emit=function(J){for(var q=[],Q=1;Q<arguments.length;Q++)q.push(arguments[Q]);var G=J==="error",X=this._events;if(X!==void 0)G=G&&X.error===void 0;else if(!G)return!1;if(G){var Y;if(q.length>0&&(Y=q[0]),Y instanceof Error)throw Y;var V=new Error("Unhandled error."+(Y?" ("+Y.message+")":""));throw V.context=Y,V}var K=X[J];if(K===void 0)return!1;if(typeof K=="function")H5(K,this,q);else for(var W=K.length,Z=w5(K,W),Q=0;Q<W;++Q)H5(Z[Q],this,q);return!0};u.prototype.addListener=function(J,q){return P5(this,J,q,!1)};u.prototype.on=u.prototype.addListener;u.prototype.prependListener=function(J,q){return P5(this,J,q,!0)};u.prototype.once=function(J,q){return mJ(q),this.on(J,k5(this,J,q)),this};u.prototype.prependOnceListener=function(J,q){return mJ(q),this.prependListener(J,k5(this,J,q)),this};u.prototype.removeListener=function(J,q){var Q,G,X,Y,V;if(mJ(q),G=this._events,G===void 0)return this;if(Q=G[J],Q===void 0)return this;if(Q===q||Q.listener===q)--this._eventsCount===0?this._events=Object.create(null):(delete G[J],G.removeListener&&this.emit("removeListener",J,Q.listener||q));else if(typeof Q!="function"){for(X=-1,Y=Q.length-1;Y>=0;Y--)if(Q[Y]===q||Q[Y].listener===q){V=Q[Y].listener,X=Y;break}if(X<0)return this;X===0?Q.shift():dK(Q,X),Q.length===1&&(G[J]=Q[0]),G.removeListener!==void 0&&this.emit("removeListener",J,V||q)}return this};u.prototype.off=u.prototype.removeListener;u.prototype.removeAllListeners=function(J){var q,Q,G;if(Q=this._events,Q===void 0)return this;if(Q.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Q[J]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Q[J]),this;if(arguments.length===0){var X=Object.keys(Q),Y;for(G=0;G<X.length;++G)Y=X[G],Y!=="removeListener"&&this.removeAllListeners(Y);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(q=Q[J],typeof q=="function")this.removeListener(J,q);else if(q!==void 0)for(G=q.length-1;G>=0;G--)this.removeListener(J,q[G]);return this};u.prototype.listeners=function(J){return C5(this,J,!0)};u.prototype.rawListeners=function(J){return C5(this,J,!1)};u.listenerCount=function(J,q){return typeof J.listenerCount=="function"?J.listenerCount(q):O5.call(J,q)};u.prototype.listenerCount=O5;u.prototype.eventNames=function(){return this._eventsCount>0?_J(this._events):[]};rK=u,aK=u.prototype});var D5=K0((jz,S5)=>{S5.exports=class J{constructor(q){if(!(q>0)||(q-1&q)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(q),this.mask=q-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(q){if(this.buffer[this.top]!==void 0)return!1;return this.buffer[this.top]=q,this.top=this.top+1&this.mask,!0}shift(){const q=this.buffer[this.btm];if(q===void 0)return;return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,q}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var R5=K0((Hz,A5)=>{var I5=D5();A5.exports=class J{constructor(q){this.hwm=q||16,this.head=new I5(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(q){if(this.length++,!this.head.push(q)){const Q=this.head;this.head=Q.next=new I5(2*this.head.buffer.length),this.head.push(q)}}shift(){if(this.length!==0)this.length--;const q=this.tail.shift();if(q===void 0&&this.tail.next){const Q=this.tail.next;return this.tail.next=null,this.tail=Q,this.tail.shift()}return q}peek(){const q=this.tail.peek();if(q===void 0&&this.tail.next)return this.tail.next.peek();return q}isEmpty(){return this.length===0}}});var g5=K0((Mz,v5)=>{var T5=function(J){return J.length},sK=function(J){const q=J.byteLength;let Q="";for(let G=0;G<q;G++)Q+=String.fromCharCode(J[G]);return Q},tK=function(J,q,Q=0,G=T5(q)){const X=Math.min(G,J.byteLength-Q);for(let Y=0;Y<X;Y++)J[Q+Y]=q.charCodeAt(Y);return X};v5.exports={byteLength:T5,toString:sK,write:tK}});var h5=K0((Bz,E5)=>{var y5=function(J){let q=J.length;if(J.charCodeAt(q-1)===61)q--;if(q>1&&J.charCodeAt(q-1)===61)q--;return q*3>>>2},eK=function(J){const q=J.byteLength;let Q="";for(let G=0;G<q;G+=3)Q+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[J[G]>>2]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(J[G]&3)<<4|J[G+1]>>4]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(J[G+1]&15)<<2|J[G+2]>>6]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[J[G+2]&63];if(q%3===2)Q=Q.substring(0,Q.length-1)+"=";else if(q%3===1)Q=Q.substring(0,Q.length-2)+"==";return Q},J4=function(J,q,Q=0,G=y5(q)){const X=Math.min(G,J.byteLength-Q);for(let Y=0,V=0;V<X;Y+=4){const K=N8[q.charCodeAt(Y)],W=N8[q.charCodeAt(Y+1)],Z=N8[q.charCodeAt(Y+2)],$=N8[q.charCodeAt(Y+3)];J[V++]=K<<2|W>>4,J[V++]=(W&15)<<4|Z>>2,J[V++]=(Z&3)<<6|$&63}return X},N8=new Uint8Array(256);for(let J=0;J<"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".length;J++)N8["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(J)]=J;N8[45]=62;N8[95]=63;E5.exports={byteLength:y5,toString:eK,write:J4}});var u5=K0((Lz,b5)=>{var m5=function(J){return J.length>>>1},Q4=function(J){const q=J.byteLength;J=new DataView(J.buffer,J.byteOffset,q);let Q="",G=0;for(let X=q-q%4;G<X;G+=4)Q+=J.getUint32(G).toString(16).padStart(8,"0");for(;G<q;G++)Q+=J.getUint8(G).toString(16).padStart(2,"0");return Q},q4=function(J,q,Q=0,G=m5(q)){const X=Math.min(G,J.byteLength-Q);for(let Y=0;Y<X;Y++){const V=_5(q.charCodeAt(Y*2)),K=_5(q.charCodeAt(Y*2+1));if(V===void 0||K===void 0)return J.subarray(0,Y);J[Q+Y]=V<<4|K}return X},_5=function(J){if(J>=48&&J<=57)return J-48;if(J>=65&&J<=70)return J-65+10;if(J>=97&&J<=102)return J-97+10};b5.exports={byteLength:m5,toString:Q4,write:q4}});var f5=K0((Pz,c5)=>{var WQ=function(J){let q=0;for(let Q=0,G=J.length;Q<G;Q++){const X=J.charCodeAt(Q);if(X>=55296&&X<=56319&&Q+1<G){const Y=J.charCodeAt(Q+1);if(Y>=56320&&Y<=57343){q+=4,Q++;continue}}if(X<=127)q+=1;else if(X<=2047)q+=2;else q+=3}return q},$Q;if(typeof TextDecoder!=="undefined"){const J=new TextDecoder;$Q=function q(Q){return J.decode(Q)}}else $Q=function J(q){const Q=q.byteLength;let G="",X=0;while(X<Q){let Y=q[X];if(Y<=127){G+=String.fromCharCode(Y),X++;continue}let V=0,K=0;if(Y<=223)V=1,K=Y&31;else if(Y<=239)V=2,K=Y&15;else if(Y<=244)V=3,K=Y&7;if(Q-X-V>0){let W=0;while(W<V)Y=q[X+W+1],K=K<<6|Y&63,W+=1}else K=65533,V=Q-X;G+=String.fromCodePoint(K),X+=V+1}return G};var zQ;if(typeof TextEncoder!=="undefined"){const J=new TextEncoder;zQ=function q(Q,G,X=0,Y=WQ(G)){const V=Math.min(Y,Q.byteLength-X);return J.encodeInto(G,Q.subarray(X,X+V)),V}}else zQ=function J(q,Q,G=0,X=WQ(Q)){const Y=Math.min(X,q.byteLength-G);q=q.subarray(G,G+Y);let V=0,K=0;while(V<Q.length){const W=Q.codePointAt(V);if(W<=127){q[K++]=W,V++;continue}let Z=0,$=0;if(W<=2047)Z=6,$=192;else if(W<=65535)Z=12,$=224;else if(W<=2097151)Z=18,$=240;q[K++]=$|W>>Z,Z-=6;while(Z>=0)q[K++]=128|W>>Z&63,Z-=6;V+=W>=65536?2:1}return Y};c5.exports={byteLength:WQ,toString:$Q,write:zQ}});var d5=K0((kz,l5)=>{var p5=function(J){return J.length*2},G4=function(J){const q=J.byteLength;let Q="";for(let G=0;G<q-1;G+=2)Q+=String.fromCharCode(J[G]+J[G+1]*256);return Q},X4=function(J,q,Q=0,G=p5(q)){const X=Math.min(G,J.byteLength-Q);let Y=X;for(let V=0;V<q.length;++V){if((Y-=2)<0)break;const K=q.charCodeAt(V),W=K>>8,Z=K%256;J[Q+V*2]=Z,J[Q+V*2+1]=W}return X};l5.exports={byteLength:p5,toString:G4,write:X4}});var jQ=K0((r5,a5)=>{var E1=function(J){switch(J){case"ascii":return Y4;case"base64":return V4;case"hex":return K4;case"utf8":case"utf-8":case void 0:case null:return Z4;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W4;default:throw new Error(`Unknown encoding: ${J}`)}},i5=function(J){return J instanceof Uint8Array},$4=function(J){try{return E1(J),!0}catch{return!1}},z4=function(J,q,Q){const G=new Uint8Array(J);if(q!==void 0)r5.fill(G,q,0,G.byteLength,Q);return G},U4=function(J){return new Uint8Array(J)},j4=function(J){return new Uint8Array(J)},H4=function(J,q){return E1(q).byteLength(J)},M4=function(J,q){if(J===q)return 0;const Q=Math.min(J.byteLength,q.byteLength);J=new DataView(J.buffer,J.byteOffset,J.byteLength),q=new DataView(q.buffer,q.byteOffset,q.byteLength);let G=0;for(let X=Q-Q%4;G<X;G+=4){const Y=J.getUint32(G,bJ),V=q.getUint32(G,bJ);if(Y!==V)break}for(;G<Q;G++){const X=J.getUint8(G),Y=q.getUint8(G);if(X<Y)return-1;if(X>Y)return 1}return J.byteLength>q.byteLength?1:J.byteLength<q.byteLength?-1:0},B4=function(J,q){if(q===void 0)q=J.reduce((X,Y)=>X+Y.byteLength,0);const Q=new Uint8Array(q);let G=0;for(let X of J){if(G+X.byteLength>Q.byteLength){const Y=X.subarray(0,Q.byteLength-G);return Q.set(Y,G),Q}Q.set(X,G),G+=X.byteLength}return Q},L4=function(J,q,Q=0,G=0,X=J.byteLength){if(X>0&&X<G)return 0;if(X===G)return 0;if(J.byteLength===0||q.byteLength===0)return 0;if(Q<0)throw new RangeError("targetStart is out of range");if(G<0||G>=J.byteLength)throw new RangeError("sourceStart is out of range");if(X<0)throw new RangeError("sourceEnd is out of range");if(Q>=q.byteLength)Q=q.byteLength;if(X>J.byteLength)X=J.byteLength;if(q.byteLength-Q<X-G)X=q.length-Q+G;const Y=X-G;if(J===q)q.copyWithin(Q,G,X);else q.set(J.subarray(G,X),Q);return Y},P4=function(J,q){if(J===q)return!0;if(J.byteLength!==q.byteLength)return!1;const Q=J.byteLength;J=new DataView(J.buffer,J.byteOffset,J.byteLength),q=new DataView(q.buffer,q.byteOffset,q.byteLength);let G=0;for(let X=Q-Q%4;G<X;G+=4)if(J.getUint32(G,bJ)!==q.getUint32(G,bJ))return!1;for(;G<Q;G++)if(J.getUint8(G)!==q.getUint8(G))return!1;return!0},k4=function(J,q,Q,G,X){if(typeof q==="string"){if(typeof Q==="string")X=Q,Q=0,G=J.byteLength;else if(typeof G==="string")X=G,G=J.byteLength}else if(typeof q==="number")q=q&255;else if(typeof q==="boolean")q=+q;if(Q<0||J.byteLength<Q||J.byteLength<G)throw new RangeError("Out of range index");if(Q===void 0)Q=0;if(G===void 0)G=J.byteLength;if(G<=Q)return J;if(!q)q=0;if(typeof q==="number")for(let Y=Q;Y<G;++Y)J[Y]=q;else{q=i5(q)?q:UQ(q,X);const Y=q.byteLength;for(let V=0;V<G-Q;++V)J[V+Q]=q[V%Y]}return J},UQ=function(J,q,Q){if(typeof J==="string")return C4(J,q);if(Array.isArray(J))return O4(J);if(ArrayBuffer.isView(J))return w4(J);return x4(J,q,Q)},C4=function(J,q){const Q=E1(q),G=new Uint8Array(Q.byteLength(J));return Q.write(G,J,0,G.byteLength),G},O4=function(J){const q=new Uint8Array(J.length);return q.set(J),q},w4=function(J){const q=new Uint8Array(J.byteLength);return q.set(J),q},x4=function(J,q,Q){return new Uint8Array(J,q,Q)},F4=function(J,q,Q,G){return n5(J,q,Q,G)!==-1},o5=function(J,q,Q,G,X){if(J.byteLength===0)return-1;if(typeof Q==="string")G=Q,Q=0;else if(Q===void 0)Q=X?0:J.length-1;else if(Q<0)Q+=J.byteLength;if(Q>=J.byteLength)if(X)return-1;else Q=J.byteLength-1;else if(Q<0)if(X)Q=0;else return-1;if(typeof q==="string")q=UQ(q,G);else if(typeof q==="number")if(q=q&255,X)return J.indexOf(q,Q);else return J.lastIndexOf(q,Q);if(q.byteLength===0)return-1;if(X){let Y=-1;for(let V=Q;V<J.byteLength;V++)if(J[V]===q[Y===-1?0:V-Y]){if(Y===-1)Y=V;if(V-Y+1===q.byteLength)return Y}else{if(Y!==-1)V-=V-Y;Y=-1}}else{if(Q+q.byteLength>J.byteLength)Q=J.byteLength-q.byteLength;for(let Y=Q;Y>=0;Y--){let V=!0;for(let K=0;K<q.byteLength;K++)if(J[Y+K]!==q[K]){V=!1;break}if(V)return Y}}return-1},n5=function(J,q,Q,G){return o5(J,q,Q,G,!0)},N4=function(J,q,Q,G){return o5(J,q,Q,G,!1)},S8=function(J,q,Q){const G=J[q];J[q]=J[Q],J[Q]=G},S4=function(J){const q=J.byteLength;if(q%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Q=0;Q<q;Q+=2)S8(J,Q,Q+1);return J},D4=function(J){const q=J.byteLength;if(q%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Q=0;Q<q;Q+=4)S8(J,Q,Q+3),S8(J,Q+1,Q+2);return J},I4=function(J){const q=J.byteLength;if(q%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Q=0;Q<q;Q+=8)S8(J,Q,Q+7),S8(J,Q+1,Q+6),S8(J,Q+2,Q+5),S8(J,Q+3,Q+4);return J},A4=function(J){return J},R4=function(J,q,Q=0,G=J.byteLength){const X=J.byteLength;if(Q>=X)return"";if(G<=Q)return"";if(Q<0)Q=0;if(G>X)G=X;if(Q!==0||G<X)J=J.subarray(Q,G);return E1(q).toString(J)},T4=function(J,q,Q,G,X){if(Q===void 0)X="utf8";else if(G===void 0&&typeof Q==="string")X=Q,Q=void 0;else if(X===void 0&&typeof G==="string")X=G,G=void 0;return E1(X).write(J,q,Q,G)},v4=function(J,q,Q){if(Q===void 0)Q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).setFloat64(Q,q,!0),Q+8},g4=function(J,q,Q){if(Q===void 0)Q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).setFloat32(Q,q,!0),Q+4},y4=function(J,q,Q){if(Q===void 0)Q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).setUint32(Q,q,!0),Q+4},E4=function(J,q,Q){if(Q===void 0)Q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).setInt32(Q,q,!0),Q+4},h4=function(J,q){if(q===void 0)q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).getFloat64(q,!0)},_4=function(J,q){if(q===void 0)q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).getFloat32(q,!0)},m4=function(J,q){if(q===void 0)q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).getUint32(q,!0)},b4=function(J,q){if(q===void 0)q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).getInt32(q,!0)},u4=function(J,q,Q){if(Q===void 0)Q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).setFloat64(Q,q,!1),Q+8},c4=function(J,q,Q){if(Q===void 0)Q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).setFloat32(Q,q,!1),Q+4},f4=function(J,q,Q){if(Q===void 0)Q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).setUint32(Q,q,!1),Q+4},p4=function(J,q,Q){if(Q===void 0)Q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).setInt32(Q,q,!1),Q+4},l4=function(J,q){if(q===void 0)q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).getFloat64(q,!1)},d4=function(J,q){if(q===void 0)q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).getFloat32(q,!1)},i4=function(J,q){if(q===void 0)q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).getUint32(q,!1)},o4=function(J,q){if(q===void 0)q=0;return new DataView(J.buffer,J.byteOffset,J.byteLength).getInt32(q,!1)},Y4=g5(),V4=h5(),K4=u5(),Z4=f5(),W4=d5(),bJ=new Uint8Array(Uint16Array.of(255).buffer)[0]===255;a5.exports=r5={isBuffer:i5,isEncoding:$4,alloc:z4,allocUnsafe:U4,allocUnsafeSlow:j4,byteLength:H4,compare:M4,concat:B4,copy:L4,equals:P4,fill:k4,from:UQ,includes:F4,indexOf:n5,lastIndexOf:N4,swap16:S4,swap32:D4,swap64:I4,toBuffer:A4,toString:R4,write:T4,writeDoubleLE:v4,writeFloatLE:g4,writeUInt32LE:y4,writeInt32LE:E4,readDoubleLE:h4,readFloatLE:_4,readUInt32LE:m4,readInt32LE:b4,writeDoubleBE:u4,writeFloatBE:c4,writeUInt32BE:f4,writeInt32BE:p4,readDoubleBE:l4,readFloatBE:d4,readUInt32BE:i4,readInt32BE:o4}});var t5=K0((Oz,s5)=>{var n4=jQ();s5.exports=class J{constructor(q){this.encoding=q}decode(q){return n4.toString(q,this.encoding)}flush(){return""}}});var JG=K0((wz,e5)=>{var r4=jQ();e5.exports=class J{constructor(){this.codePoint=0,this.bytesSeen=0,this.bytesNeeded=0,this.lowerBoundary=128,this.upperBoundary=191}decode(q){if(this.bytesNeeded===0){let G=!0;for(let X=Math.max(0,q.byteLength-4),Y=q.byteLength;X<Y&&G;X++)G=q[X]<=127;if(G)return r4.toString(q,"utf8")}let Q="";for(let G=0,X=q.byteLength;G<X;G++){const Y=q[G];if(this.bytesNeeded===0){if(Y<=127)Q+=String.fromCharCode(Y);else if(Y>=194&&Y<=223)this.bytesNeeded=1,this.codePoint=Y&31;else if(Y>=224&&Y<=239){if(Y===224)this.lowerBoundary=160;else if(Y===237)this.upperBoundary=159;this.bytesNeeded=2,this.codePoint=Y&15}else if(Y>=240&&Y<=244){if(Y===240)this.lowerBoundary=144;if(Y===244)this.upperBoundary=143;this.bytesNeeded=3,this.codePoint=Y&7}else Q+="\uFFFD";continue}if(Y<this.lowerBoundary||Y>this.upperBoundary){this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,Q+="\uFFFD";continue}if(this.lowerBoundary=128,this.upperBoundary=191,this.codePoint=this.codePoint<<6|Y&63,this.bytesSeen++,this.bytesSeen!==this.bytesNeeded)continue;Q+=String.fromCodePoint(this.codePoint),this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0}return Q}flush(){const q=this.bytesNeeded>0?"\uFFFD":"";return this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,q}}});var qG=K0((xz,QG)=>{var t4=function(J){switch(J=J.toLowerCase(),J){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return J;default:throw new Error("Unknown encoding: "+J)}},a4=t5(),s4=JG();QG.exports=class J{constructor(q="utf8"){switch(this.encoding=t4(q),this.encoding){case"utf8":this.decoder=new s4;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new a4(this.encoding)}}push(q){if(typeof q==="string")return q;return this.decoder.decode(q)}write(q){return this.push(q)}end(q){let Q="";if(q)Q=this.push(q);return Q+=this.decoder.flush(),Q}}});var RG=K0((Fz,AG)=>{var hZ=function(){this.stream._duplexState|=LQ,this.updateCallback()},_Z=function(J){const q=this.stream;if(J)q.destroy(J);if((q._duplexState&g0)===0)q._duplexState|=Y8,q.emit("finish");if((q._duplexState&LG)===wQ)q._duplexState|=4;if(q._duplexState&=HZ,(q._duplexState&Q1)===0)this.update();else this.updateNextTick()},xG=function(J){const q=this.stream;if(!J&&this.error!==cJ)J=this.error;if(J)q.emit("error",J);q._duplexState|=8,q.emit("close");const{_readableState:Q,_writableState:G}=q;if(Q!==null&&Q.pipeline!==null)Q.pipeline.done(q,J);if(G!==null){while(G.drains!==null&&G.drains.length>0)G.drains.shift().resolve(!1);if(G.pipeline!==null)G.pipeline.done(q,J)}},mZ=function(J){const q=this.stream;if(J)q.destroy(J);if(q._duplexState&=jZ,this.drains!==null)fZ(this.drains);if((q._duplexState&AZ)===f1){if(q._duplexState&=MZ,(q._duplexState&BQ)===BQ)q.emit("drain")}this.updateCallback()},bZ=function(J){if(J)this.stream.destroy(J);if(this.stream._duplexState&=YZ,this.readAhead===!1&&(this.stream._duplexState&u1)===0)this.stream._duplexState&=UG;this.updateCallback()},uZ=function(){if((this.stream._duplexState&e8)===0)this.stream._duplexState&=zG,this.update()},cZ=function(){if((this.stream._duplexState&Q1)===0)this.stream._duplexState&=HG,this.update()},fZ=function(J){for(let q=0;q<J.length;q++)if(--J[q].writes===0)J.shift().resolve(!0),q--},FG=function(J){const q=this.stream;if(J)q.destroy(J);if((q._duplexState&4)===0){if((q._duplexState&CZ)===0)q._duplexState|=q1;if((q._duplexState&DZ)===0)q._duplexState|=c1;q.emit("open")}if(q._duplexState&=BG,q._writableState!==null)q._writableState.updateCallback();if(q._readableState!==null)q._readableState.updateCallback()},pZ=function(J,q){if(q!==void 0&&q!==null)this.push(q);this._writableState.afterWrite(J)},lZ=function(J){if(this._readableState!==null){if(J==="data")this._duplexState|=MQ|CQ,this._readableState.updateNextTick();if(J==="readable")this._duplexState|=PQ,this._readableState.updateNextTick()}if(this._writableState!==null){if(J==="drain")this._duplexState|=BQ,this._writableState.updateNextTick()}},dZ=function(J,q){const Q=this._transformState.afterFinal;if(J)return Q(J);if(q!==null&&q!==void 0)this.push(q);this.push(null),Q(null)},iZ=function(...J){return new Promise((q,Q)=>{return SG(...J,(G)=>{if(G)return Q(G);q()})})},SG=function(J,...q){const Q=Array.isArray(J)?[...J,...q]:[J,...q],G=Q.length&&typeof Q[Q.length-1]==="function"?Q.pop():null;if(Q.length<2)throw new Error("Pipeline requires at least 2 streams");let X=Q[0],Y=null,V=null;for(let Z=1;Z<Q.length;Z++){if(Y=Q[Z],m1(X))X.pipe(Y,W);else K(X,!0,Z>1,W),X.pipe(Y);X=Y}if(G){let Z=!1;const $=m1(Y)||!!(Y._writableState&&Y._writableState.autoDestroy);if(Y.on("error",(H)=>{if(V===null)V=H}),Y.on("finish",()=>{if(Z=!0,!$)G(V)}),$)Y.on("close",()=>G(V||(Z?null:HQ)))}return Y;function K(Z,$,H,U){Z.on("error",U),Z.on("close",z);function z(){if($&&Z._readableState&&!Z._readableState.ended)return U(HQ);if(H&&Z._writableState&&!Z._writableState.ended)return U(HQ)}}function W(Z){if(!Z||V)return;V=Z;for(let $ of Q)$.destroy(Z)}},oZ=function(J){return J},DG=function(J){return!!J._readableState||!!J._writableState},m1=function(J){return typeof J._duplexState==="number"&&DG(J)},nZ=function(J){return!!J._readableState&&J._readableState.ended},rZ=function(J){return!!J._writableState&&J._writableState.ended},aZ=function(J,q={}){const Q=J._readableState&&J._readableState.error||J._writableState&&J._writableState.error;return!q.all&&Q===cJ?null:Q},sZ=function(J){return m1(J)&&J.readable},tZ=function(J){return(J._duplexState&1)!==1||(J._duplexState&lJ)!==0},eZ=function(J){return typeof J==="object"&&J!==null&&typeof J.byteLength==="number"},IG=function(J){return eZ(J)?J.byteLength:1024},KG=function(){},JW=function(){this.destroy(new Error("Stream aborted."))},QW=function(J){return J._writev!==FQ.prototype._writev&&J._writev!==iJ.prototype._writev},{EventEmitter:e4}=(N5(),fQ(F5)),cJ=new Error("Stream was destroyed"),HQ=new Error("Premature close"),ZG=R5(),JZ=qG(),o=(1<<29)-1,WG=o^1,QZ=o^2,b1=1<<4,e8=2<<4,q1=4<<4,X8=8<<4,u1=16<<4,LQ=32<<4,D8=64<<4,MQ=128<<4,PQ=256<<4,kQ=512<<4,N0=1024<<4,G8=2048<<4,fJ=4096<<4,I8=8192<<4,$G=u1|LQ,qZ=b1|fJ,GZ=q1|b1,XZ=PQ|X8,CQ=u1|I8,YZ=o^b1,VZ=o^q1,KZ=o^(q1|fJ),GG=o^fJ,ZZ=o^u1,WZ=o^(X8|kQ),$Z=o^D8,XG=o^$G,zG=o^G8,zZ=o^e8,UG=o^I8,UZ=o^CQ,l0=1<<18,Q1=2<<18,c1=4<<18,A8=8<<18,f1=16<<18,Y8=32<<18,BQ=64<<18,J1=128<<18,OQ=256<<18,R8=512<<18,pJ=1024<<18,jZ=o^(l0|OQ),jG=o^c1,HZ=o^(l0|R8),MZ=o^f1,BZ=o^A8,HG=o^J1,LZ=o^Q1,MG=o^pJ,h1=b1|l0,BG=o^h1,wQ=N0|Y8,g0=4|8|2,L0=g0|1,LG=g0|wQ,PZ=jG&VZ,lJ=J1|G8,kZ=lJ&BG,PG=L0|kZ,CZ=L0|D8|N0,YG=L0|N0|X8,OZ=L0|D8|X8,wZ=L0|PQ|X8|kQ,xZ=L0|b1|D8|N0|fJ|I8,FZ=g0|D8|N0,NZ=e8|L0|G8|q1,SZ=G8|1,DZ=L0|R8|Y8,IZ=A8|f1,kG=A8|l0,AZ=A8|f1|L0|l0,VG=L0|l0|A8|pJ,RZ=c1|l0,TZ=l0|OQ,vZ=L0|R8|kG|Y8,gZ=f1|g0|R8|Y8,yZ=Q1|L0|J1|c1,EZ=R8|Y8|g0,uJ=Symbol.asyncIterator||Symbol("asyncIterator");class xQ{constructor(J,{highWaterMark:q=16384,map:Q=null,mapWritable:G,byteLength:X,byteLengthWritable:Y}={}){this.stream=J,this.queue=new ZG,this.highWaterMark=q,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=Y||X||IG,this.map=G||Q,this.afterWrite=mZ.bind(this),this.afterUpdateNextTick=cZ.bind(this)}get ended(){return(this.stream._duplexState&Y8)!==0}push(J){if((this.stream._duplexState&EZ)!==0)return!1;if(this.map!==null)J=this.map(J);if(this.buffered+=this.byteLength(J),this.queue.push(J),this.buffered<this.highWaterMark)return this.stream._duplexState|=A8,!0;return this.stream._duplexState|=IZ,!1}shift(){const J=this.queue.shift();if(this.buffered-=this.byteLength(J),this.buffered===0)this.stream._duplexState&=BZ;return J}end(J){if(typeof J==="function")this.stream.once("finish",J);else if(J!==void 0&&J!==null)this.push(J);this.stream._duplexState=(this.stream._duplexState|R8)&jG}autoBatch(J,q){const Q=[],G=this.stream;Q.push(J);while((G._duplexState&VG)===kG)Q.push(G._writableState.shift());if((G._duplexState&L0)!==0)return q(null);G._writev(Q,q)}update(){const J=this.stream;J._duplexState|=Q1;do{while((J._duplexState&VG)===A8){const q=this.shift();J._duplexState|=TZ,J._write(q,this.afterWrite)}if((J._duplexState&RZ)===0)this.updateNonPrimary()}while(this.continueUpdate()===!0);J._duplexState&=LZ}updateNonPrimary(){const J=this.stream;if((J._duplexState&vZ)===R8){J._duplexState=J._duplexState|l0,J._final(_Z.bind(this));return}if((J._duplexState&g0)===4){if((J._duplexState&lJ)===0)J._duplexState|=h1,J._destroy(xG.bind(this));return}if((J._duplexState&PG)===1)J._duplexState=(J._duplexState|h1)&WG,J._open(FG.bind(this))}continueUpdate(){if((this.stream._duplexState&J1)===0)return!1;return this.stream._duplexState&=HG,!0}updateCallback(){if((this.stream._duplexState&yZ)===c1)this.update();else this.updateNextTick()}updateNextTick(){if((this.stream._duplexState&J1)!==0)return;if(this.stream._duplexState|=J1,(this.stream._duplexState&Q1)===0)queueMicrotask(this.afterUpdateNextTick)}}class CG{constructor(J,{highWaterMark:q=16384,map:Q=null,mapReadable:G,byteLength:X,byteLengthReadable:Y}={}){this.stream=J,this.queue=new ZG,this.highWaterMark=q===0?1:q,this.buffered=0,this.readAhead=q>0,this.error=null,this.pipeline=null,this.byteLength=Y||X||IG,this.map=G||Q,this.pipeTo=null,this.afterRead=bZ.bind(this),this.afterUpdateNextTick=uZ.bind(this)}get ended(){return(this.stream._duplexState&N0)!==0}pipe(J,q){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof q!=="function")q=null;if(this.stream._duplexState|=LQ,this.pipeTo=J,this.pipeline=new wG(this.stream,J,q),q)this.stream.on("error",KG);if(m1(J)){if(J._writableState.pipeline=this.pipeline,q)J.on("error",KG);J.on("finish",this.pipeline.finished.bind(this.pipeline))}else{const Q=this.pipeline.done.bind(this.pipeline,J),G=this.pipeline.done.bind(this.pipeline,J,null);J.on("error",Q),J.on("close",G),J.on("finish",this.pipeline.finished.bind(this.pipeline))}J.on("drain",hZ.bind(this)),this.stream.emit("piping",J),J.emit("pipe",this.stream)}push(J){const q=this.stream;if(J===null)return this.highWaterMark=0,q._duplexState=(q._duplexState|D8)&KZ,!1;if(this.map!==null){if(J=this.map(J),J===null)return q._duplexState&=GG,this.buffered<this.highWaterMark}return this.buffered+=this.byteLength(J),this.queue.push(J),q._duplexState=(q._duplexState|X8)&GG,this.buffered<this.highWaterMark}shift(){const J=this.queue.shift();if(this.buffered-=this.byteLength(J),this.buffered===0)this.stream._duplexState&=WZ;return J}unshift(J){const q=[this.map!==null?this.map(J):J];while(this.buffered>0)q.push(this.shift());for(let Q=0;Q<q.length-1;Q++){const G=q[Q];this.buffered+=this.byteLength(G),this.queue.push(G)}this.push(q[q.length-1])}read(){const J=this.stream;if((J._duplexState&YG)===X8){const q=this.shift();if(this.pipeTo!==null&&this.pipeTo.write(q)===!1)J._duplexState&=XG;if((J._duplexState&MQ)!==0)J.emit("data",q);return q}if(this.readAhead===!1)J._duplexState|=I8,this.updateNextTick();return null}drain(){const J=this.stream;while((J._duplexState&YG)===X8&&(J._duplexState&$G)!==0){const q=this.shift();if(this.pipeTo!==null&&this.pipeTo.write(q)===!1)J._duplexState&=XG;if((J._duplexState&MQ)!==0)J.emit("data",q)}}update(){const J=this.stream;J._duplexState|=e8;do{this.drain();while(this.buffered<this.highWaterMark&&(J._duplexState&xZ)===I8)J._duplexState|=qZ,J._read(this.afterRead),this.drain();if((J._duplexState&wZ)===XZ)J._duplexState|=kQ,J.emit("readable");if((J._duplexState&GZ)===0)this.updateNonPrimary()}while(this.continueUpdate()===!0);J._duplexState&=zZ}updateNonPrimary(){const J=this.stream;if((J._duplexState&OZ)===D8){if(J._duplexState=(J._duplexState|N0)&$Z,J.emit("end"),(J._duplexState&LG)===wQ)J._duplexState|=4;if(this.pipeTo!==null)this.pipeTo.end()}if((J._duplexState&g0)===4){if((J._duplexState&lJ)===0)J._duplexState|=h1,J._destroy(xG.bind(this));return}if((J._duplexState&PG)===1)J._duplexState=(J._duplexState|h1)&WG,J._open(FG.bind(this))}continueUpdate(){if((this.stream._duplexState&G8)===0)return!1;return this.stream._duplexState&=zG,!0}updateCallback(){if((this.stream._duplexState&NZ)===q1)this.update();else this.updateNextTick()}updateNextTickIfOpen(){if((this.stream._duplexState&SZ)!==0)return;if(this.stream._duplexState|=G8,(this.stream._duplexState&e8)===0)queueMicrotask(this.afterUpdateNextTick)}updateNextTick(){if((this.stream._duplexState&G8)!==0)return;if(this.stream._duplexState|=G8,(this.stream._duplexState&e8)===0)queueMicrotask(this.afterUpdateNextTick)}}class OG{constructor(J){this.data=null,this.afterTransform=pZ.bind(J),this.afterFinal=null}}class wG{constructor(J,q,Q){this.from=J,this.to=q,this.afterPipe=Q,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(J,q){if(q)this.error=q;if(J===this.to){if(this.to=null,this.from!==null){if((this.from._duplexState&N0)===0||!this.pipeToFinished)this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}}if(J===this.from){if(this.from=null,this.to!==null){if((J._duplexState&N0)===0)this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}}if(this.afterPipe!==null)this.afterPipe(this.error);this.to=this.from=this.afterPipe=null}}class dJ extends e4{constructor(J){super();if(this._duplexState=0,this._readableState=null,this._writableState=null,J){if(J.open)this._open=J.open;if(J.destroy)this._destroy=J.destroy;if(J.predestroy)this._predestroy=J.predestroy;if(J.signal)J.signal.addEventListener("abort",JW.bind(this))}this.on("newListener",lZ)}_open(J){J(null)}_destroy(J){J(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&8)!==0}get destroying(){return(this._duplexState&g0)!==0}destroy(J){if((this._duplexState&g0)===0){if(!J)J=cJ;if(this._duplexState=(this._duplexState|4)&PZ,this._readableState!==null)this._readableState.highWaterMark=0,this._readableState.error=J;if(this._writableState!==null)this._writableState.highWaterMark=0,this._writableState.error=J;if(this._duplexState|=2,this._predestroy(),this._duplexState&=QZ,this._readableState!==null)this._readableState.updateNextTick();if(this._writableState!==null)this._writableState.updateNextTick()}}}class _1 extends dJ{constructor(J){super(J);if(this._duplexState|=1|Y8|I8,this._readableState=new CG(this,J),J){if(this._readableState.readAhead===!1)this._duplexState&=UG;if(J.read)this._read=J.read;if(J.eagerOpen)this._readableState.updateNextTick();if(J.encoding)this.setEncoding(J.encoding)}}setEncoding(J){const q=new JZ(J),Q=this._readableState.map||oZ;return this._readableState.map=G,this;function G(X){const Y=q.push(X);return Y===""&&(X.byteLength!==0||q.remaining>0)?null:Q(Y)}}_read(J){J(null)}pipe(J,q){return this._readableState.updateNextTick(),this._readableState.pipe(J,q),J}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(J){return this._readableState.updateNextTickIfOpen(),this._readableState.push(J)}unshift(J){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(J)}resume(){return this._duplexState|=CQ,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?UZ:ZZ,this}static _fromAsyncIterator(J,q){let Q;const G=new _1({...q,read(Y){J.next().then(X).then(Y.bind(null,null)).catch(Y)},predestroy(){Q=J.return()},destroy(Y){if(!Q)return Y(null);Q.then(Y.bind(null,null)).catch(Y)}});return G;function X(Y){if(Y.done)G.push(null);else G.push(Y.value)}}static from(J,q){if(sZ(J))return J;if(J[uJ])return this._fromAsyncIterator(J[uJ](),q);if(!Array.isArray(J))J=J===void 0?[]:[J];let Q=0;return new _1({...q,read(G){this.push(Q===J.length?null:J[Q++]),G(null)}})}static isBackpressured(J){return(J._duplexState&FZ)!==0||J._readableState.buffered>=J._readableState.highWaterMark}static isPaused(J){return(J._duplexState&u1)===0}[uJ](){const J=this;let q=null,Q=null,G=null;return this.on("error",(W)=>{q=W}),this.on("readable",X),this.on("close",Y),{[uJ](){return this},next(){return new Promise(function(W,Z){Q=W,G=Z;const $=J.read();if($!==null)V($);else if((J._duplexState&8)!==0)V(null)})},return(){return K(null)},throw(W){return K(W)}};function X(){if(Q!==null)V(J.read())}function Y(){if(Q!==null)V(null)}function V(W){if(G===null)return;if(q)G(q);else if(W===null&&(J._duplexState&N0)===0)G(cJ);else Q({value:W,done:W===null});G=Q=null}function K(W){return J.destroy(W),new Promise((Z,$)=>{if(J._duplexState&8)return Z({value:void 0,done:!0});J.once("close",function(){if(W)$(W);else Z({value:void 0,done:!0})})})}}}class FQ extends dJ{constructor(J){super(J);if(this._duplexState|=1|N0,this._writableState=new xQ(this,J),J){if(J.writev)this._writev=J.writev;if(J.write)this._write=J.write;if(J.final)this._final=J.final;if(J.eagerOpen)this._writableState.updateNextTick()}}cork(){this._duplexState|=pJ}uncork(){this._duplexState&=MG,this._writableState.updateNextTick()}_writev(J,q){q(null)}_write(J,q){this._writableState.autoBatch(J,q)}_final(J){J(null)}static isBackpressured(J){return(J._duplexState&gZ)!==0}static drained(J){if(J.destroyed)return Promise.resolve(!1);const q=J._writableState,G=(QW(J)?Math.min(1,q.queue.length):q.queue.length)+(J._duplexState&OQ?1:0);if(G===0)return Promise.resolve(!0);if(q.drains===null)q.drains=[];return new Promise((X)=>{q.drains.push({writes:G,resolve:X})})}write(J){return this._writableState.updateNextTick(),this._writableState.push(J)}end(J){return this._writableState.updateNextTick(),this._writableState.end(J),this}}class iJ extends _1{constructor(J){super(J);if(this._duplexState=1|this._duplexState&I8,this._writableState=new xQ(this,J),J){if(J.writev)this._writev=J.writev;if(J.write)this._write=J.write;if(J.final)this._final=J.final}}cork(){this._duplexState|=pJ}uncork(){this._duplexState&=MG,this._writableState.updateNextTick()}_writev(J,q){q(null)}_write(J,q){this._writableState.autoBatch(J,q)}_final(J){J(null)}write(J){return this._writableState.updateNextTick(),this._writableState.push(J)}end(J){return this._writableState.updateNextTick(),this._writableState.end(J),this}}class NQ extends iJ{constructor(J){super(J);if(this._transformState=new OG(this),J){if(J.transform)this._transform=J.transform;if(J.flush)this._flush=J.flush}}_write(J,q){if(this._readableState.buffered>=this._readableState.highWaterMark)this._transformState.data=J;else this._transform(J,this._transformState.afterTransform)}_read(J){if(this._transformState.data!==null){const q=this._transformState.data;this._transformState.data=null,J(null),this._transform(q,this._transformState.afterTransform)}else J(null)}destroy(J){if(super.destroy(J),this._transformState.data!==null)this._transformState.data=null,this._transformState.afterTransform()}_transform(J,q){q(null,J)}_flush(J){J(null)}_final(J){this._transformState.afterFinal=J,this._flush(dZ.bind(this))}}class NG extends NQ{}AG.exports={pipeline:SG,pipelinePromise:iZ,isStream:DG,isStreamx:m1,isEnded:nZ,isFinished:rZ,isDisturbed:tZ,getStreamError:aZ,Stream:dJ,Writable:FQ,Readable:_1,Duplex:iJ,Transform:NQ,PassThrough:NG}});var SQ=K0((Nz,vG)=>{var TG=function(J,q){for(let Q in q)Object.defineProperty(J,Q,{value:q[Q],enumerable:!0,configurable:!0});return J},qW=function(J,q,Q){if(!J||typeof J==="string")throw new TypeError("Please pass an Error to err-code");if(!Q)Q={};if(typeof q==="object")Q=q,q="";if(q)Q.code=q;try{return TG(J,Q)}catch(G){Q.message=J.message,Q.stack=J.stack;const X=function(){};return X.prototype=Object.create(Object.getPrototypeOf(J)),TG(new X,Q)}};vG.exports=qW});function lQ(J){const q=J.length;let Q=0,G=0;while(G<q){let X=J.charCodeAt(G++);if((X&4294967168)===0){Q++;continue}else if((X&4294965248)===0)Q+=2;else{if(X>=55296&&X<=56319){if(G<q){const Y=J.charCodeAt(G);if((Y&64512)===56320)++G,X=((X&1023)<<10)+(Y&1023)+65536}}if((X&4294901760)===0)Q+=3;else Q+=4}}return Q}function P7(J,q,Q){const G=J.length;let X=Q,Y=0;while(Y<G){let V=J.charCodeAt(Y++);if((V&4294967168)===0){q[X++]=V;continue}else if((V&4294965248)===0)q[X++]=V>>6&31|192;else{if(V>=55296&&V<=56319){if(Y<G){const K=J.charCodeAt(Y);if((K&64512)===56320)++Y,V=((V&1023)<<10)+(K&1023)+65536}}if((V&4294901760)===0)q[X++]=V>>12&15|224,q[X++]=V>>6&63|128;else q[X++]=V>>18&7|240,q[X++]=V>>12&63|128,q[X++]=V>>6&63|128}q[X++]=V&63|128}}function O7(J,q,Q){k7.encodeInto(J,q.subarray(Q))}function dQ(J,q,Q){if(J.length>C7)O7(J,q,Q);else P7(J,q,Q)}function tJ(J,q,Q){let G=q;const X=G+Q,Y=[];let V="";while(G<X){const K=J[G++];if((K&128)===0)Y.push(K);else if((K&224)===192){const W=J[G++]&63;Y.push((K&31)<<6|W)}else if((K&240)===224){const W=J[G++]&63,Z=J[G++]&63;Y.push((K&31)<<12|W<<6|Z)}else if((K&248)===240){const W=J[G++]&63,Z=J[G++]&63,$=J[G++]&63;let H=(K&7)<<18|W<<12|Z<<6|$;if(H>65535)H-=65536,Y.push(H>>>10&1023|55296),H=56320|H&1023;Y.push(H)}else Y.push(K);if(Y.length>=w7)V+=String.fromCharCode(...Y),Y.length=0}if(Y.length>0)V+=String.fromCharCode(...Y);return V}function N7(J,q,Q){const G=J.subarray(q,q+Q);return x7.decode(G)}function iQ(J,q,Q){if(Q>F7)return N7(J,q,Q);else return tJ(J,q,Q)}var k7=new TextEncoder,C7=50,w7=4096,x7=new TextDecoder,F7=200;class y8{constructor(J,q){this.type=J,this.data=q}}class Z0 extends Error{constructor(J){super(J);const q=Object.create(Z0.prototype);Object.setPrototypeOf(this,q),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Z0.name})}}function oQ(J,q,Q){const G=Q/4294967296,X=Q;J.setUint32(q,G),J.setUint32(q+4,X)}function n1(J,q,Q){const G=Math.floor(Q/4294967296),X=Q;J.setUint32(q,G),J.setUint32(q+4,X)}function r1(J,q){const Q=J.getInt32(q),G=J.getUint32(q+4);return Q*4294967296+G}function nQ(J,q){const Q=J.getUint32(q),G=J.getUint32(q+4);return Q*4294967296+G}var E8=4294967295;function A7({sec:J,nsec:q}){if(J>=0&&q>=0&&J<=I7)if(q===0&&J<=D7){const Q=new Uint8Array(4);return new DataView(Q.buffer).setUint32(0,J),Q}else{const Q=J/4294967296,G=J&4294967295,X=new Uint8Array(8),Y=new DataView(X.buffer);return Y.setUint32(0,q<<2|Q&3),Y.setUint32(4,G),X}else{const Q=new Uint8Array(12),G=new DataView(Q.buffer);return G.setUint32(0,q),n1(G,4,J),Q}}function R7(J){const q=J.getTime(),Q=Math.floor(q/1000),G=(q-Q*1000)*1e6,X=Math.floor(G/1e9);return{sec:Q+X,nsec:G-X*1e9}}function T7(J){if(J instanceof Date){const q=R7(J);return A7(q)}else return null}function v7(J){const q=new DataView(J.buffer,J.byteOffset,J.byteLength);switch(J.byteLength){case 4:return{sec:q.getUint32(0),nsec:0};case 8:{const Q=q.getUint32(0),G=q.getUint32(4),X=(Q&3)*4294967296+G,Y=Q>>>2;return{sec:X,nsec:Y}}case 12:{const Q=r1(q,4),G=q.getUint32(0);return{sec:Q,nsec:G}}default:throw new Z0(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${J.length}`)}}function g7(J){const q=v7(J);return new Date(q.sec*1000+q.nsec/1e6)}var S7=-1,D7=4294967295,I7=17179869183,rQ={type:S7,encode:T7,decode:g7};class K8{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(rQ)}register({type:J,encode:q,decode:Q}){if(J>=0)this.encoders[J]=q,this.decoders[J]=Q;else{const G=-1-J;this.builtInEncoders[G]=q,this.builtInDecoders[G]=Q}}tryToEncode(J,q){for(let Q=0;Q<this.builtInEncoders.length;Q++){const G=this.builtInEncoders[Q];if(G!=null){const X=G(J,q);if(X!=null){const Y=-1-Q;return new y8(Y,X)}}}for(let Q=0;Q<this.encoders.length;Q++){const G=this.encoders[Q];if(G!=null){const X=G(J,q);if(X!=null)return new y8(Q,X)}}if(J instanceof y8)return J;return null}decode(J,q,Q){const G=q<0?this.builtInDecoders[-1-q]:this.decoders[q];if(G)return G(J,q,Q);else return new y8(q,J)}}K8.defaultCodec=new K8;var y7=function(J){return J instanceof ArrayBuffer||typeof SharedArrayBuffer!=="undefined"&&J instanceof SharedArrayBuffer};function Y1(J){if(J instanceof Uint8Array)return J;else if(ArrayBuffer.isView(J))return new Uint8Array(J.buffer,J.byteOffset,J.byteLength);else if(y7(J))return new Uint8Array(J);else return Uint8Array.from(J)}var aQ=function(J,q,Q){if(q!==null&&q!==void 0){if(typeof q!=="object"&&typeof q!=="function")throw new TypeError("Object expected.");var G,X;if(Q){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");G=q[Symbol.asyncDispose]}if(G===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");if(G=q[Symbol.dispose],Q)X=G}if(typeof G!=="function")throw new TypeError("Object not disposable.");if(X)G=function(){try{X.call(this)}catch(Y){return Promise.reject(Y)}};J.stack.push({value:q,dispose:G,async:Q})}else if(Q)J.stack.push({async:!0});return q},sQ=function(J){return function(q){function Q(V){q.error=q.hasError?new J(V,q.error,"An error was suppressed during disposal."):V,q.hasError=!0}var G,X=0;function Y(){while(G=q.stack.pop())try{if(!G.async&&X===1)return X=0,q.stack.push(G),Promise.resolve().then(Y);if(G.dispose){var V=G.dispose.call(G.value);if(G.async)return X|=2,Promise.resolve(V).then(Y,function(K){return Q(K),Y()})}else X|=1}catch(K){Q(K)}if(X===1)return q.hasError?Promise.reject(q.error):Promise.resolve();if(q.hasError)throw q.error}return Y()}}(typeof SuppressedError==="function"?SuppressedError:function(J,q,Q){var G=new Error(Q);return G.name="SuppressedError",G.error=J,G.suppressed=q,G}),E7=100,h7=2048;class a1{constructor(J){this.entered=!1,this.extensionCodec=J?.extensionCodec??K8.defaultCodec,this.context=J?.context,this.useBigInt64=J?.useBigInt64??!1,this.maxDepth=J?.maxDepth??E7,this.initialBufferSize=J?.initialBufferSize??h7,this.sortKeys=J?.sortKeys??!1,this.forceFloat32=J?.forceFloat32??!1,this.ignoreUndefined=J?.ignoreUndefined??!1,this.forceIntegerToFloat=J?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new a1({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}enteringGuard(){return this.entered=!0,{[Symbol.dispose]:()=>{this.entered=!1}}}encodeSharedRef(J){const q={stack:[],error:void 0,hasError:!1};try{if(this.entered)return this.clone().encodeSharedRef(J);const Q=aQ(q,this.enteringGuard(),!1);return this.reinitializeState(),this.doEncode(J,1),this.bytes.subarray(0,this.pos)}catch(Q){q.error=Q,q.hasError=!0}finally{sQ(q)}}encode(J){const q={stack:[],error:void 0,hasError:!1};try{if(this.entered)return this.clone().encode(J);const Q=aQ(q,this.enteringGuard(),!1);return this.reinitializeState(),this.doEncode(J,1),this.bytes.slice(0,this.pos)}catch(Q){q.error=Q,q.hasError=!0}finally{sQ(q)}}doEncode(J,q){if(q>this.maxDepth)throw new Error(`Too deep objects in depth ${q}`);if(J==null)this.encodeNil();else if(typeof J==="boolean")this.encodeBoolean(J);else if(typeof J==="number")if(!this.forceIntegerToFloat)this.encodeNumber(J);else this.encodeNumberAsFloat(J);else if(typeof J==="string")this.encodeString(J);else if(this.useBigInt64&&typeof J==="bigint")this.encodeBigInt64(J);else this.encodeObject(J,q)}ensureBufferSizeToWrite(J){const q=this.pos+J;if(this.view.byteLength<q)this.resizeBuffer(q*2)}resizeBuffer(J){const q=new ArrayBuffer(J),Q=new Uint8Array(q),G=new DataView(q);Q.set(this.bytes),this.view=G,this.bytes=Q}encodeNil(){this.writeU8(192)}encodeBoolean(J){if(J===!1)this.writeU8(194);else this.writeU8(195)}encodeNumber(J){if(!this.forceIntegerToFloat&&Number.isSafeInteger(J))if(J>=0)if(J<128)this.writeU8(J);else if(J<256)this.writeU8(204),this.writeU8(J);else if(J<65536)this.writeU8(205),this.writeU16(J);else if(J<4294967296)this.writeU8(206),this.writeU32(J);else if(!this.useBigInt64)this.writeU8(207),this.writeU64(J);else this.encodeNumberAsFloat(J);else if(J>=-32)this.writeU8(224|J+32);else if(J>=-128)this.writeU8(208),this.writeI8(J);else if(J>=-32768)this.writeU8(209),this.writeI16(J);else if(J>=-2147483648)this.writeU8(210),this.writeI32(J);else if(!this.useBigInt64)this.writeU8(211),this.writeI64(J);else this.encodeNumberAsFloat(J);else this.encodeNumberAsFloat(J)}encodeNumberAsFloat(J){if(this.forceFloat32)this.writeU8(202),this.writeF32(J);else this.writeU8(203),this.writeF64(J)}encodeBigInt64(J){if(J>=BigInt(0))this.writeU8(207),this.writeBigUint64(J);else this.writeU8(211),this.writeBigInt64(J)}writeStringHeader(J){if(J<32)this.writeU8(160+J);else if(J<256)this.writeU8(217),this.writeU8(J);else if(J<65536)this.writeU8(218),this.writeU16(J);else if(J<4294967296)this.writeU8(219),this.writeU32(J);else throw new Error(`Too long string: ${J} bytes in UTF-8`)}encodeString(J){const Q=lQ(J);this.ensureBufferSizeToWrite(5+Q),this.writeStringHeader(Q),dQ(J,this.bytes,this.pos),this.pos+=Q}encodeObject(J,q){const Q=this.extensionCodec.tryToEncode(J,this.context);if(Q!=null)this.encodeExtension(Q);else if(Array.isArray(J))this.encodeArray(J,q);else if(ArrayBuffer.isView(J))this.encodeBinary(J);else if(typeof J==="object")this.encodeMap(J,q);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(J)}`)}encodeBinary(J){const q=J.byteLength;if(q<256)this.writeU8(196),this.writeU8(q);else if(q<65536)this.writeU8(197),this.writeU16(q);else if(q<4294967296)this.writeU8(198),this.writeU32(q);else throw new Error(`Too large binary: ${q}`);const Q=Y1(J);this.writeU8a(Q)}encodeArray(J,q){const Q=J.length;if(Q<16)this.writeU8(144+Q);else if(Q<65536)this.writeU8(220),this.writeU16(Q);else if(Q<4294967296)this.writeU8(221),this.writeU32(Q);else throw new Error(`Too large array: ${Q}`);for(let G of J)this.doEncode(G,q+1)}countWithoutUndefined(J,q){let Q=0;for(let G of q)if(J[G]!==void 0)Q++;return Q}encodeMap(J,q){const Q=Object.keys(J);if(this.sortKeys)Q.sort();const G=this.ignoreUndefined?this.countWithoutUndefined(J,Q):Q.length;if(G<16)this.writeU8(128+G);else if(G<65536)this.writeU8(222),this.writeU16(G);else if(G<4294967296)this.writeU8(223),this.writeU32(G);else throw new Error(`Too large map object: ${G}`);for(let X of Q){const Y=J[X];if(!(this.ignoreUndefined&&Y===void 0))this.encodeString(X),this.doEncode(Y,q+1)}}encodeExtension(J){if(typeof J.data==="function"){const Q=J.data(this.pos+6),G=Q.length;if(G>=4294967296)throw new Error(`Too large extension object: ${G}`);this.writeU8(201),this.writeU32(G),this.writeI8(J.type),this.writeU8a(Q);return}const q=J.data.length;if(q===1)this.writeU8(212);else if(q===2)this.writeU8(213);else if(q===4)this.writeU8(214);else if(q===8)this.writeU8(215);else if(q===16)this.writeU8(216);else if(q<256)this.writeU8(199),this.writeU8(q);else if(q<65536)this.writeU8(200),this.writeU16(q);else if(q<4294967296)this.writeU8(201),this.writeU32(q);else throw new Error(`Too large extension object: ${q}`);this.writeI8(J.type),this.writeU8a(J.data)}writeU8(J){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,J),this.pos++}writeU8a(J){const q=J.length;this.ensureBufferSizeToWrite(q),this.bytes.set(J,this.pos),this.pos+=q}writeI8(J){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,J),this.pos++}writeU16(J){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,J),this.pos+=2}writeI16(J){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,J),this.pos+=2}writeU32(J){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,J),this.pos+=4}writeI32(J){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,J),this.pos+=4}writeF32(J){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,J),this.pos+=4}writeF64(J){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,J),this.pos+=8}writeU64(J){this.ensureBufferSizeToWrite(8),oQ(this.view,this.pos,J),this.pos+=8}writeI64(J){this.ensureBufferSizeToWrite(8),n1(this.view,this.pos,J),this.pos+=8}writeBigUint64(J){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,J),this.pos+=8}writeBigInt64(J){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,J),this.pos+=8}}function E0(J,q){return new a1(q).encodeSharedRef(J)}function s1(J){return`${J<0?"-":""}0x${Math.abs(J).toString(16).padStart(2,"0")}`}var _7=16,m7=16;class eJ{constructor(J=_7,q=m7){this.hit=0,this.miss=0,this.maxKeyLength=J,this.maxLengthPerKey=q,this.caches=[];for(let Q=0;Q<this.maxKeyLength;Q++)this.caches.push([])}canBeCached(J){return J>0&&J<=this.maxKeyLength}find(J,q,Q){const G=this.caches[Q-1];J:for(let X of G){const Y=X.bytes;for(let V=0;V<Q;V++)if(Y[V]!==J[q+V])continue J;return X.str}return null}store(J,q){const Q=this.caches[J.length-1],G={bytes:J,str:q};if(Q.length>=this.maxLengthPerKey)Q[Math.random()*Q.length|0]=G;else Q.push(G)}decode(J,q,Q){const G=this.find(J,q,Q);if(G!=null)return this.hit++,G;this.miss++;const X=tJ(J,q,Q),Y=Uint8Array.prototype.slice.call(J,q,q+Q);return this.store(Y,X),X}}var t1=function(J,q,Q){if(q!==null&&q!==void 0){if(typeof q!=="object"&&typeof q!=="function")throw new TypeError("Object expected.");var G,X;if(Q){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");G=q[Symbol.asyncDispose]}if(G===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");if(G=q[Symbol.dispose],Q)X=G}if(typeof G!=="function")throw new TypeError("Object not disposable.");if(X)G=function(){try{X.call(this)}catch(Y){return Promise.reject(Y)}};J.stack.push({value:q,dispose:G,async:Q})}else if(Q)J.stack.push({async:!0});return q},e1=function(J){return function(q){function Q(V){q.error=q.hasError?new J(V,q.error,"An error was suppressed during disposal."):V,q.hasError=!0}var G,X=0;function Y(){while(G=q.stack.pop())try{if(!G.async&&X===1)return X=0,q.stack.push(G),Promise.resolve().then(Y);if(G.dispose){var V=G.dispose.call(G.value);if(G.async)return X|=2,Promise.resolve(V).then(Y,function(K){return Q(K),Y()})}else X|=1}catch(K){Q(K)}if(X===1)return q.hasError?Promise.reject(q.error):Promise.resolve();if(q.hasError)throw q.error}return Y()}}(typeof SuppressedError==="function"?SuppressedError:function(J,q,Q){var G=new Error(Q);return G.name="SuppressedError",G.error=J,G.suppressed=q,G}),J9="array",K1="map_key",eQ="map_value",b7=(J)=>{if(typeof J==="string"||typeof J==="number")return J;throw new Z0("The type of key must be string or number but "+typeof J)};class Jq{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(J){const q=this.getUninitializedStateFromPool();q.type=J9,q.position=0,q.size=J,q.array=new Array(J)}pushMapState(J){const q=this.getUninitializedStateFromPool();q.type=K1,q.readCount=0,q.size=J,q.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const J={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(J)}return this.stack[this.stackHeadPosition]}release(J){if(this.stack[this.stackHeadPosition]!==J)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(J.type===J9){const Q=J;Q.size=0,Q.array=void 0,Q.position=0,Q.type=void 0}if(J.type===K1||J.type===eQ){const Q=J;Q.size=0,Q.map=void 0,Q.readCount=0,Q.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}var V1=-1,Q9=new DataView(new ArrayBuffer(0)),u7=new Uint8Array(Q9.buffer);try{Q9.getInt8(0)}catch(J){if(!(J instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}var tQ=new RangeError("Insufficient data"),c7=new eJ;class JJ{constructor(J){this.totalPos=0,this.pos=0,this.view=Q9,this.bytes=u7,this.headByte=V1,this.stack=new Jq,this.entered=!1,this.extensionCodec=J?.extensionCodec??K8.defaultCodec,this.context=J?.context,this.useBigInt64=J?.useBigInt64??!1,this.rawStrings=J?.rawStrings??!1,this.maxStrLength=J?.maxStrLength??E8,this.maxBinLength=J?.maxBinLength??E8,this.maxArrayLength=J?.maxArrayLength??E8,this.maxMapLength=J?.maxMapLength??E8,this.maxExtLength=J?.maxExtLength??E8,this.keyDecoder=J?.keyDecoder!==void 0?J.keyDecoder:c7,this.mapKeyConverter=J?.mapKeyConverter??b7}clone(){return new JJ({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=V1,this.stack.reset()}setBuffer(J){const q=Y1(J);this.bytes=q,this.view=new DataView(q.buffer,q.byteOffset,q.byteLength),this.pos=0}appendBuffer(J){if(this.headByte===V1&&!this.hasRemaining(1))this.setBuffer(J);else{const q=this.bytes.subarray(this.pos),Q=Y1(J),G=new Uint8Array(q.length+Q.length);G.set(q),G.set(Q,q.length),this.setBuffer(G)}}hasRemaining(J){return this.view.byteLength-this.pos>=J}createExtraByteError(J){const{view:q,pos:Q}=this;return new RangeError(`Extra ${q.byteLength-Q} of ${q.byteLength} byte(s) found at buffer[${J}]`)}enteringGuard(){return this.entered=!0,{[Symbol.dispose]:()=>{this.entered=!1}}}decode(J){const q={stack:[],error:void 0,hasError:!1};try{if(this.entered)return this.clone().decode(J);const Q=t1(q,this.enteringGuard(),!1);this.reinitializeState(),this.setBuffer(J);const G=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return G}catch(Q){q.error=Q,q.hasError=!0}finally{e1(q)}}*decodeMulti(J){const q={stack:[],error:void 0,hasError:!1};try{if(this.entered){yield*this.clone().decodeMulti(J);return}const Q=t1(q,this.enteringGuard(),!1);this.reinitializeState(),this.setBuffer(J);while(this.hasRemaining(1))yield this.doDecodeSync()}catch(Q){q.error=Q,q.hasError=!0}finally{e1(q)}}async decodeAsync(J){const q={stack:[],error:void 0,hasError:!1};try{if(this.entered)return this.clone().decodeAsync(J);const Q=t1(q,this.enteringGuard(),!1);let G=!1,X;for await(let W of J){if(G)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(W);try{X=this.doDecodeSync(),G=!0}catch(Z){if(!(Z instanceof RangeError))throw Z}this.totalPos+=this.pos}if(G){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return X}const{headByte:Y,pos:V,totalPos:K}=this;throw new RangeError(`Insufficient data in parsing ${s1(Y)} at ${K} (${V} in the current buffer)`)}catch(Q){q.error=Q,q.hasError=!0}finally{e1(q)}}decodeArrayStream(J){return this.decodeMultiAsync(J,!0)}decodeStream(J){return this.decodeMultiAsync(J,!1)}async*decodeMultiAsync(J,q){const Q={stack:[],error:void 0,hasError:!1};try{if(this.entered){yield*this.clone().decodeMultiAsync(J,q);return}const G=t1(Q,this.enteringGuard(),!1);let X=q,Y=-1;for await(let V of J){if(q&&Y===0)throw this.createExtraByteError(this.totalPos);if(this.appendBuffer(V),X)Y=this.readArraySize(),X=!1,this.complete();try{while(!0)if(yield this.doDecodeSync(),--Y===0)break}catch(K){if(!(K instanceof RangeError))throw K}this.totalPos+=this.pos}}catch(G){Q.error=G,Q.hasError=!0}finally{e1(Q)}}doDecodeSync(){J:while(!0){const J=this.readHeadByte();let q;if(J>=224)q=J-256;else if(J<192)if(J<128)q=J;else if(J<144){const G=J-128;if(G!==0){this.pushMapState(G),this.complete();continue J}else q={}}else if(J<160){const G=J-144;if(G!==0){this.pushArrayState(G),this.complete();continue J}else q=[]}else{const G=J-160;q=this.decodeString(G,0)}else if(J===192)q=null;else if(J===194)q=!1;else if(J===195)q=!0;else if(J===202)q=this.readF32();else if(J===203)q=this.readF64();else if(J===204)q=this.readU8();else if(J===205)q=this.readU16();else if(J===206)q=this.readU32();else if(J===207)if(this.useBigInt64)q=this.readU64AsBigInt();else q=this.readU64();else if(J===208)q=this.readI8();else if(J===209)q=this.readI16();else if(J===210)q=this.readI32();else if(J===211)if(this.useBigInt64)q=this.readI64AsBigInt();else q=this.readI64();else if(J===217){const G=this.lookU8();q=this.decodeString(G,1)}else if(J===218){const G=this.lookU16();q=this.decodeString(G,2)}else if(J===219){const G=this.lookU32();q=this.decodeString(G,4)}else if(J===220){const G=this.readU16();if(G!==0){this.pushArrayState(G),this.complete();continue J}else q=[]}else if(J===221){const G=this.readU32();if(G!==0){this.pushArrayState(G),this.complete();continue J}else q=[]}else if(J===222){const G=this.readU16();if(G!==0){this.pushMapState(G),this.complete();continue J}else q={}}else if(J===223){const G=this.readU32();if(G!==0){this.pushMapState(G),this.complete();continue J}else q={}}else if(J===196){const G=this.lookU8();q=this.decodeBinary(G,1)}else if(J===197){const G=this.lookU16();q=this.decodeBinary(G,2)}else if(J===198){const G=this.lookU32();q=this.decodeBinary(G,4)}else if(J===212)q=this.decodeExtension(1,0);else if(J===213)q=this.decodeExtension(2,0);else if(J===214)q=this.decodeExtension(4,0);else if(J===215)q=this.decodeExtension(8,0);else if(J===216)q=this.decodeExtension(16,0);else if(J===199){const G=this.lookU8();q=this.decodeExtension(G,1)}else if(J===200){const G=this.lookU16();q=this.decodeExtension(G,2)}else if(J===201){const G=this.lookU32();q=this.decodeExtension(G,4)}else throw new Z0(`Unrecognized type byte: ${s1(J)}`);this.complete();const Q=this.stack;while(Q.length>0){const G=Q.top();if(G.type===J9)if(G.array[G.position]=q,G.position++,G.position===G.size)q=G.array,Q.release(G);else continue J;else if(G.type===K1){if(q==="__proto__")throw new Z0("The key __proto__ is not allowed");G.key=this.mapKeyConverter(q),G.type=eQ;continue J}else if(G.map[G.key]=q,G.readCount++,G.readCount===G.size)q=G.map,Q.release(G);else{G.key=null,G.type=K1;continue J}}return q}}readHeadByte(){if(this.headByte===V1)this.headByte=this.readU8();return this.headByte}complete(){this.headByte=V1}readArraySize(){const J=this.readHeadByte();switch(J){case 220:return this.readU16();case 221:return this.readU32();default:if(J<160)return J-144;else throw new Z0(`Unrecognized array type byte: ${s1(J)}`)}}pushMapState(J){if(J>this.maxMapLength)throw new Z0(`Max length exceeded: map length (${J}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(J)}pushArrayState(J){if(J>this.maxArrayLength)throw new Z0(`Max length exceeded: array length (${J}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(J)}decodeString(J,q){if(!this.rawStrings||this.stateIsMapKey())return this.decodeUtf8String(J,q);return this.decodeBinary(J,q)}decodeUtf8String(J,q){if(J>this.maxStrLength)throw new Z0(`Max length exceeded: UTF-8 byte length (${J}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+q+J)throw tQ;const Q=this.pos+q;let G;if(this.stateIsMapKey()&&this.keyDecoder?.canBeCached(J))G=this.keyDecoder.decode(this.bytes,Q,J);else G=iQ(this.bytes,Q,J);return this.pos+=q+J,G}stateIsMapKey(){if(this.stack.length>0)return this.stack.top().type===K1;return!1}decodeBinary(J,q){if(J>this.maxBinLength)throw new Z0(`Max length exceeded: bin length (${J}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(J+q))throw tQ;const Q=this.pos+q,G=this.bytes.subarray(Q,Q+J);return this.pos+=q+J,G}decodeExtension(J,q){if(J>this.maxExtLength)throw new Z0(`Max length exceeded: ext length (${J}) > maxExtLength (${this.maxExtLength})`);const Q=this.view.getInt8(this.pos+q),G=this.decodeBinary(J,q+1);return this.extensionCodec.decode(G,Q,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const J=this.view.getUint8(this.pos);return this.pos++,J}readI8(){const J=this.view.getInt8(this.pos);return this.pos++,J}readU16(){const J=this.view.getUint16(this.pos);return this.pos+=2,J}readI16(){const J=this.view.getInt16(this.pos);return this.pos+=2,J}readU32(){const J=this.view.getUint32(this.pos);return this.pos+=4,J}readI32(){const J=this.view.getInt32(this.pos);return this.pos+=4,J}readU64(){const J=nQ(this.view,this.pos);return this.pos+=8,J}readI64(){const J=r1(this.view,this.pos);return this.pos+=8,J}readU64AsBigInt(){const J=this.view.getBigUint64(this.pos);return this.pos+=8,J}readI64AsBigInt(){const J=this.view.getBigInt64(this.pos);return this.pos+=8,J}readF32(){const J=this.view.getFloat32(this.pos);return this.pos+=4,J}readF64(){const J=this.view.getFloat64(this.pos);return this.pos+=8,J}}function QJ(J,q){return new JJ(q).decode(J)}var c8=function(J){let q=J.length;while(--q>=0)J[q]=0},G9=function(J,q,Q,G,X){this.static_tree=J,this.extra_bits=q,this.extra_base=Q,this.elems=G,this.max_length=X,this.has_stree=J&&J.length},X9=function(J,q){this.dyn_tree=J,this.max_code=0,this.stat_desc=q},S0=function(J,q,Q,G,X){this.good_length=J,this.max_lazy=q,this.nice_length=Q,this.max_chain=G,this.func=X},pX=function(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=zJ,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(yX*2),this.dyn_dtree=new Uint16Array((2*vX+1)*2),this.bl_tree=new Uint16Array((2*gX+1)*2),d0(this.dyn_ltree),d0(this.dyn_dtree),d0(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(EX+1),this.heap=new Uint16Array(2*k9+1),d0(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*k9+1),d0(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0},zY=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},F1=function(J){this.options=UJ.assign({level:LY,method:kY,chunkSize:16384,windowBits:15,memLevel:8,strategy:PY},J||{});let q=this.options;if(q.raw&&q.windowBits>0)q.windowBits=-q.windowBits;else if(q.gzip&&q.windowBits>0&&q.windowBits<16)q.windowBits+=16;this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new V6,this.strm.avail_out=0;let Q=U1.deflateInit2(this.strm,q.level,q.method,q.windowBits,q.memLevel,q.strategy);if(Q!==WJ)throw new Error(z8[Q]);if(q.header)U1.deflateSetHeader(this.strm,q.header);if(q.dictionary){let G;if(typeof q.dictionary==="string")G=C1.string2buf(q.dictionary);else if(K6.call(q.dictionary)==="[object ArrayBuffer]")G=new Uint8Array(q.dictionary);else G=q.dictionary;if(Q=U1.deflateSetDictionary(this.strm,G),Q!==WJ)throw new Error(z8[Q]);this._dict_set=!0}},R9=function(J,q){const Q=new F1(q);if(Q.push(J,!0),Q.err)throw Q.msg||z8[Q.err];return Q.result},CY=function(J,q){return q=q||{},q.raw=!0,R9(J,q)},OY=function(J,q){return q=q||{},q.gzip=!0,R9(J,q)},lY=function(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},KV=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},N1=function(J){this.options=UJ.assign({chunkSize:65536,windowBits:15,to:""},J||{});const q=this.options;if(q.raw&&q.windowBits>=0&&q.windowBits<16){if(q.windowBits=-q.windowBits,q.windowBits===0)q.windowBits=-15}if(q.windowBits>=0&&q.windowBits<16&&!(J&&J.windowBits))q.windowBits+=32;if(q.windowBits>15&&q.windowBits<48){if((q.windowBits&15)===0)q.windowBits|=15}this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new V6,this.strm.avail_out=0;let Q=m0.inflateInit2(this.strm,q.windowBits);if(Q!==O1)throw new Error(z8[Q]);if(this.header=new ZV,m0.inflateGetHeader(this.strm,this.header),q.dictionary){if(typeof q.dictionary==="string")q.dictionary=C1.string2buf(q.dictionary);else if(k6.call(q.dictionary)==="[object ArrayBuffer]")q.dictionary=new Uint8Array(q.dictionary);if(q.raw){if(Q=m0.inflateSetDictionary(this.strm,q.dictionary),Q!==O1)throw new Error(z8[Q])}}},T9=function(J,q){const Q=new N1(q);if(Q.push(J),Q.err)throw Q.msg||z8[Q.err];return Q.result},jV=function(J,q){return q=q||{},q.raw=!0,T9(J,q)};/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */var f7=0,bq=1,p7=2,l7=3,d7=258,N9=29,w1=256,H1=w1+1+N9,m8=30,S9=19,uq=2*H1+1,Z8=15,q9=16,i7=7,D9=256,cq=16,fq=17,pq=18,B9=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),KJ=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),o7=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),lq=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),n7=512,_0=new Array((H1+2)*2);c8(_0);var z1=new Array(m8*2);c8(z1);var M1=new Array(n7);c8(M1);var B1=new Array(d7-l7+1);c8(B1);var I9=new Array(N9);c8(I9);var ZJ=new Array(m8);c8(ZJ);var dq,iq,oq,nq=(J)=>{return J<256?M1[J]:M1[256+(J>>>7)]},L1=(J,q)=>{J.pending_buf[J.pending++]=q&255,J.pending_buf[J.pending++]=q>>>8&255},$0=(J,q,Q)=>{if(J.bi_valid>q9-Q)J.bi_buf|=q<<J.bi_valid&65535,L1(J,J.bi_buf),J.bi_buf=q>>q9-J.bi_valid,J.bi_valid+=Q-q9;else J.bi_buf|=q<<J.bi_valid&65535,J.bi_valid+=Q},D0=(J,q,Q)=>{$0(J,Q[q*2],Q[q*2+1])},rq=(J,q)=>{let Q=0;do Q|=J&1,J>>>=1,Q<<=1;while(--q>0);return Q>>>1},r7=(J)=>{if(J.bi_valid===16)L1(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0;else if(J.bi_valid>=8)J.pending_buf[J.pending++]=J.bi_buf&255,J.bi_buf>>=8,J.bi_valid-=8},a7=(J,q)=>{const{dyn_tree:Q,max_code:G}=q,X=q.stat_desc.static_tree,Y=q.stat_desc.has_stree,V=q.stat_desc.extra_bits,K=q.stat_desc.extra_base,W=q.stat_desc.max_length;let Z,$,H,U,z,P,j=0;for(U=0;U<=Z8;U++)J.bl_count[U]=0;Q[J.heap[J.heap_max]*2+1]=0;for(Z=J.heap_max+1;Z<uq;Z++){if($=J.heap[Z],U=Q[Q[$*2+1]*2+1]+1,U>W)U=W,j++;if(Q[$*2+1]=U,$>G)continue;if(J.bl_count[U]++,z=0,$>=K)z=V[$-K];if(P=Q[$*2],J.opt_len+=P*(U+z),Y)J.static_len+=P*(X[$*2+1]+z)}if(j===0)return;do{U=W-1;while(J.bl_count[U]===0)U--;J.bl_count[U]--,J.bl_count[U+1]+=2,J.bl_count[W]--,j-=2}while(j>0);for(U=W;U!==0;U--){$=J.bl_count[U];while($!==0){if(H=J.heap[--Z],H>G)continue;if(Q[H*2+1]!==U)J.opt_len+=(U-Q[H*2+1])*Q[H*2],Q[H*2+1]=U;$--}}},aq=(J,q,Q)=>{const G=new Array(Z8+1);let X=0,Y,V;for(Y=1;Y<=Z8;Y++)X=X+Q[Y-1]<<1,G[Y]=X;for(V=0;V<=q;V++){let K=J[V*2+1];if(K===0)continue;J[V*2]=rq(G[K]++,K)}},s7=()=>{let J,q,Q,G,X;const Y=new Array(Z8+1);Q=0;for(G=0;G<N9-1;G++){I9[G]=Q;for(J=0;J<1<<B9[G];J++)B1[Q++]=G}B1[Q-1]=G,X=0;for(G=0;G<16;G++){ZJ[G]=X;for(J=0;J<1<<KJ[G];J++)M1[X++]=G}X>>=7;for(;G<m8;G++){ZJ[G]=X<<7;for(J=0;J<1<<KJ[G]-7;J++)M1[256+X++]=G}for(q=0;q<=Z8;q++)Y[q]=0;J=0;while(J<=143)_0[J*2+1]=8,J++,Y[8]++;while(J<=255)_0[J*2+1]=9,J++,Y[9]++;while(J<=279)_0[J*2+1]=7,J++,Y[7]++;while(J<=287)_0[J*2+1]=8,J++,Y[8]++;aq(_0,H1+1,Y);for(J=0;J<m8;J++)z1[J*2+1]=5,z1[J*2]=rq(J,5);dq=new G9(_0,B9,w1+1,H1,Z8),iq=new G9(z1,KJ,0,m8,Z8),oq=new G9(new Array(0),o7,0,S9,i7)},sq=(J)=>{let q;for(q=0;q<H1;q++)J.dyn_ltree[q*2]=0;for(q=0;q<m8;q++)J.dyn_dtree[q*2]=0;for(q=0;q<S9;q++)J.bl_tree[q*2]=0;J.dyn_ltree[D9*2]=1,J.opt_len=J.static_len=0,J.sym_next=J.matches=0},tq=(J)=>{if(J.bi_valid>8)L1(J,J.bi_buf);else if(J.bi_valid>0)J.pending_buf[J.pending++]=J.bi_buf;J.bi_buf=0,J.bi_valid=0},Qq=(J,q,Q,G)=>{const X=q*2,Y=Q*2;return J[X]<J[Y]||J[X]===J[Y]&&G[q]<=G[Q]},Y9=(J,q,Q)=>{const G=J.heap[Q];let X=Q<<1;while(X<=J.heap_len){if(X<J.heap_len&&Qq(q,J.heap[X+1],J.heap[X],J.depth))X++;if(Qq(q,G,J.heap[X],J.depth))break;J.heap[Q]=J.heap[X],Q=X,X<<=1}J.heap[Q]=G},qq=(J,q,Q)=>{let G,X,Y=0,V,K;if(J.sym_next!==0)do if(G=J.pending_buf[J.sym_buf+Y++]&255,G+=(J.pending_buf[J.sym_buf+Y++]&255)<<8,X=J.pending_buf[J.sym_buf+Y++],G===0)D0(J,X,q);else{if(V=B1[X],D0(J,V+w1+1,q),K=B9[V],K!==0)X-=I9[V],$0(J,X,K);if(G--,V=nq(G),D0(J,V,Q),K=KJ[V],K!==0)G-=ZJ[V],$0(J,G,K)}while(Y<J.sym_next);D0(J,D9,q)},L9=(J,q)=>{const Q=q.dyn_tree,G=q.stat_desc.static_tree,X=q.stat_desc.has_stree,Y=q.stat_desc.elems;let V,K,W=-1,Z;J.heap_len=0,J.heap_max=uq;for(V=0;V<Y;V++)if(Q[V*2]!==0)J.heap[++J.heap_len]=W=V,J.depth[V]=0;else Q[V*2+1]=0;while(J.heap_len<2)if(Z=J.heap[++J.heap_len]=W<2?++W:0,Q[Z*2]=1,J.depth[Z]=0,J.opt_len--,X)J.static_len-=G[Z*2+1];q.max_code=W;for(V=J.heap_len>>1;V>=1;V--)Y9(J,Q,V);Z=Y;do V=J.heap[1],J.heap[1]=J.heap[J.heap_len--],Y9(J,Q,1),K=J.heap[1],J.heap[--J.heap_max]=V,J.heap[--J.heap_max]=K,Q[Z*2]=Q[V*2]+Q[K*2],J.depth[Z]=(J.depth[V]>=J.depth[K]?J.depth[V]:J.depth[K])+1,Q[V*2+1]=Q[K*2+1]=Z,J.heap[1]=Z++,Y9(J,Q,1);while(J.heap_len>=2);J.heap[--J.heap_max]=J.heap[1],a7(J,q),aq(Q,W,J.bl_count)},Gq=(J,q,Q)=>{let G,X=-1,Y,V=q[1],K=0,W=7,Z=4;if(V===0)W=138,Z=3;q[(Q+1)*2+1]=65535;for(G=0;G<=Q;G++){if(Y=V,V=q[(G+1)*2+1],++K<W&&Y===V)continue;else if(K<Z)J.bl_tree[Y*2]+=K;else if(Y!==0){if(Y!==X)J.bl_tree[Y*2]++;J.bl_tree[cq*2]++}else if(K<=10)J.bl_tree[fq*2]++;else J.bl_tree[pq*2]++;if(K=0,X=Y,V===0)W=138,Z=3;else if(Y===V)W=6,Z=3;else W=7,Z=4}},Xq=(J,q,Q)=>{let G,X=-1,Y,V=q[1],K=0,W=7,Z=4;if(V===0)W=138,Z=3;for(G=0;G<=Q;G++){if(Y=V,V=q[(G+1)*2+1],++K<W&&Y===V)continue;else if(K<Z)do D0(J,Y,J.bl_tree);while(--K!==0);else if(Y!==0){if(Y!==X)D0(J,Y,J.bl_tree),K--;D0(J,cq,J.bl_tree),$0(J,K-3,2)}else if(K<=10)D0(J,fq,J.bl_tree),$0(J,K-3,3);else D0(J,pq,J.bl_tree),$0(J,K-11,7);if(K=0,X=Y,V===0)W=138,Z=3;else if(Y===V)W=6,Z=3;else W=7,Z=4}},t7=(J)=>{let q;Gq(J,J.dyn_ltree,J.l_desc.max_code),Gq(J,J.dyn_dtree,J.d_desc.max_code),L9(J,J.bl_desc);for(q=S9-1;q>=3;q--)if(J.bl_tree[lq[q]*2+1]!==0)break;return J.opt_len+=3*(q+1)+5+5+4,q},e7=(J,q,Q,G)=>{let X;$0(J,q-257,5),$0(J,Q-1,5),$0(J,G-4,4);for(X=0;X<G;X++)$0(J,J.bl_tree[lq[X]*2+1],3);Xq(J,J.dyn_ltree,q-1),Xq(J,J.dyn_dtree,Q-1)},JX=(J)=>{let q=4093624447,Q;for(Q=0;Q<=31;Q++,q>>>=1)if(q&1&&J.dyn_ltree[Q*2]!==0)return 0;if(J.dyn_ltree[18]!==0||J.dyn_ltree[20]!==0||J.dyn_ltree[26]!==0)return 1;for(Q=32;Q<w1;Q++)if(J.dyn_ltree[Q*2]!==0)return 1;return 0},Yq=!1,QX=(J)=>{if(!Yq)s7(),Yq=!0;J.l_desc=new X9(J.dyn_ltree,dq),J.d_desc=new X9(J.dyn_dtree,iq),J.bl_desc=new X9(J.bl_tree,oq),J.bi_buf=0,J.bi_valid=0,sq(J)},eq=(J,q,Q,G)=>{if($0(J,(f7<<1)+(G?1:0),3),tq(J),L1(J,Q),L1(J,~Q),Q)J.pending_buf.set(J.window.subarray(q,q+Q),J.pending);J.pending+=Q},qX=(J)=>{$0(J,bq<<1,3),D0(J,D9,_0),r7(J)},GX=(J,q,Q,G)=>{let X,Y,V=0;if(J.level>0){if(J.strm.data_type===2)J.strm.data_type=JX(J);if(L9(J,J.l_desc),L9(J,J.d_desc),V=t7(J),X=J.opt_len+3+7>>>3,Y=J.static_len+3+7>>>3,Y<=X)X=Y}else X=Y=Q+5;if(Q+4<=X&&q!==-1)eq(J,q,Q,G);else if(J.strategy===4||Y===X)$0(J,(bq<<1)+(G?1:0),3),qq(J,_0,z1);else $0(J,(p7<<1)+(G?1:0),3),e7(J,J.l_desc.max_code+1,J.d_desc.max_code+1,V+1),qq(J,J.dyn_ltree,J.dyn_dtree);if(sq(J),G)tq(J)},XX=(J,q,Q)=>{if(J.pending_buf[J.sym_buf+J.sym_next++]=q,J.pending_buf[J.sym_buf+J.sym_next++]=q>>8,J.pending_buf[J.sym_buf+J.sym_next++]=Q,q===0)J.dyn_ltree[Q*2]++;else J.matches++,q--,J.dyn_ltree[(B1[Q]+w1+1)*2]++,J.dyn_dtree[nq(q)*2]++;return J.sym_next===J.sym_end},YX=QX,VX=eq,KX=GX,ZX=XX,WX=qX,$X={_tr_init:YX,_tr_stored_block:VX,_tr_flush_block:KX,_tr_tally:ZX,_tr_align:WX},zX=(J,q,Q,G)=>{let X=J&65535|0,Y=J>>>16&65535|0,V=0;while(Q!==0){V=Q>2000?2000:Q,Q-=V;do X=X+q[G++]|0,Y=Y+X|0;while(--V);X%=65521,Y%=65521}return X|Y<<16|0},P1=zX,UX=()=>{let J,q=[];for(var Q=0;Q<256;Q++){J=Q;for(var G=0;G<8;G++)J=J&1?3988292384^J>>>1:J>>>1;q[Q]=J}return q},jX=new Uint32Array(UX()),HX=(J,q,Q,G)=>{const X=jX,Y=G+Q;J^=-1;for(let V=G;V<Y;V++)J=J>>>8^X[(J^q[V])&255];return J^-1},q0=HX,z8={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},H8={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:MX,_tr_stored_block:P9,_tr_flush_block:BX,_tr_tally:o0,_tr_align:LX}=$X,{Z_NO_FLUSH:n0,Z_PARTIAL_FLUSH:PX,Z_FULL_FLUSH:kX,Z_FINISH:P0,Z_BLOCK:Vq,Z_OK:Y0,Z_STREAM_END:Kq,Z_STREAM_ERROR:I0,Z_DATA_ERROR:CX,Z_BUF_ERROR:V9,Z_DEFAULT_COMPRESSION:OX,Z_FILTERED:wX,Z_HUFFMAN_ONLY:qJ,Z_RLE:xX,Z_FIXED:FX,Z_DEFAULT_STRATEGY:NX,Z_UNKNOWN:SX,Z_DEFLATED:zJ}=H8,DX=9,IX=15,AX=8,RX=29,TX=256,k9=TX+1+RX,vX=30,gX=19,yX=2*k9+1,EX=15,_=3,i0=258,A0=i0+_+1,hX=32,b8=42,A9=57,C9=69,O9=73,w9=91,x9=103,W8=113,W1=666,W0=1,f8=2,U8=3,p8=4,_X=3,$8=(J,q)=>{return J.msg=z8[q],q},Zq=(J)=>{return J*2-(J>4?9:0)},d0=(J)=>{let q=J.length;while(--q>=0)J[q]=0},mX=(J)=>{let q,Q,G,X=J.w_size;q=J.hash_size,G=q;do Q=J.head[--G],J.head[G]=Q>=X?Q-X:0;while(--q);q=X,G=q;do Q=J.prev[--G],J.prev[G]=Q>=X?Q-X:0;while(--q)},bX=(J,q,Q)=>(q<<J.hash_shift^Q)&J.hash_mask,r0=bX,H0=(J)=>{const q=J.state;let Q=q.pending;if(Q>J.avail_out)Q=J.avail_out;if(Q===0)return;if(J.output.set(q.pending_buf.subarray(q.pending_out,q.pending_out+Q),J.next_out),J.next_out+=Q,q.pending_out+=Q,J.total_out+=Q,J.avail_out-=Q,q.pending-=Q,q.pending===0)q.pending_out=0},M0=(J,q)=>{BX(J,J.block_start>=0?J.block_start:-1,J.strstart-J.block_start,q),J.block_start=J.strstart,H0(J.strm)},m=(J,q)=>{J.pending_buf[J.pending++]=q},Z1=(J,q)=>{J.pending_buf[J.pending++]=q>>>8&255,J.pending_buf[J.pending++]=q&255},F9=(J,q,Q,G)=>{let X=J.avail_in;if(X>G)X=G;if(X===0)return 0;if(J.avail_in-=X,q.set(J.input.subarray(J.next_in,J.next_in+X),Q),J.state.wrap===1)J.adler=P1(J.adler,q,X,Q);else if(J.state.wrap===2)J.adler=q0(J.adler,q,X,Q);return J.next_in+=X,J.total_in+=X,X},J6=(J,q)=>{let{max_chain_length:Q,strstart:G}=J,X,Y,V=J.prev_length,K=J.nice_match;const W=J.strstart>J.w_size-A0?J.strstart-(J.w_size-A0):0,Z=J.window,$=J.w_mask,H=J.prev,U=J.strstart+i0;let z=Z[G+V-1],P=Z[G+V];if(J.prev_length>=J.good_match)Q>>=2;if(K>J.lookahead)K=J.lookahead;do{if(X=q,Z[X+V]!==P||Z[X+V-1]!==z||Z[X]!==Z[G]||Z[++X]!==Z[G+1])continue;G+=2,X++;do;while(Z[++G]===Z[++X]&&Z[++G]===Z[++X]&&Z[++G]===Z[++X]&&Z[++G]===Z[++X]&&Z[++G]===Z[++X]&&Z[++G]===Z[++X]&&Z[++G]===Z[++X]&&Z[++G]===Z[++X]&&G<U);if(Y=i0-(U-G),G=U-i0,Y>V){if(J.match_start=q,V=Y,Y>=K)break;z=Z[G+V-1],P=Z[G+V]}}while((q=H[q&$])>W&&--Q!==0);if(V<=J.lookahead)return V;return J.lookahead},u8=(J)=>{const q=J.w_size;let Q,G,X;do{if(G=J.window_size-J.lookahead-J.strstart,J.strstart>=q+(q-A0)){if(J.window.set(J.window.subarray(q,q+q-G),0),J.match_start-=q,J.strstart-=q,J.block_start-=q,J.insert>J.strstart)J.insert=J.strstart;mX(J),G+=q}if(J.strm.avail_in===0)break;if(Q=F9(J.strm,J.window,J.strstart+J.lookahead,G),J.lookahead+=Q,J.lookahead+J.insert>=_){X=J.strstart-J.insert,J.ins_h=J.window[X],J.ins_h=r0(J,J.ins_h,J.window[X+1]);while(J.insert)if(J.ins_h=r0(J,J.ins_h,J.window[X+_-1]),J.prev[X&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=X,X++,J.insert--,J.lookahead+J.insert<_)break}}while(J.lookahead<A0&&J.strm.avail_in!==0)},Q6=(J,q)=>{let Q=J.pending_buf_size-5>J.w_size?J.w_size:J.pending_buf_size-5,G,X,Y,V=0,K=J.strm.avail_in;do{if(G=65535,Y=J.bi_valid+42>>3,J.strm.avail_out<Y)break;if(Y=J.strm.avail_out-Y,X=J.strstart-J.block_start,G>X+J.strm.avail_in)G=X+J.strm.avail_in;if(G>Y)G=Y;if(G<Q&&(G===0&&q!==P0||q===n0||G!==X+J.strm.avail_in))break;if(V=q===P0&&G===X+J.strm.avail_in?1:0,P9(J,0,0,V),J.pending_buf[J.pending-4]=G,J.pending_buf[J.pending-3]=G>>8,J.pending_buf[J.pending-2]=~G,J.pending_buf[J.pending-1]=~G>>8,H0(J.strm),X){if(X>G)X=G;J.strm.output.set(J.window.subarray(J.block_start,J.block_start+X),J.strm.next_out),J.strm.next_out+=X,J.strm.avail_out-=X,J.strm.total_out+=X,J.block_start+=X,G-=X}if(G)F9(J.strm,J.strm.output,J.strm.next_out,G),J.strm.next_out+=G,J.strm.avail_out-=G,J.strm.total_out+=G}while(V===0);if(K-=J.strm.avail_in,K){if(K>=J.w_size)J.matches=2,J.window.set(J.strm.input.subarray(J.strm.next_in-J.w_size,J.strm.next_in),0),J.strstart=J.w_size,J.insert=J.strstart;else{if(J.window_size-J.strstart<=K){if(J.strstart-=J.w_size,J.window.set(J.window.subarray(J.w_size,J.w_size+J.strstart),0),J.matches<2)J.matches++;if(J.insert>J.strstart)J.insert=J.strstart}J.window.set(J.strm.input.subarray(J.strm.next_in-K,J.strm.next_in),J.strstart),J.strstart+=K,J.insert+=K>J.w_size-J.insert?J.w_size-J.insert:K}J.block_start=J.strstart}if(J.high_water<J.strstart)J.high_water=J.strstart;if(V)return p8;if(q!==n0&&q!==P0&&J.strm.avail_in===0&&J.strstart===J.block_start)return f8;if(Y=J.window_size-J.strstart,J.strm.avail_in>Y&&J.block_start>=J.w_size){if(J.block_start-=J.w_size,J.strstart-=J.w_size,J.window.set(J.window.subarray(J.w_size,J.w_size+J.strstart),0),J.matches<2)J.matches++;if(Y+=J.w_size,J.insert>J.strstart)J.insert=J.strstart}if(Y>J.strm.avail_in)Y=J.strm.avail_in;if(Y)F9(J.strm,J.window,J.strstart,Y),J.strstart+=Y,J.insert+=Y>J.w_size-J.insert?J.w_size-J.insert:Y;if(J.high_water<J.strstart)J.high_water=J.strstart;if(Y=J.bi_valid+42>>3,Y=J.pending_buf_size-Y>65535?65535:J.pending_buf_size-Y,Q=Y>J.w_size?J.w_size:Y,X=J.strstart-J.block_start,X>=Q||(X||q===P0)&&q!==n0&&J.strm.avail_in===0&&X<=Y)G=X>Y?Y:X,V=q===P0&&J.strm.avail_in===0&&G===X?1:0,P9(J,J.block_start,G,V),J.block_start+=G,H0(J.strm);return V?U8:W0},K9=(J,q)=>{let Q,G;for(;;){if(J.lookahead<A0){if(u8(J),J.lookahead<A0&&q===n0)return W0;if(J.lookahead===0)break}if(Q=0,J.lookahead>=_)J.ins_h=r0(J,J.ins_h,J.window[J.strstart+_-1]),Q=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart;if(Q!==0&&J.strstart-Q<=J.w_size-A0)J.match_length=J6(J,Q);if(J.match_length>=_)if(G=o0(J,J.strstart-J.match_start,J.match_length-_),J.lookahead-=J.match_length,J.match_length<=J.max_lazy_match&&J.lookahead>=_){J.match_length--;do J.strstart++,J.ins_h=r0(J,J.ins_h,J.window[J.strstart+_-1]),Q=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart;while(--J.match_length!==0);J.strstart++}else J.strstart+=J.match_length,J.match_length=0,J.ins_h=J.window[J.strstart],J.ins_h=r0(J,J.ins_h,J.window[J.strstart+1]);else G=o0(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++;if(G){if(M0(J,!1),J.strm.avail_out===0)return W0}}if(J.insert=J.strstart<_-1?J.strstart:_-1,q===P0){if(M0(J,!0),J.strm.avail_out===0)return U8;return p8}if(J.sym_next){if(M0(J,!1),J.strm.avail_out===0)return W0}return f8},h8=(J,q)=>{let Q,G,X;for(;;){if(J.lookahead<A0){if(u8(J),J.lookahead<A0&&q===n0)return W0;if(J.lookahead===0)break}if(Q=0,J.lookahead>=_)J.ins_h=r0(J,J.ins_h,J.window[J.strstart+_-1]),Q=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart;if(J.prev_length=J.match_length,J.prev_match=J.match_start,J.match_length=_-1,Q!==0&&J.prev_length<J.max_lazy_match&&J.strstart-Q<=J.w_size-A0){if(J.match_length=J6(J,Q),J.match_length<=5&&(J.strategy===wX||J.match_length===_&&J.strstart-J.match_start>4096))J.match_length=_-1}if(J.prev_length>=_&&J.match_length<=J.prev_length){X=J.strstart+J.lookahead-_,G=o0(J,J.strstart-1-J.prev_match,J.prev_length-_),J.lookahead-=J.prev_length-1,J.prev_length-=2;do if(++J.strstart<=X)J.ins_h=r0(J,J.ins_h,J.window[J.strstart+_-1]),Q=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart;while(--J.prev_length!==0);if(J.match_available=0,J.match_length=_-1,J.strstart++,G){if(M0(J,!1),J.strm.avail_out===0)return W0}}else if(J.match_available){if(G=o0(J,0,J.window[J.strstart-1]),G)M0(J,!1);if(J.strstart++,J.lookahead--,J.strm.avail_out===0)return W0}else J.match_available=1,J.strstart++,J.lookahead--}if(J.match_available)G=o0(J,0,J.window[J.strstart-1]),J.match_available=0;if(J.insert=J.strstart<_-1?J.strstart:_-1,q===P0){if(M0(J,!0),J.strm.avail_out===0)return U8;return p8}if(J.sym_next){if(M0(J,!1),J.strm.avail_out===0)return W0}return f8},uX=(J,q)=>{let Q,G,X,Y;const V=J.window;for(;;){if(J.lookahead<=i0){if(u8(J),J.lookahead<=i0&&q===n0)return W0;if(J.lookahead===0)break}if(J.match_length=0,J.lookahead>=_&&J.strstart>0){if(X=J.strstart-1,G=V[X],G===V[++X]&&G===V[++X]&&G===V[++X]){Y=J.strstart+i0;do;while(G===V[++X]&&G===V[++X]&&G===V[++X]&&G===V[++X]&&G===V[++X]&&G===V[++X]&&G===V[++X]&&G===V[++X]&&X<Y);if(J.match_length=i0-(Y-X),J.match_length>J.lookahead)J.match_length=J.lookahead}}if(J.match_length>=_)Q=o0(J,1,J.match_length-_),J.lookahead-=J.match_length,J.strstart+=J.match_length,J.match_length=0;else Q=o0(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++;if(Q){if(M0(J,!1),J.strm.avail_out===0)return W0}}if(J.insert=0,q===P0){if(M0(J,!0),J.strm.avail_out===0)return U8;return p8}if(J.sym_next){if(M0(J,!1),J.strm.avail_out===0)return W0}return f8},cX=(J,q)=>{let Q;for(;;){if(J.lookahead===0){if(u8(J),J.lookahead===0){if(q===n0)return W0;break}}if(J.match_length=0,Q=o0(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++,Q){if(M0(J,!1),J.strm.avail_out===0)return W0}}if(J.insert=0,q===P0){if(M0(J,!0),J.strm.avail_out===0)return U8;return p8}if(J.sym_next){if(M0(J,!1),J.strm.avail_out===0)return W0}return f8},$1=[new S0(0,0,0,0,Q6),new S0(4,4,8,4,K9),new S0(4,5,16,8,K9),new S0(4,6,32,32,K9),new S0(4,4,16,16,h8),new S0(8,16,32,32,h8),new S0(8,16,128,128,h8),new S0(8,32,128,256,h8),new S0(32,128,258,1024,h8),new S0(32,258,258,4096,h8)],fX=(J)=>{J.window_size=2*J.w_size,d0(J.head),J.max_lazy_match=$1[J.level].max_lazy,J.good_match=$1[J.level].good_length,J.nice_match=$1[J.level].nice_length,J.max_chain_length=$1[J.level].max_chain,J.strstart=0,J.block_start=0,J.lookahead=0,J.insert=0,J.match_length=J.prev_length=_-1,J.match_available=0,J.ins_h=0},x1=(J)=>{if(!J)return 1;const q=J.state;if(!q||q.strm!==J||q.status!==b8&&q.status!==A9&&q.status!==C9&&q.status!==O9&&q.status!==w9&&q.status!==x9&&q.status!==W8&&q.status!==W1)return 1;return 0},q6=(J)=>{if(x1(J))return $8(J,I0);J.total_in=J.total_out=0,J.data_type=SX;const q=J.state;if(q.pending=0,q.pending_out=0,q.wrap<0)q.wrap=-q.wrap;return q.status=q.wrap===2?A9:q.wrap?b8:W8,J.adler=q.wrap===2?0:1,q.last_flush=-2,MX(q),Y0},G6=(J)=>{const q=q6(J);if(q===Y0)fX(J.state);return q},lX=(J,q)=>{if(x1(J)||J.state.wrap!==2)return I0;return J.state.gzhead=q,Y0},X6=(J,q,Q,G,X,Y)=>{if(!J)return I0;let V=1;if(q===OX)q=6;if(G<0)V=0,G=-G;else if(G>15)V=2,G-=16;if(X<1||X>DX||Q!==zJ||G<8||G>15||q<0||q>9||Y<0||Y>FX||G===8&&V!==1)return $8(J,I0);if(G===8)G=9;const K=new pX;return J.state=K,K.strm=J,K.status=b8,K.wrap=V,K.gzhead=null,K.w_bits=G,K.w_size=1<<K.w_bits,K.w_mask=K.w_size-1,K.hash_bits=X+7,K.hash_size=1<<K.hash_bits,K.hash_mask=K.hash_size-1,K.hash_shift=~~((K.hash_bits+_-1)/_),K.window=new Uint8Array(K.w_size*2),K.head=new Uint16Array(K.hash_size),K.prev=new Uint16Array(K.w_size),K.lit_bufsize=1<<X+6,K.pending_buf_size=K.lit_bufsize*4,K.pending_buf=new Uint8Array(K.pending_buf_size),K.sym_buf=K.lit_bufsize,K.sym_end=(K.lit_bufsize-1)*3,K.level=q,K.strategy=Y,K.method=Q,G6(J)},dX=(J,q)=>{return X6(J,q,zJ,IX,AX,NX)},iX=(J,q)=>{if(x1(J)||q>Vq||q<0)return J?$8(J,I0):I0;const Q=J.state;if(!J.output||J.avail_in!==0&&!J.input||Q.status===W1&&q!==P0)return $8(J,J.avail_out===0?V9:I0);const G=Q.last_flush;if(Q.last_flush=q,Q.pending!==0){if(H0(J),J.avail_out===0)return Q.last_flush=-1,Y0}else if(J.avail_in===0&&Zq(q)<=Zq(G)&&q!==P0)return $8(J,V9);if(Q.status===W1&&J.avail_in!==0)return $8(J,V9);if(Q.status===b8&&Q.wrap===0)Q.status=W8;if(Q.status===b8){let X=zJ+(Q.w_bits-8<<4)<<8,Y=-1;if(Q.strategy>=qJ||Q.level<2)Y=0;else if(Q.level<6)Y=1;else if(Q.level===6)Y=2;else Y=3;if(X|=Y<<6,Q.strstart!==0)X|=hX;if(X+=31-X%31,Z1(Q,X),Q.strstart!==0)Z1(Q,J.adler>>>16),Z1(Q,J.adler&65535);if(J.adler=1,Q.status=W8,H0(J),Q.pending!==0)return Q.last_flush=-1,Y0}if(Q.status===A9)if(J.adler=0,m(Q,31),m(Q,139),m(Q,8),!Q.gzhead){if(m(Q,0),m(Q,0),m(Q,0),m(Q,0),m(Q,0),m(Q,Q.level===9?2:Q.strategy>=qJ||Q.level<2?4:0),m(Q,_X),Q.status=W8,H0(J),Q.pending!==0)return Q.last_flush=-1,Y0}else{if(m(Q,(Q.gzhead.text?1:0)+(Q.gzhead.hcrc?2:0)+(!Q.gzhead.extra?0:4)+(!Q.gzhead.name?0:8)+(!Q.gzhead.comment?0:16)),m(Q,Q.gzhead.time&255),m(Q,Q.gzhead.time>>8&255),m(Q,Q.gzhead.time>>16&255),m(Q,Q.gzhead.time>>24&255),m(Q,Q.level===9?2:Q.strategy>=qJ||Q.level<2?4:0),m(Q,Q.gzhead.os&255),Q.gzhead.extra&&Q.gzhead.extra.length)m(Q,Q.gzhead.extra.length&255),m(Q,Q.gzhead.extra.length>>8&255);if(Q.gzhead.hcrc)J.adler=q0(J.adler,Q.pending_buf,Q.pending,0);Q.gzindex=0,Q.status=C9}if(Q.status===C9){if(Q.gzhead.extra){let X=Q.pending,Y=(Q.gzhead.extra.length&65535)-Q.gzindex;while(Q.pending+Y>Q.pending_buf_size){let K=Q.pending_buf_size-Q.pending;if(Q.pending_buf.set(Q.gzhead.extra.subarray(Q.gzindex,Q.gzindex+K),Q.pending),Q.pending=Q.pending_buf_size,Q.gzhead.hcrc&&Q.pending>X)J.adler=q0(J.adler,Q.pending_buf,Q.pending-X,X);if(Q.gzindex+=K,H0(J),Q.pending!==0)return Q.last_flush=-1,Y0;X=0,Y-=K}let V=new Uint8Array(Q.gzhead.extra);if(Q.pending_buf.set(V.subarray(Q.gzindex,Q.gzindex+Y),Q.pending),Q.pending+=Y,Q.gzhead.hcrc&&Q.pending>X)J.adler=q0(J.adler,Q.pending_buf,Q.pending-X,X);Q.gzindex=0}Q.status=O9}if(Q.status===O9){if(Q.gzhead.name){let X=Q.pending,Y;do{if(Q.pending===Q.pending_buf_size){if(Q.gzhead.hcrc&&Q.pending>X)J.adler=q0(J.adler,Q.pending_buf,Q.pending-X,X);if(H0(J),Q.pending!==0)return Q.last_flush=-1,Y0;X=0}if(Q.gzindex<Q.gzhead.name.length)Y=Q.gzhead.name.charCodeAt(Q.gzindex++)&255;else Y=0;m(Q,Y)}while(Y!==0);if(Q.gzhead.hcrc&&Q.pending>X)J.adler=q0(J.adler,Q.pending_buf,Q.pending-X,X);Q.gzindex=0}Q.status=w9}if(Q.status===w9){if(Q.gzhead.comment){let X=Q.pending,Y;do{if(Q.pending===Q.pending_buf_size){if(Q.gzhead.hcrc&&Q.pending>X)J.adler=q0(J.adler,Q.pending_buf,Q.pending-X,X);if(H0(J),Q.pending!==0)return Q.last_flush=-1,Y0;X=0}if(Q.gzindex<Q.gzhead.comment.length)Y=Q.gzhead.comment.charCodeAt(Q.gzindex++)&255;else Y=0;m(Q,Y)}while(Y!==0);if(Q.gzhead.hcrc&&Q.pending>X)J.adler=q0(J.adler,Q.pending_buf,Q.pending-X,X)}Q.status=x9}if(Q.status===x9){if(Q.gzhead.hcrc){if(Q.pending+2>Q.pending_buf_size){if(H0(J),Q.pending!==0)return Q.last_flush=-1,Y0}m(Q,J.adler&255),m(Q,J.adler>>8&255),J.adler=0}if(Q.status=W8,H0(J),Q.pending!==0)return Q.last_flush=-1,Y0}if(J.avail_in!==0||Q.lookahead!==0||q!==n0&&Q.status!==W1){let X=Q.level===0?Q6(Q,q):Q.strategy===qJ?cX(Q,q):Q.strategy===xX?uX(Q,q):$1[Q.level].func(Q,q);if(X===U8||X===p8)Q.status=W1;if(X===W0||X===U8){if(J.avail_out===0)Q.last_flush=-1;return Y0}if(X===f8){if(q===PX)LX(Q);else if(q!==Vq){if(P9(Q,0,0,!1),q===kX){if(d0(Q.head),Q.lookahead===0)Q.strstart=0,Q.block_start=0,Q.insert=0}}if(H0(J),J.avail_out===0)return Q.last_flush=-1,Y0}}if(q!==P0)return Y0;if(Q.wrap<=0)return Kq;if(Q.wrap===2)m(Q,J.adler&255),m(Q,J.adler>>8&255),m(Q,J.adler>>16&255),m(Q,J.adler>>24&255),m(Q,J.total_in&255),m(Q,J.total_in>>8&255),m(Q,J.total_in>>16&255),m(Q,J.total_in>>24&255);else Z1(Q,J.adler>>>16),Z1(Q,J.adler&65535);if(H0(J),Q.wrap>0)Q.wrap=-Q.wrap;return Q.pending!==0?Y0:Kq},oX=(J)=>{if(x1(J))return I0;const q=J.state.status;return J.state=null,q===W8?$8(J,CX):Y0},nX=(J,q)=>{let Q=q.length;if(x1(J))return I0;const G=J.state,X=G.wrap;if(X===2||X===1&&G.status!==b8||G.lookahead)return I0;if(X===1)J.adler=P1(J.adler,q,Q,0);if(G.wrap=0,Q>=G.w_size){if(X===0)d0(G.head),G.strstart=0,G.block_start=0,G.insert=0;let W=new Uint8Array(G.w_size);W.set(q.subarray(Q-G.w_size,Q),0),q=W,Q=G.w_size}const{avail_in:Y,next_in:V,input:K}=J;J.avail_in=Q,J.next_in=0,J.input=q,u8(G);while(G.lookahead>=_){let W=G.strstart,Z=G.lookahead-(_-1);do G.ins_h=r0(G,G.ins_h,G.window[W+_-1]),G.prev[W&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=W,W++;while(--Z);G.strstart=W,G.lookahead=_-1,u8(G)}return G.strstart+=G.lookahead,G.block_start=G.strstart,G.insert=G.lookahead,G.lookahead=0,G.match_length=G.prev_length=_-1,G.match_available=0,J.next_in=V,J.input=K,J.avail_in=Y,G.wrap=X,Y0},rX=dX,aX=X6,sX=G6,tX=q6,eX=lX,JY=iX,QY=oX,qY=nX,GY="pako deflate (from Nodeca project)",U1={deflateInit:rX,deflateInit2:aX,deflateReset:sX,deflateResetKeep:tX,deflateSetHeader:eX,deflate:JY,deflateEnd:QY,deflateSetDictionary:qY,deflateInfo:GY},XY=(J,q)=>{return Object.prototype.hasOwnProperty.call(J,q)},YY=function(J){const q=Array.prototype.slice.call(arguments,1);while(q.length){const Q=q.shift();if(!Q)continue;if(typeof Q!=="object")throw new TypeError(Q+"must be non-object");for(let G in Q)if(XY(Q,G))J[G]=Q[G]}return J},VY=(J)=>{let q=0;for(let G=0,X=J.length;G<X;G++)q+=J[G].length;const Q=new Uint8Array(q);for(let G=0,X=0,Y=J.length;G<Y;G++){let V=J[G];Q.set(V,X),X+=V.length}return Q},UJ={assign:YY,flattenChunks:VY},Y6=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(J){Y6=!1}var k1=new Uint8Array(256);for(let J=0;J<256;J++)k1[J]=J>=252?6:J>=248?5:J>=240?4:J>=224?3:J>=192?2:1;k1[254]=k1[254]=1;var KY=(J)=>{if(typeof TextEncoder==="function"&&TextEncoder.prototype.encode)return(new TextEncoder()).encode(J);let q,Q,G,X,Y,V=J.length,K=0;for(X=0;X<V;X++){if(Q=J.charCodeAt(X),(Q&64512)===55296&&X+1<V){if(G=J.charCodeAt(X+1),(G&64512)===56320)Q=65536+(Q-55296<<10)+(G-56320),X++}K+=Q<128?1:Q<2048?2:Q<65536?3:4}q=new Uint8Array(K);for(Y=0,X=0;Y<K;X++){if(Q=J.charCodeAt(X),(Q&64512)===55296&&X+1<V){if(G=J.charCodeAt(X+1),(G&64512)===56320)Q=65536+(Q-55296<<10)+(G-56320),X++}if(Q<128)q[Y++]=Q;else if(Q<2048)q[Y++]=192|Q>>>6,q[Y++]=128|Q&63;else if(Q<65536)q[Y++]=224|Q>>>12,q[Y++]=128|Q>>>6&63,q[Y++]=128|Q&63;else q[Y++]=240|Q>>>18,q[Y++]=128|Q>>>12&63,q[Y++]=128|Q>>>6&63,q[Y++]=128|Q&63}return q},ZY=(J,q)=>{if(q<65534){if(J.subarray&&Y6)return String.fromCharCode.apply(null,J.length===q?J:J.subarray(0,q))}let Q="";for(let G=0;G<q;G++)Q+=String.fromCharCode(J[G]);return Q},WY=(J,q)=>{const Q=q||J.length;if(typeof TextDecoder==="function"&&TextDecoder.prototype.decode)return(new TextDecoder()).decode(J.subarray(0,q));let G,X;const Y=new Array(Q*2);for(X=0,G=0;G<Q;){let V=J[G++];if(V<128){Y[X++]=V;continue}let K=k1[V];if(K>4){Y[X++]=65533,G+=K-1;continue}V&=K===2?31:K===3?15:7;while(K>1&&G<Q)V=V<<6|J[G++]&63,K--;if(K>1){Y[X++]=65533;continue}if(V<65536)Y[X++]=V;else V-=65536,Y[X++]=55296|V>>10&1023,Y[X++]=56320|V&1023}return ZY(Y,X)},$Y=(J,q)=>{if(q=q||J.length,q>J.length)q=J.length;let Q=q-1;while(Q>=0&&(J[Q]&192)===128)Q--;if(Q<0)return q;if(Q===0)return q;return Q+k1[J[Q]]>q?Q:q},C1={string2buf:KY,buf2string:WY,utf8border:$Y},V6=zY,K6=Object.prototype.toString,{Z_NO_FLUSH:UY,Z_SYNC_FLUSH:jY,Z_FULL_FLUSH:HY,Z_FINISH:MY,Z_OK:WJ,Z_STREAM_END:BY,Z_DEFAULT_COMPRESSION:LY,Z_DEFAULT_STRATEGY:PY,Z_DEFLATED:kY}=H8;F1.prototype.push=function(J,q){const Q=this.strm,G=this.options.chunkSize;let X,Y;if(this.ended)return!1;if(q===~~q)Y=q;else Y=q===!0?MY:UY;if(typeof J==="string")Q.input=C1.string2buf(J);else if(K6.call(J)==="[object ArrayBuffer]")Q.input=new Uint8Array(J);else Q.input=J;Q.next_in=0,Q.avail_in=Q.input.length;for(;;){if(Q.avail_out===0)Q.output=new Uint8Array(G),Q.next_out=0,Q.avail_out=G;if((Y===jY||Y===HY)&&Q.avail_out<=6){this.onData(Q.output.subarray(0,Q.next_out)),Q.avail_out=0;continue}if(X=U1.deflate(Q,Y),X===BY){if(Q.next_out>0)this.onData(Q.output.subarray(0,Q.next_out));return X=U1.deflateEnd(this.strm),this.onEnd(X),this.ended=!0,X===WJ}if(Q.avail_out===0){this.onData(Q.output);continue}if(Y>0&&Q.next_out>0){this.onData(Q.output.subarray(0,Q.next_out)),Q.avail_out=0;continue}if(Q.avail_in===0)break}return!0};F1.prototype.onData=function(J){this.chunks.push(J)};F1.prototype.onEnd=function(J){if(J===WJ)this.result=UJ.flattenChunks(this.chunks);this.chunks=[],this.err=J,this.msg=this.strm.msg};var wY=F1,xY=R9,FY=CY,NY=OY,SY=H8,DY={Deflate:wY,deflate:xY,deflateRaw:FY,gzip:NY,constants:SY},GJ=16209,IY=16191,AY=function J(q,Q){let G,X,Y,V,K,W,Z,$,H,U,z,P,j,M,O,F,N,B,A,D,x,S,y,I;const T=q.state;G=q.next_in,y=q.input,X=G+(q.avail_in-5),Y=q.next_out,I=q.output,V=Y-(Q-q.avail_out),K=Y+(q.avail_out-257),W=T.dmax,Z=T.wsize,$=T.whave,H=T.wnext,U=T.window,z=T.hold,P=T.bits,j=T.lencode,M=T.distcode,O=(1<<T.lenbits)-1,F=(1<<T.distbits)-1;J:do{if(P<15)z+=y[G++]<<P,P+=8,z+=y[G++]<<P,P+=8;N=j[z&O];Q:for(;;){if(B=N>>>24,z>>>=B,P-=B,B=N>>>16&255,B===0)I[Y++]=N&65535;else if(B&16){if(A=N&65535,B&=15,B){if(P<B)z+=y[G++]<<P,P+=8;A+=z&(1<<B)-1,z>>>=B,P-=B}if(P<15)z+=y[G++]<<P,P+=8,z+=y[G++]<<P,P+=8;N=M[z&F];q:for(;;){if(B=N>>>24,z>>>=B,P-=B,B=N>>>16&255,B&16){if(D=N&65535,B&=15,P<B){if(z+=y[G++]<<P,P+=8,P<B)z+=y[G++]<<P,P+=8}if(D+=z&(1<<B)-1,D>W){q.msg="invalid distance too far back",T.mode=GJ;break J}if(z>>>=B,P-=B,B=Y-V,D>B){if(B=D-B,B>$){if(T.sane){q.msg="invalid distance too far back",T.mode=GJ;break J}}if(x=0,S=U,H===0){if(x+=Z-B,B<A){A-=B;do I[Y++]=U[x++];while(--B);x=Y-D,S=I}}else if(H<B){if(x+=Z+H-B,B-=H,B<A){A-=B;do I[Y++]=U[x++];while(--B);if(x=0,H<A){B=H,A-=B;do I[Y++]=U[x++];while(--B);x=Y-D,S=I}}}else if(x+=H-B,B<A){A-=B;do I[Y++]=U[x++];while(--B);x=Y-D,S=I}while(A>2)I[Y++]=S[x++],I[Y++]=S[x++],I[Y++]=S[x++],A-=3;if(A){if(I[Y++]=S[x++],A>1)I[Y++]=S[x++]}}else{x=Y-D;do I[Y++]=I[x++],I[Y++]=I[x++],I[Y++]=I[x++],A-=3;while(A>2);if(A){if(I[Y++]=I[x++],A>1)I[Y++]=I[x++]}}}else if((B&64)===0){N=M[(N&65535)+(z&(1<<B)-1)];continue q}else{q.msg="invalid distance code",T.mode=GJ;break J}break}}else if((B&64)===0){N=j[(N&65535)+(z&(1<<B)-1)];continue Q}else if(B&32){T.mode=IY;break J}else{q.msg="invalid literal/length code",T.mode=GJ;break J}break}}while(G<X&&Y<K);A=P>>3,G-=A,P-=A<<3,z&=(1<<P)-1,q.next_in=G,q.next_out=Y,q.avail_in=G<X?5+(X-G):5-(G-X),q.avail_out=Y<K?257+(K-Y):257-(Y-K),T.hold=z,T.bits=P;return},_8=15,Wq=852,$q=592,zq=0,Z9=1,Uq=2,RY=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),TY=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),vY=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),gY=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),yY=(J,q,Q,G,X,Y,V,K)=>{const W=K.bits;let Z=0,$=0,H=0,U=0,z=0,P=0,j=0,M=0,O=0,F=0,N,B,A,D,x,S=null,y;const I=new Uint16Array(_8+1),T=new Uint16Array(_8+1);let C=null,R,L,w;for(Z=0;Z<=_8;Z++)I[Z]=0;for($=0;$<G;$++)I[q[Q+$]]++;z=W;for(U=_8;U>=1;U--)if(I[U]!==0)break;if(z>U)z=U;if(U===0)return X[Y++]=1<<24|64<<16|0,X[Y++]=1<<24|64<<16|0,K.bits=1,0;for(H=1;H<U;H++)if(I[H]!==0)break;if(z<H)z=H;M=1;for(Z=1;Z<=_8;Z++)if(M<<=1,M-=I[Z],M<0)return-1;if(M>0&&(J===zq||U!==1))return-1;T[1]=0;for(Z=1;Z<_8;Z++)T[Z+1]=T[Z]+I[Z];for($=0;$<G;$++)if(q[Q+$]!==0)V[T[q[Q+$]]++]=$;if(J===zq)S=C=V,y=20;else if(J===Z9)S=RY,C=TY,y=257;else S=vY,C=gY,y=0;if(F=0,$=0,Z=H,x=Y,P=z,j=0,A=-1,O=1<<z,D=O-1,J===Z9&&O>Wq||J===Uq&&O>$q)return 1;for(;;){if(R=Z-j,V[$]+1<y)L=0,w=V[$];else if(V[$]>=y)L=C[V[$]-y],w=S[V[$]-y];else L=96,w=0;N=1<<Z-j,B=1<<P,H=B;do B-=N,X[x+(F>>j)+B]=R<<24|L<<16|w|0;while(B!==0);N=1<<Z-1;while(F&N)N>>=1;if(N!==0)F&=N-1,F+=N;else F=0;if($++,--I[Z]===0){if(Z===U)break;Z=q[Q+V[$]]}if(Z>z&&(F&D)!==A){if(j===0)j=z;x+=H,P=Z-j,M=1<<P;while(P+j<U){if(M-=I[P+j],M<=0)break;P++,M<<=1}if(O+=1<<P,J===Z9&&O>Wq||J===Uq&&O>$q)return 1;A=F&D,X[A]=z<<24|P<<16|x-Y|0}}if(F!==0)X[x+F]=Z-j<<24|64<<16|0;return K.bits=z,0},j1=yY,EY=0,Z6=1,W6=2,{Z_FINISH:jq,Z_BLOCK:hY,Z_TREES:XJ,Z_OK:j8,Z_STREAM_END:_Y,Z_NEED_DICT:mY,Z_STREAM_ERROR:k0,Z_DATA_ERROR:$6,Z_MEM_ERROR:z6,Z_BUF_ERROR:bY,Z_DEFLATED:Hq}=H8,jJ=16180,Mq=16181,Bq=16182,Lq=16183,Pq=16184,kq=16185,Cq=16186,Oq=16187,wq=16188,xq=16189,$J=16190,h0=16191,W9=16192,Fq=16193,$9=16194,Nq=16195,Sq=16196,Dq=16197,Iq=16198,YJ=16199,VJ=16200,Aq=16201,Rq=16202,Tq=16203,vq=16204,gq=16205,z9=16206,yq=16207,Eq=16208,d=16209,U6=16210,j6=16211,uY=852,cY=592,fY=15,pY=fY,hq=(J)=>{return(J>>>24&255)+(J>>>8&65280)+((J&65280)<<8)+((J&255)<<24)},M8=(J)=>{if(!J)return 1;const q=J.state;if(!q||q.strm!==J||q.mode<jJ||q.mode>j6)return 1;return 0},H6=(J)=>{if(M8(J))return k0;const q=J.state;if(J.total_in=J.total_out=q.total=0,J.msg="",q.wrap)J.adler=q.wrap&1;return q.mode=jJ,q.last=0,q.havedict=0,q.flags=-1,q.dmax=32768,q.head=null,q.hold=0,q.bits=0,q.lencode=q.lendyn=new Int32Array(uY),q.distcode=q.distdyn=new Int32Array(cY),q.sane=1,q.back=-1,j8},M6=(J)=>{if(M8(J))return k0;const q=J.state;return q.wsize=0,q.whave=0,q.wnext=0,H6(J)},B6=(J,q)=>{let Q;if(M8(J))return k0;const G=J.state;if(q<0)Q=0,q=-q;else if(Q=(q>>4)+5,q<48)q&=15;if(q&&(q<8||q>15))return k0;if(G.window!==null&&G.wbits!==q)G.window=null;return G.wrap=Q,G.wbits=q,M6(J)},L6=(J,q)=>{if(!J)return k0;const Q=new lY;J.state=Q,Q.strm=J,Q.window=null,Q.mode=jJ;const G=B6(J,q);if(G!==j8)J.state=null;return G},dY=(J)=>{return L6(J,pY)},_q=!0,U9,j9,iY=(J)=>{if(_q){U9=new Int32Array(512),j9=new Int32Array(32);let q=0;while(q<144)J.lens[q++]=8;while(q<256)J.lens[q++]=9;while(q<280)J.lens[q++]=7;while(q<288)J.lens[q++]=8;j1(Z6,J.lens,0,288,U9,0,J.work,{bits:9}),q=0;while(q<32)J.lens[q++]=5;j1(W6,J.lens,0,32,j9,0,J.work,{bits:5}),_q=!1}J.lencode=U9,J.lenbits=9,J.distcode=j9,J.distbits=5},P6=(J,q,Q,G)=>{let X;const Y=J.state;if(Y.window===null)Y.wsize=1<<Y.wbits,Y.wnext=0,Y.whave=0,Y.window=new Uint8Array(Y.wsize);if(G>=Y.wsize)Y.window.set(q.subarray(Q-Y.wsize,Q),0),Y.wnext=0,Y.whave=Y.wsize;else{if(X=Y.wsize-Y.wnext,X>G)X=G;if(Y.window.set(q.subarray(Q-G,Q-G+X),Y.wnext),G-=X,G)Y.window.set(q.subarray(Q-G,Q),0),Y.wnext=G,Y.whave=Y.wsize;else{if(Y.wnext+=X,Y.wnext===Y.wsize)Y.wnext=0;if(Y.whave<Y.wsize)Y.whave+=X}}return 0},oY=(J,q)=>{let Q,G,X,Y,V,K,W,Z,$,H,U,z,P,j,M=0,O,F,N,B,A,D,x,S;const y=new Uint8Array(4);let I,T;const C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(M8(J)||!J.output||!J.input&&J.avail_in!==0)return k0;if(Q=J.state,Q.mode===h0)Q.mode=W9;V=J.next_out,X=J.output,W=J.avail_out,Y=J.next_in,G=J.input,K=J.avail_in,Z=Q.hold,$=Q.bits,H=K,U=W,S=j8;J:for(;;)switch(Q.mode){case jJ:if(Q.wrap===0){Q.mode=W9;break}while($<16){if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}if(Q.wrap&2&&Z===35615){if(Q.wbits===0)Q.wbits=15;Q.check=0,y[0]=Z&255,y[1]=Z>>>8&255,Q.check=q0(Q.check,y,2,0),Z=0,$=0,Q.mode=Mq;break}if(Q.head)Q.head.done=!1;if(!(Q.wrap&1)||(((Z&255)<<8)+(Z>>8))%31){J.msg="incorrect header check",Q.mode=d;break}if((Z&15)!==Hq){J.msg="unknown compression method",Q.mode=d;break}if(Z>>>=4,$-=4,x=(Z&15)+8,Q.wbits===0)Q.wbits=x;if(x>15||x>Q.wbits){J.msg="invalid window size",Q.mode=d;break}Q.dmax=1<<Q.wbits,Q.flags=0,J.adler=Q.check=1,Q.mode=Z&512?xq:h0,Z=0,$=0;break;case Mq:while($<16){if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}if(Q.flags=Z,(Q.flags&255)!==Hq){J.msg="unknown compression method",Q.mode=d;break}if(Q.flags&57344){J.msg="unknown header flags set",Q.mode=d;break}if(Q.head)Q.head.text=Z>>8&1;if(Q.flags&512&&Q.wrap&4)y[0]=Z&255,y[1]=Z>>>8&255,Q.check=q0(Q.check,y,2,0);Z=0,$=0,Q.mode=Bq;case Bq:while($<32){if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}if(Q.head)Q.head.time=Z;if(Q.flags&512&&Q.wrap&4)y[0]=Z&255,y[1]=Z>>>8&255,y[2]=Z>>>16&255,y[3]=Z>>>24&255,Q.check=q0(Q.check,y,4,0);Z=0,$=0,Q.mode=Lq;case Lq:while($<16){if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}if(Q.head)Q.head.xflags=Z&255,Q.head.os=Z>>8;if(Q.flags&512&&Q.wrap&4)y[0]=Z&255,y[1]=Z>>>8&255,Q.check=q0(Q.check,y,2,0);Z=0,$=0,Q.mode=Pq;case Pq:if(Q.flags&1024){while($<16){if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}if(Q.length=Z,Q.head)Q.head.extra_len=Z;if(Q.flags&512&&Q.wrap&4)y[0]=Z&255,y[1]=Z>>>8&255,Q.check=q0(Q.check,y,2,0);Z=0,$=0}else if(Q.head)Q.head.extra=null;Q.mode=kq;case kq:if(Q.flags&1024){if(z=Q.length,z>K)z=K;if(z){if(Q.head){if(x=Q.head.extra_len-Q.length,!Q.head.extra)Q.head.extra=new Uint8Array(Q.head.extra_len);Q.head.extra.set(G.subarray(Y,Y+z),x)}if(Q.flags&512&&Q.wrap&4)Q.check=q0(Q.check,G,z,Y);K-=z,Y+=z,Q.length-=z}if(Q.length)break J}Q.length=0,Q.mode=Cq;case Cq:if(Q.flags&2048){if(K===0)break J;z=0;do if(x=G[Y+z++],Q.head&&x&&Q.length<65536)Q.head.name+=String.fromCharCode(x);while(x&&z<K);if(Q.flags&512&&Q.wrap&4)Q.check=q0(Q.check,G,z,Y);if(K-=z,Y+=z,x)break J}else if(Q.head)Q.head.name=null;Q.length=0,Q.mode=Oq;case Oq:if(Q.flags&4096){if(K===0)break J;z=0;do if(x=G[Y+z++],Q.head&&x&&Q.length<65536)Q.head.comment+=String.fromCharCode(x);while(x&&z<K);if(Q.flags&512&&Q.wrap&4)Q.check=q0(Q.check,G,z,Y);if(K-=z,Y+=z,x)break J}else if(Q.head)Q.head.comment=null;Q.mode=wq;case wq:if(Q.flags&512){while($<16){if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}if(Q.wrap&4&&Z!==(Q.check&65535)){J.msg="header crc mismatch",Q.mode=d;break}Z=0,$=0}if(Q.head)Q.head.hcrc=Q.flags>>9&1,Q.head.done=!0;J.adler=Q.check=0,Q.mode=h0;break;case xq:while($<32){if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}J.adler=Q.check=hq(Z),Z=0,$=0,Q.mode=$J;case $J:if(Q.havedict===0)return J.next_out=V,J.avail_out=W,J.next_in=Y,J.avail_in=K,Q.hold=Z,Q.bits=$,mY;J.adler=Q.check=1,Q.mode=h0;case h0:if(q===hY||q===XJ)break J;case W9:if(Q.last){Z>>>=$&7,$-=$&7,Q.mode=z9;break}while($<3){if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}switch(Q.last=Z&1,Z>>>=1,$-=1,Z&3){case 0:Q.mode=Fq;break;case 1:if(iY(Q),Q.mode=YJ,q===XJ){Z>>>=2,$-=2;break J}break;case 2:Q.mode=Sq;break;case 3:J.msg="invalid block type",Q.mode=d}Z>>>=2,$-=2;break;case Fq:Z>>>=$&7,$-=$&7;while($<32){if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}if((Z&65535)!==(Z>>>16^65535)){J.msg="invalid stored block lengths",Q.mode=d;break}if(Q.length=Z&65535,Z=0,$=0,Q.mode=$9,q===XJ)break J;case $9:Q.mode=Nq;case Nq:if(z=Q.length,z){if(z>K)z=K;if(z>W)z=W;if(z===0)break J;X.set(G.subarray(Y,Y+z),V),K-=z,Y+=z,W-=z,V+=z,Q.length-=z;break}Q.mode=h0;break;case Sq:while($<14){if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}if(Q.nlen=(Z&31)+257,Z>>>=5,$-=5,Q.ndist=(Z&31)+1,Z>>>=5,$-=5,Q.ncode=(Z&15)+4,Z>>>=4,$-=4,Q.nlen>286||Q.ndist>30){J.msg="too many length or distance symbols",Q.mode=d;break}Q.have=0,Q.mode=Dq;case Dq:while(Q.have<Q.ncode){while($<3){if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}Q.lens[C[Q.have++]]=Z&7,Z>>>=3,$-=3}while(Q.have<19)Q.lens[C[Q.have++]]=0;if(Q.lencode=Q.lendyn,Q.lenbits=7,I={bits:Q.lenbits},S=j1(EY,Q.lens,0,19,Q.lencode,0,Q.work,I),Q.lenbits=I.bits,S){J.msg="invalid code lengths set",Q.mode=d;break}Q.have=0,Q.mode=Iq;case Iq:while(Q.have<Q.nlen+Q.ndist){for(;;){if(M=Q.lencode[Z&(1<<Q.lenbits)-1],O=M>>>24,F=M>>>16&255,N=M&65535,O<=$)break;if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}if(N<16)Z>>>=O,$-=O,Q.lens[Q.have++]=N;else{if(N===16){T=O+2;while($<T){if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}if(Z>>>=O,$-=O,Q.have===0){J.msg="invalid bit length repeat",Q.mode=d;break}x=Q.lens[Q.have-1],z=3+(Z&3),Z>>>=2,$-=2}else if(N===17){T=O+3;while($<T){if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}Z>>>=O,$-=O,x=0,z=3+(Z&7),Z>>>=3,$-=3}else{T=O+7;while($<T){if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}Z>>>=O,$-=O,x=0,z=11+(Z&127),Z>>>=7,$-=7}if(Q.have+z>Q.nlen+Q.ndist){J.msg="invalid bit length repeat",Q.mode=d;break}while(z--)Q.lens[Q.have++]=x}}if(Q.mode===d)break;if(Q.lens[256]===0){J.msg="invalid code -- missing end-of-block",Q.mode=d;break}if(Q.lenbits=9,I={bits:Q.lenbits},S=j1(Z6,Q.lens,0,Q.nlen,Q.lencode,0,Q.work,I),Q.lenbits=I.bits,S){J.msg="invalid literal/lengths set",Q.mode=d;break}if(Q.distbits=6,Q.distcode=Q.distdyn,I={bits:Q.distbits},S=j1(W6,Q.lens,Q.nlen,Q.ndist,Q.distcode,0,Q.work,I),Q.distbits=I.bits,S){J.msg="invalid distances set",Q.mode=d;break}if(Q.mode=YJ,q===XJ)break J;case YJ:Q.mode=VJ;case VJ:if(K>=6&&W>=258){if(J.next_out=V,J.avail_out=W,J.next_in=Y,J.avail_in=K,Q.hold=Z,Q.bits=$,AY(J,U),V=J.next_out,X=J.output,W=J.avail_out,Y=J.next_in,G=J.input,K=J.avail_in,Z=Q.hold,$=Q.bits,Q.mode===h0)Q.back=-1;break}Q.back=0;for(;;){if(M=Q.lencode[Z&(1<<Q.lenbits)-1],O=M>>>24,F=M>>>16&255,N=M&65535,O<=$)break;if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}if(F&&(F&240)===0){B=O,A=F,D=N;for(;;){if(M=Q.lencode[D+((Z&(1<<B+A)-1)>>B)],O=M>>>24,F=M>>>16&255,N=M&65535,B+O<=$)break;if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}Z>>>=B,$-=B,Q.back+=B}if(Z>>>=O,$-=O,Q.back+=O,Q.length=N,F===0){Q.mode=gq;break}if(F&32){Q.back=-1,Q.mode=h0;break}if(F&64){J.msg="invalid literal/length code",Q.mode=d;break}Q.extra=F&15,Q.mode=Aq;case Aq:if(Q.extra){T=Q.extra;while($<T){if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}Q.length+=Z&(1<<Q.extra)-1,Z>>>=Q.extra,$-=Q.extra,Q.back+=Q.extra}Q.was=Q.length,Q.mode=Rq;case Rq:for(;;){if(M=Q.distcode[Z&(1<<Q.distbits)-1],O=M>>>24,F=M>>>16&255,N=M&65535,O<=$)break;if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}if((F&240)===0){B=O,A=F,D=N;for(;;){if(M=Q.distcode[D+((Z&(1<<B+A)-1)>>B)],O=M>>>24,F=M>>>16&255,N=M&65535,B+O<=$)break;if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}Z>>>=B,$-=B,Q.back+=B}if(Z>>>=O,$-=O,Q.back+=O,F&64){J.msg="invalid distance code",Q.mode=d;break}Q.offset=N,Q.extra=F&15,Q.mode=Tq;case Tq:if(Q.extra){T=Q.extra;while($<T){if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}Q.offset+=Z&(1<<Q.extra)-1,Z>>>=Q.extra,$-=Q.extra,Q.back+=Q.extra}if(Q.offset>Q.dmax){J.msg="invalid distance too far back",Q.mode=d;break}Q.mode=vq;case vq:if(W===0)break J;if(z=U-W,Q.offset>z){if(z=Q.offset-z,z>Q.whave){if(Q.sane){J.msg="invalid distance too far back",Q.mode=d;break}}if(z>Q.wnext)z-=Q.wnext,P=Q.wsize-z;else P=Q.wnext-z;if(z>Q.length)z=Q.length;j=Q.window}else j=X,P=V-Q.offset,z=Q.length;if(z>W)z=W;W-=z,Q.length-=z;do X[V++]=j[P++];while(--z);if(Q.length===0)Q.mode=VJ;break;case gq:if(W===0)break J;X[V++]=Q.length,W--,Q.mode=VJ;break;case z9:if(Q.wrap){while($<32){if(K===0)break J;K--,Z|=G[Y++]<<$,$+=8}if(U-=W,J.total_out+=U,Q.total+=U,Q.wrap&4&&U)J.adler=Q.check=Q.flags?q0(Q.check,X,U,V-U):P1(Q.check,X,U,V-U);if(U=W,Q.wrap&4&&(Q.flags?Z:hq(Z))!==Q.check){J.msg="incorrect data check",Q.mode=d;break}Z=0,$=0}Q.mode=yq;case yq:if(Q.wrap&&Q.flags){while($<32){if(K===0)break J;K--,Z+=G[Y++]<<$,$+=8}if(Q.wrap&4&&Z!==(Q.total&4294967295)){J.msg="incorrect length check",Q.mode=d;break}Z=0,$=0}Q.mode=Eq;case Eq:S=_Y;break J;case d:S=$6;break J;case U6:return z6;case j6:default:return k0}if(J.next_out=V,J.avail_out=W,J.next_in=Y,J.avail_in=K,Q.hold=Z,Q.bits=$,Q.wsize||U!==J.avail_out&&Q.mode<d&&(Q.mode<z9||q!==jq)){if(P6(J,J.output,J.next_out,U-J.avail_out));}if(H-=J.avail_in,U-=J.avail_out,J.total_in+=H,J.total_out+=U,Q.total+=U,Q.wrap&4&&U)J.adler=Q.check=Q.flags?q0(Q.check,X,U,J.next_out-U):P1(Q.check,X,U,J.next_out-U);if(J.data_type=Q.bits+(Q.last?64:0)+(Q.mode===h0?128:0)+(Q.mode===YJ||Q.mode===$9?256:0),(H===0&&U===0||q===jq)&&S===j8)S=bY;return S},nY=(J)=>{if(M8(J))return k0;let q=J.state;if(q.window)q.window=null;return J.state=null,j8},rY=(J,q)=>{if(M8(J))return k0;const Q=J.state;if((Q.wrap&2)===0)return k0;return Q.head=q,q.done=!1,j8},aY=(J,q)=>{const Q=q.length;let G,X,Y;if(M8(J))return k0;if(G=J.state,G.wrap!==0&&G.mode!==$J)return k0;if(G.mode===$J){if(X=1,X=P1(X,q,Q,0),X!==G.check)return $6}if(Y=P6(J,q,Q,Q),Y)return G.mode=U6,z6;return G.havedict=1,j8},sY=M6,tY=B6,eY=H6,JV=dY,QV=L6,qV=oY,GV=nY,XV=rY,YV=aY,VV="pako inflate (from Nodeca project)",m0={inflateReset:sY,inflateReset2:tY,inflateResetKeep:eY,inflateInit:JV,inflateInit2:QV,inflate:qV,inflateEnd:GV,inflateGetHeader:XV,inflateSetDictionary:YV,inflateInfo:VV},ZV=KV,k6=Object.prototype.toString,{Z_NO_FLUSH:WV,Z_FINISH:$V,Z_OK:O1,Z_STREAM_END:H9,Z_NEED_DICT:M9,Z_STREAM_ERROR:zV,Z_DATA_ERROR:mq,Z_MEM_ERROR:UV}=H8;N1.prototype.push=function(J,q){const Q=this.strm,G=this.options.chunkSize,X=this.options.dictionary;let Y,V,K;if(this.ended)return!1;if(q===~~q)V=q;else V=q===!0?$V:WV;if(k6.call(J)==="[object ArrayBuffer]")Q.input=new Uint8Array(J);else Q.input=J;Q.next_in=0,Q.avail_in=Q.input.length;for(;;){if(Q.avail_out===0)Q.output=new Uint8Array(G),Q.next_out=0,Q.avail_out=G;if(Y=m0.inflate(Q,V),Y===M9&&X){if(Y=m0.inflateSetDictionary(Q,X),Y===O1)Y=m0.inflate(Q,V);else if(Y===mq)Y=M9}while(Q.avail_in>0&&Y===H9&&Q.state.wrap>0&&J[Q.next_in]!==0)m0.inflateReset(Q),Y=m0.inflate(Q,V);switch(Y){case zV:case mq:case M9:case UV:return this.onEnd(Y),this.ended=!0,!1}if(K=Q.avail_out,Q.next_out){if(Q.avail_out===0||Y===H9)if(this.options.to==="string"){let W=C1.utf8border(Q.output,Q.next_out),Z=Q.next_out-W,$=C1.buf2string(Q.output,W);if(Q.next_out=Z,Q.avail_out=G-Z,Z)Q.output.set(Q.output.subarray(W,W+Z),0);this.onData($)}else this.onData(Q.output.length===Q.next_out?Q.output:Q.output.subarray(0,Q.next_out))}if(Y===O1&&K===0)continue;if(Y===H9)return Y=m0.inflateEnd(this.strm),this.onEnd(Y),this.ended=!0,!0;if(Q.avail_in===0)break}return!0};N1.prototype.onData=function(J){this.chunks.push(J)};N1.prototype.onEnd=function(J){if(J===O1)if(this.options.to==="string")this.result=this.chunks.join("");else this.result=UJ.flattenChunks(this.chunks);this.chunks=[],this.err=J,this.msg=this.strm.msg};var HV=N1,MV=T9,BV=jV,LV=T9,PV=H8,kV={Inflate:HV,inflate:MV,inflateRaw:BV,ungzip:LV,constants:PV},{Deflate:CV,deflate:OV,deflateRaw:wV,gzip:xV}=DY,{Inflate:FV,inflate:NV,inflateRaw:SV,ungzip:DV}=kV,IV=CV,AV=OV,RV=wV,TV=xV,vV=FV,gV=NV,yV=SV,EV=DV,hV=H8,v9={Deflate:IV,deflate:AV,deflateRaw:RV,gzip:TV,Inflate:vV,inflate:gV,inflateRaw:yV,ungzip:EV,constants:hV};var C6=function(J){if(!Number.isSafeInteger(J)||J<0)throw new Error("positive integer expected, got "+J)},_V=function(J){return J instanceof Uint8Array||ArrayBuffer.isView(J)&&J.constructor.name==="Uint8Array"},l8=function(J,...q){if(!_V(J))throw new Error("Uint8Array expected");if(q.length>0&&!q.includes(J.length))throw new Error("Uint8Array expected of length "+q+", got length="+J.length)},O6=function(J){if(typeof J!=="function"||typeof J.create!=="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");C6(J.outputLen),C6(J.blockLen)},d8=function(J,q=!0){if(J.destroyed)throw new Error("Hash instance has been destroyed");if(q&&J.finished)throw new Error("Hash#digest() has already been called")},w6=function(J,q){l8(J);const Q=q.outputLen;if(J.length<Q)throw new Error("digestInto() expects output buffer of length at least "+Q)};var B8=typeof globalThis==="object"&&("crypto"in globalThis)?globalThis.crypto:void 0;function HJ(J){return new DataView(J.buffer,J.byteOffset,J.byteLength)}function w0(J,q){return J<<32-q|J>>>q}function mV(J){if(typeof J!=="string")throw new Error("utf8ToBytes expected string, got "+typeof J);return new Uint8Array((new TextEncoder()).encode(J))}function S1(J){if(typeof J==="string")J=mV(J);return l8(J),J}function x6(...J){let q=0;for(let G=0;G<J.length;G++){const X=J[G];l8(X),q+=X.length}const Q=new Uint8Array(q);for(let G=0,X=0;G<J.length;G++){const Y=J[G];Q.set(Y,X),X+=Y.length}return Q}function F6(J){const q=(G)=>J().update(S1(G)).digest(),Q=J();return q.outputLen=Q.outputLen,q.blockLen=Q.blockLen,q.create=()=>J(),q}function MJ(J=32){if(B8&&typeof B8.getRandomValues==="function")return B8.getRandomValues(new Uint8Array(J));if(B8&&typeof B8.randomBytes==="function")return B8.randomBytes(J);throw new Error("crypto.getRandomValues must be defined")}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */class D1{clone(){return this._cloneInto()}}function bV(J,q,Q,G){if(typeof J.setBigUint64==="function")return J.setBigUint64(q,Q,G);const X=BigInt(32),Y=BigInt(4294967295),V=Number(Q>>X&Y),K=Number(Q&Y),W=G?4:0,Z=G?0:4;J.setUint32(q+W,V,G),J.setUint32(q+Z,K,G)}function N6(J,q,Q){return J&q^~J&Q}function S6(J,q,Q){return J&q^J&Q^q&Q}class g9 extends D1{constructor(J,q,Q,G){super();this.blockLen=J,this.outputLen=q,this.padOffset=Q,this.isLE=G,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(J),this.view=HJ(this.buffer)}update(J){d8(this);const{view:q,buffer:Q,blockLen:G}=this;J=S1(J);const X=J.length;for(let Y=0;Y<X;){const V=Math.min(G-this.pos,X-Y);if(V===G){const K=HJ(J);for(;G<=X-Y;Y+=G)this.process(K,Y);continue}if(Q.set(J.subarray(Y,Y+V),this.pos),this.pos+=V,Y+=V,this.pos===G)this.process(q,0),this.pos=0}return this.length+=J.length,this.roundClean(),this}digestInto(J){d8(this),w6(J,this),this.finished=!0;const{buffer:q,view:Q,blockLen:G,isLE:X}=this;let{pos:Y}=this;if(q[Y++]=128,this.buffer.subarray(Y).fill(0),this.padOffset>G-Y)this.process(Q,0),Y=0;for(let $=Y;$<G;$++)q[$]=0;bV(Q,G-8,BigInt(this.length*8),X),this.process(Q,0);const V=HJ(J),K=this.outputLen;if(K%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const W=K/4,Z=this.get();if(W>Z.length)throw new Error("_sha2: outputLen bigger than state");for(let $=0;$<W;$++)V.setUint32(4*$,Z[$],X)}digest(){const{buffer:J,outputLen:q}=this;this.digestInto(J);const Q=J.slice(0,q);return this.destroy(),Q}_cloneInto(J){J||(J=new this.constructor),J.set(...this.get());const{blockLen:q,buffer:Q,length:G,finished:X,destroyed:Y,pos:V}=this;if(J.length=G,J.pos=V,J.finished=X,J.destroyed=Y,G%q)J.buffer.set(Q);return J}}var uV=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a0=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),s0=new Uint32Array(64);class D6 extends g9{constructor(){super(64,32,8,!1);this.A=a0[0]|0,this.B=a0[1]|0,this.C=a0[2]|0,this.D=a0[3]|0,this.E=a0[4]|0,this.F=a0[5]|0,this.G=a0[6]|0,this.H=a0[7]|0}get(){const{A:J,B:q,C:Q,D:G,E:X,F:Y,G:V,H:K}=this;return[J,q,Q,G,X,Y,V,K]}set(J,q,Q,G,X,Y,V,K){this.A=J|0,this.B=q|0,this.C=Q|0,this.D=G|0,this.E=X|0,this.F=Y|0,this.G=V|0,this.H=K|0}process(J,q){for(let $=0;$<16;$++,q+=4)s0[$]=J.getUint32(q,!1);for(let $=16;$<64;$++){const H=s0[$-15],U=s0[$-2],z=w0(H,7)^w0(H,18)^H>>>3,P=w0(U,17)^w0(U,19)^U>>>10;s0[$]=P+s0[$-7]+z+s0[$-16]|0}let{A:Q,B:G,C:X,D:Y,E:V,F:K,G:W,H:Z}=this;for(let $=0;$<64;$++){const H=w0(V,6)^w0(V,11)^w0(V,25),U=Z+H+N6(V,K,W)+uV[$]+s0[$]|0,P=(w0(Q,2)^w0(Q,13)^w0(Q,22))+S6(Q,G,X)|0;Z=W,W=K,K=V,V=Y+U|0,Y=X,X=G,G=Q,Q=U+P|0}Q=Q+this.A|0,G=G+this.B|0,X=X+this.C|0,Y=Y+this.D|0,V=V+this.E|0,K=K+this.F|0,W=W+this.G|0,Z=Z+this.H|0,this.set(Q,G,X,Y,V,K,W,Z)}roundClean(){s0.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}var BJ=F6(()=>new D6);class y9 extends D1{constructor(J,q){super();this.finished=!1,this.destroyed=!1,O6(J);const Q=S1(q);if(this.iHash=J.create(),typeof this.iHash.update!=="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const G=this.blockLen,X=new Uint8Array(G);X.set(Q.length>G?J.create().update(Q).digest():Q);for(let Y=0;Y<X.length;Y++)X[Y]^=54;this.iHash.update(X),this.oHash=J.create();for(let Y=0;Y<X.length;Y++)X[Y]^=54^92;this.oHash.update(X),X.fill(0)}update(J){return d8(this),this.iHash.update(J),this}digestInto(J){d8(this),l8(J,this.outputLen),this.finished=!0,this.iHash.digestInto(J),this.oHash.update(J),this.oHash.digestInto(J),this.destroy()}digest(){const J=new Uint8Array(this.oHash.outputLen);return this.digestInto(J),J}_cloneInto(J){J||(J=Object.create(Object.getPrototypeOf(this),{}));const{oHash:q,iHash:Q,finished:G,destroyed:X,blockLen:Y,outputLen:V}=this;return J=J,J.finished=G,J.destroyed=X,J.blockLen=Y,J.outputLen=V,J.oHash=q._cloneInto(J.oHash),J.iHash=Q._cloneInto(J.iHash),J}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}var E9=(J,q,Q)=>new y9(J,q).update(Q).digest();E9.create=(J,q)=>new y9(J,q);var c9={};pQ(c9,{validateObject:()=>{{return J8}},utf8ToBytes:()=>{{return dV}},numberToVarBytesBE:()=>{{return pV}},numberToHexUnpadded:()=>{{return k8}},numberToBytesLE:()=>{{return CJ}},numberToBytesBE:()=>{{return x0}},notImplemented:()=>{{return rV}},memoized:()=>{{return OJ}},isBytes:()=>{{return t0}},inRange:()=>{{return e0}},hexToNumber:()=>{{return m9}},hexToBytes:()=>{{return C8}},equalBytes:()=>{{return lV}},ensureBytes:()=>{{return e}},createHmacDrbg:()=>{{return u9}},concatBytes:()=>{{return u0}},bytesToNumberLE:()=>{{return kJ}},bytesToNumberBE:()=>{{return C0}},bytesToHex:()=>{{return P8}},bitSet:()=>{{return oV}},bitMask:()=>{{return I1}},bitLen:()=>{{return b9}},bitGet:()=>{{return iV}},abytes:()=>{{return i8}},abool:()=>{{return L8}},aInRange:()=>{{return R0}}});function t0(J){return J instanceof Uint8Array||ArrayBuffer.isView(J)&&J.constructor.name==="Uint8Array"}function i8(J){if(!t0(J))throw new Error("Uint8Array expected")}function L8(J,q){if(typeof q!=="boolean")throw new Error(J+" boolean expected, got "+q)}function P8(J){i8(J);let q="";for(let Q=0;Q<J.length;Q++)q+=fV[J[Q]];return q}function k8(J){const q=J.toString(16);return q.length&1?"0"+q:q}function m9(J){if(typeof J!=="string")throw new Error("hex string expected, got "+typeof J);return J===""?LJ:BigInt("0x"+J)}var I6=function(J){if(J>=b0._0&&J<=b0._9)return J-b0._0;if(J>=b0.A&&J<=b0.F)return J-(b0.A-10);if(J>=b0.a&&J<=b0.f)return J-(b0.a-10);return};function C8(J){if(typeof J!=="string")throw new Error("hex string expected, got "+typeof J);const q=J.length,Q=q/2;if(q%2)throw new Error("hex string expected, got unpadded hex of length "+q);const G=new Uint8Array(Q);for(let X=0,Y=0;X<Q;X++,Y+=2){const V=I6(J.charCodeAt(Y)),K=I6(J.charCodeAt(Y+1));if(V===void 0||K===void 0){const W=J[Y]+J[Y+1];throw new Error('hex string expected, got non-hex character "'+W+'" at index '+Y)}G[X]=V*16+K}return G}function C0(J){return m9(P8(J))}function kJ(J){return i8(J),m9(P8(Uint8Array.from(J).reverse()))}function x0(J,q){return C8(J.toString(16).padStart(q*2,"0"))}function CJ(J,q){return x0(J,q).reverse()}function pV(J){return C8(k8(J))}function e(J,q,Q){let G;if(typeof q==="string")try{G=C8(q)}catch(Y){throw new Error(J+" must be hex string or Uint8Array, cause: "+Y)}else if(t0(q))G=Uint8Array.from(q);else throw new Error(J+" must be hex string or Uint8Array");const X=G.length;if(typeof Q==="number"&&X!==Q)throw new Error(J+" of length "+Q+" expected, got "+X);return G}function u0(...J){let q=0;for(let G=0;G<J.length;G++){const X=J[G];i8(X),q+=X.length}const Q=new Uint8Array(q);for(let G=0,X=0;G<J.length;G++){const Y=J[G];Q.set(Y,X),X+=Y.length}return Q}function lV(J,q){if(J.length!==q.length)return!1;let Q=0;for(let G=0;G<J.length;G++)Q|=J[G]^q[G];return Q===0}function dV(J){if(typeof J!=="string")throw new Error("string expected");return new Uint8Array((new TextEncoder()).encode(J))}function e0(J,q,Q){return h9(J)&&h9(q)&&h9(Q)&&q<=J&&J<Q}function R0(J,q,Q,G){if(!e0(q,Q,G))throw new Error("expected valid "+J+": "+Q+" <= n < "+G+", got "+q)}function b9(J){let q;for(q=0;J>LJ;J>>=PJ,q+=1);return q}function iV(J,q){return J>>BigInt(q)&PJ}function oV(J,q,Q){return J|(Q?PJ:LJ)<<BigInt(q)}function u9(J,q,Q){if(typeof J!=="number"||J<2)throw new Error("hashLen must be a number");if(typeof q!=="number"||q<2)throw new Error("qByteLen must be a number");if(typeof Q!=="function")throw new Error("hmacFn must be a function");let G=_9(J),X=_9(J),Y=0;const V=()=>{G.fill(1),X.fill(0),Y=0},K=(...H)=>Q(X,G,...H),W=(H=_9())=>{if(X=K(A6([0]),H),G=K(),H.length===0)return;X=K(A6([1]),H),G=K()},Z=()=>{if(Y++>=1000)throw new Error("drbg: tried 1000 values");let H=0;const U=[];while(H<q){G=K();const z=G.slice();U.push(z),H+=G.length}return u0(...U)};return(H,U)=>{V(),W(H);let z=void 0;while(!(z=U(Z())))W();return V(),z}}function J8(J,q,Q={}){const G=(X,Y,V)=>{const K=nV[Y];if(typeof K!=="function")throw new Error("invalid validator function");const W=J[X];if(V&&W===void 0)return;if(!K(W,J))throw new Error("param "+String(X)+" is invalid. Expected "+Y+", got "+W)};for(let[X,Y]of Object.entries(q))G(X,Y,!1);for(let[X,Y]of Object.entries(Q))G(X,Y,!0);return J}function OJ(J){const q=new WeakMap;return(Q,...G)=>{const X=q.get(Q);if(X!==void 0)return X;const Y=J(Q,...G);return q.set(Q,Y),Y}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var LJ=BigInt(0),PJ=BigInt(1),cV=BigInt(2),fV=Array.from({length:256},(J,q)=>q.toString(16).padStart(2,"0")),b0={_0:48,_9:57,A:65,F:70,a:97,f:102},h9=(J)=>typeof J==="bigint"&&LJ<=J,I1=(J)=>(cV<<BigInt(J-1))-PJ,_9=(J)=>new Uint8Array(J),A6=(J)=>Uint8Array.from(J),nV={bigint:(J)=>typeof J==="bigint",function:(J)=>typeof J==="function",boolean:(J)=>typeof J==="boolean",string:(J)=>typeof J==="string",stringOrUint8Array:(J)=>typeof J==="string"||t0(J),isSafeInteger:(J)=>Number.isSafeInteger(J),array:(J)=>Array.isArray(J),field:(J,q)=>q.Fp.isValid(J),hash:(J)=>typeof J==="function"&&Number.isSafeInteger(J.outputLen)},rV=()=>{throw new Error("not implemented")};function J0(J,q){const Q=J%q;return Q>=Q0?Q:q+Q}function eV(J,q,Q){if(q<Q0)throw new Error("invalid exponent, negatives unsupported");if(Q<=Q0)throw new Error("invalid modulus");if(Q===r)return Q0;let G=r;while(q>Q0){if(q&r)G=G*J%Q;J=J*J%Q,q>>=r}return G}function B0(J,q,Q){let G=J;while(q-- >Q0)G*=G,G%=Q;return G}function wJ(J,q){if(J===Q0)throw new Error("invert: expected non-zero number");if(q<=Q0)throw new Error("invert: expected positive modulus, got "+q);let Q=J0(J,q),G=q,X=Q0,Y=r,V=r,K=Q0;while(Q!==Q0){const Z=G/Q,$=G%Q,H=X-V*Z,U=Y-K*Z;G=Q,Q=$,X=V,Y=K,V=H,K=U}if(G!==r)throw new Error("invert: does not exist");return J0(X,q)}function JK(J){const q=(J-r)/O8;let Q,G,X;for(Q=J-r,G=0;Q%O8===Q0;Q/=O8,G++);for(X=O8;X<J&&eV(X,q,J)!==J-r;X++)if(X>1000)throw new Error("Cannot find square root: likely non-prime P");if(G===1){const V=(J+r)/f9;return function K(W,Z){const $=W.pow(Z,V);if(!W.eql(W.sqr($),Z))throw new Error("Cannot find square root");return $}}const Y=(Q+r)/O8;return function V(K,W){if(K.pow(W,q)===K.neg(K.ONE))throw new Error("Cannot find square root");let Z=G,$=K.pow(K.mul(K.ONE,X),Q),H=K.pow(W,Y),U=K.pow(W,Q);while(!K.eql(U,K.ONE)){if(K.eql(U,K.ZERO))return K.ZERO;let z=1;for(let j=K.sqr(U);z<Z;z++){if(K.eql(j,K.ONE))break;j=K.sqr(j)}const P=K.pow($,r<<BigInt(Z-z-1));$=K.sqr(P),H=K.mul(H,P),U=K.mul(U,$),Z=z}return H}}function QK(J){if(J%f9===aV){const q=(J+r)/f9;return function Q(G,X){const Y=G.pow(X,q);if(!G.eql(G.sqr(Y),X))throw new Error("Cannot find square root");return Y}}if(J%T6===R6){const q=(J-R6)/T6;return function Q(G,X){const Y=G.mul(X,O8),V=G.pow(Y,q),K=G.mul(X,V),W=G.mul(G.mul(K,O8),V),Z=G.mul(K,G.sub(W,G.ONE));if(!G.eql(G.sqr(Z),X))throw new Error("Cannot find square root");return Z}}if(J%tV===sV);return JK(J)}function p9(J){const q={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},Q=qK.reduce((G,X)=>{return G[X]="function",G},q);return J8(J,Q)}function GK(J,q,Q){if(Q<Q0)throw new Error("invalid exponent, negatives unsupported");if(Q===Q0)return J.ONE;if(Q===r)return q;let G=J.ONE,X=q;while(Q>Q0){if(Q&r)G=J.mul(G,X);X=J.sqr(X),Q>>=r}return G}function XK(J,q){const Q=new Array(q.length),G=q.reduce((Y,V,K)=>{if(J.is0(V))return Y;return Q[K]=Y,J.mul(Y,V)},J.ONE),X=J.inv(G);return q.reduceRight((Y,V,K)=>{if(J.is0(V))return Y;return Q[K]=J.mul(Y,Q[K]),J.mul(Y,V)},X),Q}function l9(J,q){const Q=q!==void 0?q:J.toString(2).length,G=Math.ceil(Q/8);return{nBitLength:Q,nByteLength:G}}function xJ(J,q,Q=!1,G={}){if(J<=Q0)throw new Error("invalid field: expected ORDER > 0, got "+J);const{nBitLength:X,nByteLength:Y}=l9(J,q);if(Y>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let V;const K=Object.freeze({ORDER:J,isLE:Q,BITS:X,BYTES:Y,MASK:I1(X),ZERO:Q0,ONE:r,create:(W)=>J0(W,J),isValid:(W)=>{if(typeof W!=="bigint")throw new Error("invalid field element: expected bigint, got "+typeof W);return Q0<=W&&W<J},is0:(W)=>W===Q0,isOdd:(W)=>(W&r)===r,neg:(W)=>J0(-W,J),eql:(W,Z)=>W===Z,sqr:(W)=>J0(W*W,J),add:(W,Z)=>J0(W+Z,J),sub:(W,Z)=>J0(W-Z,J),mul:(W,Z)=>J0(W*Z,J),pow:(W,Z)=>GK(K,W,Z),div:(W,Z)=>J0(W*wJ(Z,J),J),sqrN:(W)=>W*W,addN:(W,Z)=>W+Z,subN:(W,Z)=>W-Z,mulN:(W,Z)=>W*Z,inv:(W)=>wJ(W,J),sqrt:G.sqrt||((W)=>{if(!V)V=QK(J);return V(K,W)}),invertBatch:(W)=>XK(K,W),cmov:(W,Z,$)=>$?Z:W,toBytes:(W)=>Q?CJ(W,Y):x0(W,Y),fromBytes:(W)=>{if(W.length!==Y)throw new Error("Field.fromBytes: expected "+Y+" bytes, got "+W.length);return Q?kJ(W):C0(W)}});return Object.freeze(K)}function v6(J){if(typeof J!=="bigint")throw new Error("field order must be bigint");const q=J.toString(2).length;return Math.ceil(q/8)}function d9(J){const q=v6(J);return q+Math.ceil(q/2)}function g6(J,q,Q=!1){const G=J.length,X=v6(q),Y=d9(q);if(G<16||G<Y||G>1024)throw new Error("expected "+Y+"-1024 bytes of input, got "+G);const V=Q?kJ(J):C0(J),K=J0(V,q-r)+r;return Q?CJ(K,X):x0(K,X)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var Q0=BigInt(0),r=BigInt(1),O8=BigInt(2),aV=BigInt(3),f9=BigInt(4),R6=BigInt(5),T6=BigInt(8),sV=BigInt(9),tV=BigInt(16);var qK=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];var i9=function(J,q){const Q=q.negate();return J?Q:q},E6=function(J,q){if(!Number.isSafeInteger(J)||J<=0||J>q)throw new Error("invalid window size, expected [1.."+q+"], got W="+J)},o9=function(J,q){E6(J,q);const Q=Math.ceil(q/J)+1,G=2**(J-1);return{windows:Q,windowSize:G}},YK=function(J,q){if(!Array.isArray(J))throw new Error("array expected");J.forEach((Q,G)=>{if(!(Q instanceof q))throw new Error("invalid point at index "+G)})},VK=function(J,q){if(!Array.isArray(J))throw new Error("array of scalars expected");J.forEach((Q,G)=>{if(!q.isValid(Q))throw new Error("invalid scalar at index "+G)})},r9=function(J){return h6.get(J)||1};function _6(J,q){return{constTimeNegate:i9,hasPrecomputes(Q){return r9(Q)!==1},unsafeLadder(Q,G,X=J.ZERO){let Y=Q;while(G>y6){if(G&FJ)X=X.add(Y);Y=Y.double(),G>>=FJ}return X},precomputeWindow(Q,G){const{windows:X,windowSize:Y}=o9(G,q),V=[];let K=Q,W=K;for(let Z=0;Z<X;Z++){W=K,V.push(W);for(let $=1;$<Y;$++)W=W.add(K),V.push(W);K=W.double()}return V},wNAF(Q,G,X){const{windows:Y,windowSize:V}=o9(Q,q);let{ZERO:K,BASE:W}=J;const Z=BigInt(2**Q-1),$=2**Q,H=BigInt(Q);for(let U=0;U<Y;U++){const z=U*V;let P=Number(X&Z);if(X>>=H,P>V)P-=$,X+=FJ;const j=z,M=z+Math.abs(P)-1,O=U%2!==0,F=P<0;if(P===0)W=W.add(i9(O,G[j]));else K=K.add(i9(F,G[M]))}return{p:K,f:W}},wNAFUnsafe(Q,G,X,Y=J.ZERO){const{windows:V,windowSize:K}=o9(Q,q),W=BigInt(2**Q-1),Z=2**Q,$=BigInt(Q);for(let H=0;H<V;H++){const U=H*K;if(X===y6)break;let z=Number(X&W);if(X>>=$,z>K)z-=Z,X+=FJ;if(z===0)continue;let P=G[U+Math.abs(z)-1];if(z<0)P=P.negate();Y=Y.add(P)}return Y},getPrecomputes(Q,G,X){let Y=n9.get(G);if(!Y){if(Y=this.precomputeWindow(G,Q),Q!==1)n9.set(G,X(Y))}return Y},wNAFCached(Q,G,X){const Y=r9(Q);return this.wNAF(Y,this.getPrecomputes(Y,Q,X),G)},wNAFCachedUnsafe(Q,G,X,Y){const V=r9(Q);if(V===1)return this.unsafeLadder(Q,G,Y);return this.wNAFUnsafe(V,this.getPrecomputes(V,Q,X),G,Y)},setWindowSize(Q,G){E6(G,q),h6.set(Q,G),n9.delete(Q)}}}function m6(J,q,Q,G){if(YK(Q,J),VK(G,q),Q.length!==G.length)throw new Error("arrays of points and scalars must have equal length");const X=J.ZERO,Y=b9(BigInt(Q.length)),V=Y>12?Y-3:Y>4?Y-2:Y?2:1,K=(1<<V)-1,W=new Array(K+1).fill(X),Z=Math.floor((q.BITS-1)/V)*V;let $=X;for(let H=Z;H>=0;H-=V){W.fill(X);for(let z=0;z<G.length;z++){const P=G[z],j=Number(P>>BigInt(H)&BigInt(K));W[j]=W[j].add(Q[z])}let U=X;for(let z=W.length-1,P=X;z>0;z--)P=P.add(W[z]),U=U.add(P);if($=$.add(U),H!==0)for(let z=0;z<V;z++)$=$.double()}return $}function a9(J){return p9(J.Fp),J8(J,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...l9(J.n,J.nBitLength),...J,...{p:J.Fp.ORDER}})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var y6=BigInt(0),FJ=BigInt(1),n9=new WeakMap,h6=new WeakMap;var b6=function(J){if(J.lowS!==void 0)L8("lowS",J.lowS);if(J.prehash!==void 0)L8("prehash",J.prehash)},KK=function(J){const q=a9(J);J8(q,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:Q,Fp:G,a:X}=q;if(Q){if(!G.eql(X,G.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof Q!=="object"||typeof Q.beta!=="bigint"||typeof Q.splitScalar!=="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...q})};function $K(J){const q=KK(J),{Fp:Q}=q,G=xJ(q.n,q.nBitLength),X=q.toBytes||((j,M,O)=>{const F=M.toAffine();return u0(Uint8Array.from([4]),Q.toBytes(F.x),Q.toBytes(F.y))}),Y=q.fromBytes||((j)=>{const M=j.subarray(1),O=Q.fromBytes(M.subarray(0,Q.BYTES)),F=Q.fromBytes(M.subarray(Q.BYTES,2*Q.BYTES));return{x:O,y:F}});function V(j){const{a:M,b:O}=q,F=Q.sqr(j),N=Q.mul(F,j);return Q.add(Q.add(N,Q.mul(j,M)),O)}if(!Q.eql(Q.sqr(q.Gy),V(q.Gx)))throw new Error("bad generator point: equation left != right");function K(j){return e0(j,G0,q.n)}function W(j){const{allowedPrivateKeyLengths:M,nByteLength:O,wrapPrivateKey:F,n:N}=q;if(M&&typeof j!=="bigint"){if(t0(j))j=P8(j);if(typeof j!=="string"||!M.includes(j.length))throw new Error("invalid private key");j=j.padStart(O*2,"0")}let B;try{B=typeof j==="bigint"?j:C0(e("private key",j,O))}catch(A){throw new Error("invalid private key, expected hex or "+O+" bytes, got "+typeof j)}if(F)B=J0(B,N);return R0("private key",B,G0,N),B}function Z(j){if(!(j instanceof U))throw new Error("ProjectivePoint expected")}const $=OJ((j,M)=>{const{px:O,py:F,pz:N}=j;if(Q.eql(N,Q.ONE))return{x:O,y:F};const B=j.is0();if(M==null)M=B?Q.ONE:Q.inv(N);const A=Q.mul(O,M),D=Q.mul(F,M),x=Q.mul(N,M);if(B)return{x:Q.ZERO,y:Q.ZERO};if(!Q.eql(x,Q.ONE))throw new Error("invZ was invalid");return{x:A,y:D}}),H=OJ((j)=>{if(j.is0()){if(q.allowInfinityPoint&&!Q.is0(j.py))return;throw new Error("bad point: ZERO")}const{x:M,y:O}=j.toAffine();if(!Q.isValid(M)||!Q.isValid(O))throw new Error("bad point: x or y not FE");const F=Q.sqr(O),N=V(M);if(!Q.eql(F,N))throw new Error("bad point: equation left != right");if(!j.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class U{constructor(j,M,O){if(this.px=j,this.py=M,this.pz=O,j==null||!Q.isValid(j))throw new Error("x required");if(M==null||!Q.isValid(M))throw new Error("y required");if(O==null||!Q.isValid(O))throw new Error("z required");Object.freeze(this)}static fromAffine(j){const{x:M,y:O}=j||{};if(!j||!Q.isValid(M)||!Q.isValid(O))throw new Error("invalid affine point");if(j instanceof U)throw new Error("projective point not allowed");const F=(N)=>Q.eql(N,Q.ZERO);if(F(M)&&F(O))return U.ZERO;return new U(M,O,Q.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(j){const M=Q.invertBatch(j.map((O)=>O.pz));return j.map((O,F)=>O.toAffine(M[F])).map(U.fromAffine)}static fromHex(j){const M=U.fromAffine(Y(e("pointHex",j)));return M.assertValidity(),M}static fromPrivateKey(j){return U.BASE.multiply(W(j))}static msm(j,M){return m6(U,G,j,M)}_setWindowSize(j){P.setWindowSize(this,j)}assertValidity(){H(this)}hasEvenY(){const{y:j}=this.toAffine();if(Q.isOdd)return!Q.isOdd(j);throw new Error("Field doesn't support isOdd")}equals(j){Z(j);const{px:M,py:O,pz:F}=this,{px:N,py:B,pz:A}=j,D=Q.eql(Q.mul(M,A),Q.mul(N,F)),x=Q.eql(Q.mul(O,A),Q.mul(B,F));return D&&x}negate(){return new U(this.px,Q.neg(this.py),this.pz)}double(){const{a:j,b:M}=q,O=Q.mul(M,u6),{px:F,py:N,pz:B}=this;let{ZERO:A,ZERO:D,ZERO:x}=Q,S=Q.mul(F,F),y=Q.mul(N,N),I=Q.mul(B,B),T=Q.mul(F,N);return T=Q.add(T,T),x=Q.mul(F,B),x=Q.add(x,x),A=Q.mul(j,x),D=Q.mul(O,I),D=Q.add(A,D),A=Q.sub(y,D),D=Q.add(y,D),D=Q.mul(A,D),A=Q.mul(T,A),x=Q.mul(O,x),I=Q.mul(j,I),T=Q.sub(S,I),T=Q.mul(j,T),T=Q.add(T,x),x=Q.add(S,S),S=Q.add(x,S),S=Q.add(S,I),S=Q.mul(S,T),D=Q.add(D,S),I=Q.mul(N,B),I=Q.add(I,I),S=Q.mul(I,T),A=Q.sub(A,S),x=Q.mul(I,y),x=Q.add(x,x),x=Q.add(x,x),new U(A,D,x)}add(j){Z(j);const{px:M,py:O,pz:F}=this,{px:N,py:B,pz:A}=j;let{ZERO:D,ZERO:x,ZERO:S}=Q;const y=q.a,I=Q.mul(q.b,u6);let T=Q.mul(M,N),C=Q.mul(O,B),R=Q.mul(F,A),L=Q.add(M,O),w=Q.add(N,B);L=Q.mul(L,w),w=Q.add(T,C),L=Q.sub(L,w),w=Q.add(M,F);let k=Q.add(N,A);return w=Q.mul(w,k),k=Q.add(T,R),w=Q.sub(w,k),k=Q.add(O,F),D=Q.add(B,A),k=Q.mul(k,D),D=Q.add(C,R),k=Q.sub(k,D),S=Q.mul(y,w),D=Q.mul(I,R),S=Q.add(D,S),D=Q.sub(C,S),S=Q.add(C,S),x=Q.mul(D,S),C=Q.add(T,T),C=Q.add(C,T),R=Q.mul(y,R),w=Q.mul(I,w),C=Q.add(C,R),R=Q.sub(T,R),R=Q.mul(y,R),w=Q.add(w,R),T=Q.mul(C,w),x=Q.add(x,T),T=Q.mul(k,w),D=Q.mul(L,D),D=Q.sub(D,T),T=Q.mul(L,C),S=Q.mul(k,S),S=Q.add(S,T),new U(D,x,S)}subtract(j){return this.add(j.negate())}is0(){return this.equals(U.ZERO)}wNAF(j){return P.wNAFCached(this,j,U.normalizeZ)}multiplyUnsafe(j){const{endo:M,n:O}=q;R0("scalar",j,f0,O);const F=U.ZERO;if(j===f0)return F;if(this.is0()||j===G0)return this;if(!M||P.hasPrecomputes(this))return P.wNAFCachedUnsafe(this,j,U.normalizeZ);let{k1neg:N,k1:B,k2neg:A,k2:D}=M.splitScalar(j),x=F,S=F,y=this;while(B>f0||D>f0){if(B&G0)x=x.add(y);if(D&G0)S=S.add(y);y=y.double(),B>>=G0,D>>=G0}if(N)x=x.negate();if(A)S=S.negate();return S=new U(Q.mul(S.px,M.beta),S.py,S.pz),x.add(S)}multiply(j){const{endo:M,n:O}=q;R0("scalar",j,G0,O);let F,N;if(M){const{k1neg:B,k1:A,k2neg:D,k2:x}=M.splitScalar(j);let{p:S,f:y}=this.wNAF(A),{p:I,f:T}=this.wNAF(x);S=P.constTimeNegate(B,S),I=P.constTimeNegate(D,I),I=new U(Q.mul(I.px,M.beta),I.py,I.pz),F=S.add(I),N=y.add(T)}else{const{p:B,f:A}=this.wNAF(j);F=B,N=A}return U.normalizeZ([F,N])[0]}multiplyAndAddUnsafe(j,M,O){const F=U.BASE,N=(A,D)=>D===f0||D===G0||!A.equals(F)?A.multiplyUnsafe(D):A.multiply(D),B=N(this,M).add(N(j,O));return B.is0()?void 0:B}toAffine(j){return $(this,j)}isTorsionFree(){const{h:j,isTorsionFree:M}=q;if(j===G0)return!0;if(M)return M(U,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:j,clearCofactor:M}=q;if(j===G0)return this;if(M)return M(U,this);return this.multiplyUnsafe(q.h)}toRawBytes(j=!0){return L8("isCompressed",j),this.assertValidity(),X(U,this,j)}toHex(j=!0){return L8("isCompressed",j),P8(this.toRawBytes(j))}}U.BASE=new U(q.Gx,q.Gy,Q.ONE),U.ZERO=new U(Q.ZERO,Q.ONE,Q.ZERO);const z=q.nBitLength,P=_6(U,q.endo?Math.ceil(z/2):z);return{CURVE:q,ProjectivePoint:U,normPrivateKeyToScalar:W,weierstrassEquation:V,isWithinCurveOrder:K}}var zK=function(J){const q=a9(J);return J8(q,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...q})};function f6(J){const q=zK(J),{Fp:Q,n:G}=q,X=Q.BYTES+1,Y=2*Q.BYTES+1;function V(L){return J0(L,G)}function K(L){return wJ(L,G)}const{ProjectivePoint:W,normPrivateKeyToScalar:Z,weierstrassEquation:$,isWithinCurveOrder:H}=$K({...q,toBytes(L,w,k){const v=w.toAffine(),g=Q.toBytes(v.x),E=u0;if(L8("isCompressed",k),k)return E(Uint8Array.from([w.hasEvenY()?2:3]),g);else return E(Uint8Array.from([4]),g,Q.toBytes(v.y))},fromBytes(L){const w=L.length,k=L[0],v=L.subarray(1);if(w===X&&(k===2||k===3)){const g=C0(v);if(!e0(g,G0,Q.ORDER))throw new Error("Point is not on curve");const E=$(g);let c;try{c=Q.sqrt(E)}catch(s){const b=s instanceof Error?": "+s.message:"";throw new Error("Point is not on curve"+b)}const p=(c&G0)===G0;if((k&1)===1!==p)c=Q.neg(c);return{x:g,y:c}}else if(w===Y&&k===4){const g=Q.fromBytes(v.subarray(0,Q.BYTES)),E=Q.fromBytes(v.subarray(Q.BYTES,2*Q.BYTES));return{x:g,y:E}}else{const g=X,E=Y;throw new Error("invalid Point, expected length of "+g+", or uncompressed "+E+", got "+w)}}}),U=(L)=>P8(x0(L,q.nByteLength));function z(L){const w=G>>G0;return L>w}function P(L){return z(L)?V(-L):L}const j=(L,w,k)=>C0(L.slice(w,k));class M{constructor(L,w,k){this.r=L,this.s=w,this.recovery=k,this.assertValidity()}static fromCompact(L){const w=q.nByteLength;return L=e("compactSignature",L,w*2),new M(j(L,0,w),j(L,w,2*w))}static fromDER(L){const{r:w,s:k}=c0.toSig(e("DER",L));return new M(w,k)}assertValidity(){R0("r",this.r,G0,G),R0("s",this.s,G0,G)}addRecoveryBit(L){return new M(this.r,this.s,L)}recoverPublicKey(L){const{r:w,s:k,recovery:v}=this,g=D(e("msgHash",L));if(v==null||![0,1,2,3].includes(v))throw new Error("recovery id invalid");const E=v===2||v===3?w+q.n:w;if(E>=Q.ORDER)throw new Error("recovery id 2 or 3 invalid");const c=(v&1)===0?"02":"03",p=W.fromHex(c+U(E)),h=K(E),s=V(-g*h),b=V(k*h),a=W.BASE.multiplyAndAddUnsafe(p,s,b);if(!a)throw new Error("point at infinify");return a.assertValidity(),a}hasHighS(){return z(this.s)}normalizeS(){return this.hasHighS()?new M(this.r,V(-this.s),this.recovery):this}toDERRawBytes(){return C8(this.toDERHex())}toDERHex(){return c0.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return C8(this.toCompactHex())}toCompactHex(){return U(this.r)+U(this.s)}}const O={isValidPrivateKey(L){try{return Z(L),!0}catch(w){return!1}},normPrivateKeyToScalar:Z,randomPrivateKey:()=>{const L=d9(q.n);return g6(q.randomBytes(L),q.n)},precompute(L=8,w=W.BASE){return w._setWindowSize(L),w.multiply(BigInt(3)),w}};function F(L,w=!0){return W.fromPrivateKey(L).toRawBytes(w)}function N(L){const w=t0(L),k=typeof L==="string",v=(w||k)&&L.length;if(w)return v===X||v===Y;if(k)return v===2*X||v===2*Y;if(L instanceof W)return!0;return!1}function B(L,w,k=!0){if(N(L))throw new Error("first arg must be private key");if(!N(w))throw new Error("second arg must be public key");return W.fromHex(w).multiply(Z(L)).toRawBytes(k)}const A=q.bits2int||function(L){if(L.length>8192)throw new Error("input is too large");const w=C0(L),k=L.length*8-q.nBitLength;return k>0?w>>BigInt(k):w},D=q.bits2int_modN||function(L){return V(A(L))},x=I1(q.nBitLength);function S(L){return R0("num < 2^"+q.nBitLength,L,f0,x),x0(L,q.nByteLength)}function y(L,w,k=I){if(["recovered","canonical"].some((V0)=>(V0 in k)))throw new Error("sign() legacy options not supported");const{hash:v,randomBytes:g}=q;let{lowS:E,prehash:c,extraEntropy:p}=k;if(E==null)E=!0;if(L=e("msgHash",L),b6(k),c)L=e("prehashed msgHash",v(L));const h=D(L),s=Z(w),b=[S(s),S(h)];if(p!=null&&p!==!1){const V0=p===!0?g(Q.BYTES):p;b.push(e("extraEntropy",V0))}const a=u0(...b),f=h;function i(V0){const t=A(V0);if(!H(t))return;const U0=K(t),j0=W.BASE.multiply(t).toAffine(),X0=V(j0.x);if(X0===f0)return;const V8=V(U0*V(f+X0*s));if(V8===f0)return;let y0=(j0.x===X0?0:2)|Number(j0.y&G0),bQ=V8;if(E&&z(V8))bQ=P(V8),y0^=1;return new M(X0,bQ,y0)}return{seed:a,k2sig:i}}const I={lowS:q.lowS,prehash:!1},T={lowS:q.lowS,prehash:!1};function C(L,w,k=I){const{seed:v,k2sig:g}=y(L,w,k),E=q;return u9(E.hash.outputLen,E.nByteLength,E.hmac)(v,g)}W.BASE._setWindowSize(8);function R(L,w,k,v=T){const g=L;w=e("msgHash",w),k=e("publicKey",k);const{lowS:E,prehash:c,format:p}=v;if(b6(v),("strict"in v))throw new Error("options.strict was renamed to lowS");if(p!==void 0&&p!=="compact"&&p!=="der")throw new Error("format must be compact or der");const h=typeof g==="string"||t0(g),s=!h&&!p&&typeof g==="object"&&g!==null&&typeof g.r==="bigint"&&typeof g.s==="bigint";if(!h&&!s)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let b=void 0,a;try{if(s)b=new M(g.r,g.s);if(h){try{if(p!=="compact")b=M.fromDER(g)}catch(y0){if(!(y0 instanceof c0.Err))throw y0}if(!b&&p!=="der")b=M.fromCompact(g)}a=W.fromHex(k)}catch(y0){return!1}if(!b)return!1;if(E&&b.hasHighS())return!1;if(c)w=q.hash(w);const{r:f,s:i}=b,V0=D(w),t=K(i),U0=V(V0*t),j0=V(f*t),X0=W.BASE.multiplyAndAddUnsafe(a,U0,j0)?.toAffine();if(!X0)return!1;return V(X0.x)===f}return{CURVE:q,getPublicKey:F,getSharedSecret:B,sign:C,verify:R,ProjectivePoint:W,Signature:M,utils:O}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var{bytesToNumberBE:ZK,hexToBytes:WK}=c9;class c6 extends Error{constructor(J=""){super(J)}}var c0={Err:c6,_tlv:{encode:(J,q)=>{const{Err:Q}=c0;if(J<0||J>256)throw new Q("tlv.encode: wrong tag");if(q.length&1)throw new Q("tlv.encode: unpadded data");const G=q.length/2,X=k8(G);if(X.length/2&128)throw new Q("tlv.encode: long form length too big");const Y=G>127?k8(X.length/2|128):"";return k8(J)+Y+X+q},decode(J,q){const{Err:Q}=c0;let G=0;if(J<0||J>256)throw new Q("tlv.encode: wrong tag");if(q.length<2||q[G++]!==J)throw new Q("tlv.decode: wrong tlv");const X=q[G++],Y=!!(X&128);let V=0;if(!Y)V=X;else{const W=X&127;if(!W)throw new Q("tlv.decode(long): indefinite length not supported");if(W>4)throw new Q("tlv.decode(long): byte length is too big");const Z=q.subarray(G,G+W);if(Z.length!==W)throw new Q("tlv.decode: length bytes not complete");if(Z[0]===0)throw new Q("tlv.decode(long): zero leftmost byte");for(let $ of Z)V=V<<8|$;if(G+=W,V<128)throw new Q("tlv.decode(long): not minimal encoding")}const K=q.subarray(G,G+V);if(K.length!==V)throw new Q("tlv.decode: wrong value length");return{v:K,l:q.subarray(G+V)}}},_int:{encode(J){const{Err:q}=c0;if(J<f0)throw new q("integer: negative integers are not allowed");let Q=k8(J);if(Number.parseInt(Q[0],16)&8)Q="00"+Q;if(Q.length&1)throw new q("unexpected DER parsing assertion: unpadded hex");return Q},decode(J){const{Err:q}=c0;if(J[0]&128)throw new q("invalid signature integer: negative");if(J[0]===0&&!(J[1]&128))throw new q("invalid signature integer: unnecessary leading zero");return ZK(J)}},toSig(J){const{Err:q,_int:Q,_tlv:G}=c0,X=typeof J==="string"?WK(J):J;i8(X);const{v:Y,l:V}=G.decode(48,X);if(V.length)throw new q("invalid signature: left bytes after parsing");const{v:K,l:W}=G.decode(2,Y),{v:Z,l:$}=G.decode(2,W);if($.length)throw new q("invalid signature: left bytes after parsing");return{r:Q.decode(K),s:Q.decode(Z)}},hexFromSig(J){const{_tlv:q,_int:Q}=c0,G=q.encode(2,Q.encode(J.r)),X=q.encode(2,Q.encode(J.s)),Y=G+X;return q.encode(48,Y)}},f0=BigInt(0),G0=BigInt(1),v$=BigInt(2),u6=BigInt(3),g$=BigInt(4);function UK(J){return{hash:J,hmac:(q,...Q)=>E9(J,q,x6(...Q)),randomBytes:MJ}}function p6(J,q){const Q=(G)=>f6({...J,...UK(G)});return{...Q(q),create:Q}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var i6=function(J){const q=T1,Q=BigInt(3),G=BigInt(6),X=BigInt(11),Y=BigInt(22),V=BigInt(23),K=BigInt(44),W=BigInt(88),Z=J*J*J%q,$=Z*Z*J%q,H=B0($,Q,q)*$%q,U=B0(H,Q,q)*$%q,z=B0(U,SJ,q)*Z%q,P=B0(z,X,q)*z%q,j=B0(P,Y,q)*P%q,M=B0(j,K,q)*j%q,O=B0(M,W,q)*M%q,F=B0(O,K,q)*j%q,N=B0(F,Q,q)*$%q,B=B0(N,V,q)*P%q,A=B0(B,G,q)*Z%q,D=B0(A,SJ,q);if(!t9.eql(t9.sqr(D),J))throw new Error("Cannot find square root");return D},DJ=function(J,...q){let Q=d6[J];if(Q===void 0){const G=BJ(Uint8Array.from(J,(X)=>X.charCodeAt(0)));Q=u0(G,G),d6[J]=Q}return BJ(u0(Q,...q))},JQ=function(J){let q=QQ.utils.normPrivateKeyToScalar(J),Q=GQ.fromPrivateKey(q);return{scalar:Q.hasEvenY()?q:R1(-q),bytes:qQ(Q)}},n6=function(J){R0("x",J,A1,T1);const q=s9(J*J),Q=s9(q*J+BigInt(7));let G=i6(Q);if(G%SJ!==o6)G=s9(-G);const X=new GQ(J,G,A1);return X.assertValidity(),X},r6=function(...J){return R1(o8(DJ("BIP0340/challenge",...J)))},HK=function(J){return JQ(J).bytes},MK=function(J,q,Q=MJ(32)){const G=e("message",J),{bytes:X,scalar:Y}=JQ(q),V=e("auxRand",Q,32),K=e9(Y^o8(DJ("BIP0340/aux",V))),W=DJ("BIP0340/nonce",K,X,G),Z=R1(o8(W));if(Z===o6)throw new Error("sign failed: k is zero");const{bytes:$,scalar:H}=JQ(Z),U=r6($,X,G),z=new Uint8Array(64);if(z.set($,0),z.set(e9(R1(H+U*Y)),32),!a6(z,G,X))throw new Error("sign: Invalid signature produced");return z},a6=function(J,q,Q){const G=e("signature",J,64),X=e("message",q),Y=e("publicKey",Q,32);try{const V=n6(o8(Y)),K=o8(G.subarray(0,32));if(!e0(K,A1,T1))return!1;const W=o8(G.subarray(32,64));if(!e0(W,A1,NJ))return!1;const Z=r6(e9(K),qQ(V),X),$=jK(V,W,R1(-Z));if(!$||!$.hasEvenY()||$.toAffine().x!==K)return!1;return!0}catch(V){return!1}};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var T1=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),NJ=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),A1=BigInt(1),SJ=BigInt(2),l6=(J,q)=>(J+q/SJ)/q,t9=xJ(T1,void 0,void 0,{sqrt:i6}),QQ=p6({a:BigInt(0),b:BigInt(7),Fp:t9,n:NJ,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:(J)=>{const q=NJ,Q=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),G=-A1*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),X=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),Y=Q,V=BigInt("0x100000000000000000000000000000000"),K=l6(Y*J,q),W=l6(-G*J,q);let Z=J0(J-K*Q-W*X,q),$=J0(-K*G-W*Y,q);const H=Z>V,U=$>V;if(H)Z=q-Z;if(U)$=q-$;if(Z>V||$>V)throw new Error("splitScalar: Endomorphism failed, k="+J);return{k1neg:H,k1:Z,k2neg:U,k2:$}}}},BJ),o6=BigInt(0),d6={},qQ=(J)=>J.toRawBytes(!0).slice(1),e9=(J)=>x0(J,32),s9=(J)=>J0(J,T1),R1=(J)=>J0(J,NJ),GQ=QQ.ProjectivePoint,jK=(J,q,Q)=>GQ.BASE.multiplyAndAddUnsafe(J,q,Q),o8=C0,IJ=(()=>({getPublicKey:HK,sign:MK,verify:a6,utils:{randomPrivateKey:QQ.utils.randomPrivateKey,lift_x:n6,pointToBytes:qQ,numberToBytesBE:x0,bytesToNumberBE:C0,taggedHash:DJ,mod:J0}}))();var{floor:XQ,random:BK,sin:LK}=Math,w8="Trystero",Q8=(J,q)=>Array(J).fill().map(q);var RJ=(J)=>Q8(J,()=>"0123456789AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz"[XQ(BK()*"0123456789AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz".length)]).join(""),T0=RJ(20),q8=Promise.all.bind(Promise),v1=typeof window!=="undefined",{entries:TJ,fromEntries:YQ,keys:s6}=Object,p0=()=>{},F0=(J)=>new Error(`Trystero: ${J}`),PK=new TextEncoder,kK=new TextDecoder,v0=(J)=>PK.encode(J),n8=(J)=>kK.decode(J),vJ=(J)=>J.reduce((q,Q)=>q+Q.toString(16).padStart(2,"0"),""),g1=(...J)=>J.join("@"),CK=(J,q)=>{const Q=[...J],G=()=>{const Y=LK(q++)*1e4;return Y-XQ(Y)};let X=Q.length;while(X){const Y=XQ(G()*X--);[Q[X],Q[Y]]=[Q[Y],Q[X]]}return Q},t6=(J,q,Q,G)=>{return(J.relayUrls||(G?CK(q,VQ(J.appId)):q)).slice(0,J.relayUrls?J.relayUrls.length:J.relayRedundancy||Q)},O0=JSON.stringify,x8=JSON.parse,VQ=(J,q=Number.MAX_SAFE_INTEGER)=>J.split("").reduce((Q,G)=>Q+G.charCodeAt(0),0)%q;var AJ={},e6=(J,q)=>{const Q={},G=()=>{const X=new WebSocket(J);X.onclose=()=>{AJ[J]??=3333,setTimeout(G,AJ[J]),AJ[J]*=2},X.onmessage=(Y)=>q(Y.data),Q.socket=X,Q.url=X.url,Q.ready=new Promise((Y)=>X.onopen=()=>{Y(Q),AJ[J]=3333}),Q.send=(Y)=>{if(X.readyState===1)X.send(Y)}};return G(),Q},J5=(J)=>()=>YQ(TJ(J).map(([q,Q])=>[q,Q.socket]));var ZQ="AES-GCM",KQ={},OK=(J)=>btoa(String.fromCharCode.apply(null,new Uint8Array(J))),wK=(J)=>{const q=atob(J);return new Uint8Array(q.length).map((Q,G)=>q.charCodeAt(G)).buffer},y1=async(J)=>{if(KQ[J])return KQ[J];const q=Array.from(new Uint8Array(await crypto.subtle.digest("SHA-1",v0(J)))).map((Q)=>Q.toString(36)).join("");return KQ[J]=q,q},Q5=async(J,q,Q)=>crypto.subtle.importKey("raw",await crypto.subtle.digest({name:"SHA-256"},v0(`${J}:${q}:${Q}`)),{name:ZQ},!1,["encrypt","decrypt"]),q5="$",G5=",",X5=async(J,q)=>{const Q=crypto.getRandomValues(new Uint8Array(16));return Q.join(G5)+q5+OK(await crypto.subtle.encrypt({name:ZQ,iv:Q},await J,v0(q)))},Y5=async(J,q)=>{const[Q,G]=q.split(q5);return n8(await crypto.subtle.decrypt({name:ZQ,iv:new Uint8Array(Q.split(G5))},await J,wK(G)))};var bG=o1(z5(),1);var l=typeof window!=="undefined"?window:self,hJ=l.RTCPeerConnection||l.mozRTCPeerConnection||l.webkitRTCPeerConnection,U5=l.RTCSessionDescription||l.mozRTCSessionDescription||l.webkitRTCSessionDescription,j5=l.RTCIceCandidate||l.mozRTCIceCandidate||l.webkitRTCIceCandidate,s$=l.RTCIceTransport,t$=l.RTCDataChannel,e$=l.RTCSctpTransport,Jz=l.RTCDtlsTransport,Qz=l.RTCCertificate,qz=l.MediaStream,Gz=l.MediaStreamTrack,Xz=l.MediaStreamTrackEvent,Yz=l.RTCPeerConnectionIceEvent,Vz=l.RTCDataChannelEvent,Kz=l.RTCTrackEvent,Zz=l.RTCError,Wz=l.RTCErrorEvent,$z=l.RTCRtpTransceiver,zz=l.RTCRtpReceiver,Uz=l.RTCRtpSender;var uG=o1(RG(),1),n=o1(SQ(),1);var yG=[],gG=[];for(let J=0;J<256;J++)if(yG[J]="0123456789abcdef"[J>>4&15]+"0123456789abcdef"[J&15],J<16)if(J<10)gG[48+J]=J;else gG[87+J]=J;var oJ=(J)=>{const q=J.length;let Q="",G=0;while(G<q)Q+=yG[J[G++]];return Q};var EG="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",GW=typeof Uint8Array==="undefined"?[]:new Uint8Array(256);for(p1=0;p1<EG.length;p1++)GW[EG.charCodeAt(p1)]=p1;var p1;var XW=new TextEncoder,_G=(J)=>XW.encode(J);var hG=typeof window!=="undefined"?window:self,DQ=hG.crypto||hG.msCrypto||{},yz=DQ.subtle||DQ.webkitSubtle;var IQ=(J)=>{const q=new Uint8Array(J);return DQ.getRandomValues(q)};var mG=function(J){return J.replace(/a=ice-options:trickle\s\n/g,"")},ZW=function(J){console.warn(J)};/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var YW=bG.default("simple-peer"),AQ=65536,VW=5000,KW=5000;class T8 extends uG.Duplex{_pc;constructor(J){J=Object.assign({allowHalfOpen:!1},J);super(J);if(this.__objectMode=!!J.objectMode,this._id=oJ(IQ(4)).slice(0,7),this._debug("new peer %o",J),this.channelName=J.initiator?J.channelName||oJ(IQ(20)):null,this.initiator=J.initiator||!1,this.channelConfig=J.channelConfig||T8.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},T8.config,J.config),this.offerOptions=J.offerOptions||{},this.answerOptions=J.answerOptions||{},this.sdpTransform=J.sdpTransform||((q)=>q),this.trickle=J.trickle!==void 0?J.trickle:!0,this.allowHalfTrickle=J.allowHalfTrickle!==void 0?J.allowHalfTrickle:!1,this.iceCompleteTimeout=J.iceCompleteTimeout||VW,this._destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,!hJ)if(typeof window==="undefined")throw n.default(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT");else throw n.default(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new hJ(this.config)}catch(q){this.__destroy(n.default(q,"ERR_PC_CONSTRUCTOR"));return}if(this._isReactNativeWebrtc=typeof this._pc._peerConnectionId==="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=(q)=>{this._onIceCandidate(q)},typeof this._pc.peerIdentity==="object")this._pc.peerIdentity.catch((q)=>{this.__destroy(n.default(q,"ERR_PC_PEER_IDENTITY"))});if(this.initiator||this.channelNegotiated)this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)});else this._pc.ondatachannel=(q)=>{this._setupData(q)};this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(J){if(this._destroying)return;if(this.destroyed)throw n.default(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof J==="string")try{J=JSON.parse(J)}catch(q){J={}}if(this._debug("signal()"),J.renegotiate&&this.initiator)this._debug("got request to renegotiate"),this._needsNegotiation();if(J.transceiverRequest&&this.initiator)this._debug("got request for transceiver"),this.addTransceiver(J.transceiverRequest.kind,J.transceiverRequest.init);if(J.candidate)if(this._pc.remoteDescription&&this._pc.remoteDescription.type)this._addIceCandidate(J.candidate);else this._pendingCandidates.push(J.candidate);if(J.sdp)this._pc.setRemoteDescription(new U5(J)).then(()=>{if(this.destroyed)return;if(this._pendingCandidates.forEach((q)=>{this._addIceCandidate(q)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer")this._createAnswer()}).catch((q)=>{this.__destroy(n.default(q,"ERR_SET_REMOTE_DESCRIPTION"))});if(!J.sdp&&!J.candidate&&!J.renegotiate&&!J.transceiverRequest)this.__destroy(n.default(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}_addIceCandidate(J){const q=new j5(J);this._pc.addIceCandidate(q).catch((Q)=>{if(!q.address||q.address.endsWith(".local"))ZW("Ignoring unsupported ICE candidate.");else this.__destroy(n.default(Q,"ERR_ADD_ICE_CANDIDATE"))})}send(J){if(this._destroying)return;if(this.destroyed)throw n.default(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(J)}_needsNegotiation(){if(this._debug("_needsNegotiation"),this._batchedNegotiation)return;this._batchedNegotiation=!0,queueMicrotask(()=>{if(this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation)this._debug("starting batched negotiation"),this.negotiate();else this._debug("non-initiator initial negotiation request discarded");this._firstNegotiation=!1})}negotiate(){if(this._destroying)return;if(this.destroyed)throw n.default(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");if(this.initiator)if(this._isNegotiating)this._queuedNegotiation=!0,this._debug("already negotiating, queueing");else this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0);else if(this._isNegotiating)this._queuedNegotiation=!0,this._debug("already negotiating, queueing");else this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0});this._isNegotiating=!0}_final(J){if(!this._readableState.ended)this.push(null);J(null)}__destroy(J){this.end(),this._destroy(()=>{},J)}_destroy(J,q){if(this.destroyed||this._destroying)return;this._destroying=!0,this._debug("destroying (error: %s)",q&&(q.message||q)),setTimeout(()=>{if(this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound)this.removeListener("finish",this._onFinishBound);if(this._onFinishBound=null,this._channel){try{this._channel.close()}catch(Q){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(Q){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}if(this._pc=null,this._channel=null,q)this.emit("error",q);J()},0)}_setupData(J){if(!J.channel)return this.__destroy(n.default(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));if(this._channel=J.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold==="number")this._channel.bufferedAmountLowThreshold=AQ;this.channelName=this._channel.label,this._channel.onmessage=(Q)=>{this._onChannelMessage(Q)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=(Q)=>{const G=Q.error instanceof Error?Q.error:new Error(`Datachannel error: ${Q.message} ${Q.filename}:${Q.lineno}:${Q.colno}`);this.__destroy(n.default(G,"ERR_DATA_CHANNEL"))};let q=!1;this._closingInterval=setInterval(()=>{if(this._channel&&this._channel.readyState==="closing"){if(q)this._onChannelClose();q=!0}else q=!1},KW)}_write(J,q){if(this.destroyed)return q(n.default(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(J)}catch(Q){return this.__destroy(n.default(Q,"ERR_DATA_CHANNEL"))}if(this._channel.bufferedAmount>AQ)this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=q;else q(null)}else this._debug("write before connect"),this._chunk=J,this._cb=q}_onFinish(){if(this.destroyed)return;const J=()=>{setTimeout(()=>this.__destroy(),1000)};if(this._connected)J();else this.once("connect",J)}_startIceCompleteTimeout(){if(this.destroyed)return;if(this._iceCompleteTimer)return;this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{if(!this._iceComplete)this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete")},this.iceCompleteTimeout)}_createOffer(){if(this.destroyed)return;this._pc.createOffer(this.offerOptions).then((J)=>{if(this.destroyed)return;if(!this.trickle&&!this.allowHalfTrickle)J.sdp=mG(J.sdp);J.sdp=this.sdpTransform(J.sdp);const q=()=>{if(this.destroyed)return;const X=this._pc.localDescription||J;this._debug("signal"),this.emit("signal",{type:X.type,sdp:X.sdp})},Q=()=>{if(this._debug("createOffer success"),this.destroyed)return;if(this.trickle||this._iceComplete)q();else this.once("_iceComplete",q)},G=(X)=>{this.__destroy(n.default(X,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(J).then(Q).catch(G)}).catch((J)=>{this.__destroy(n.default(J,"ERR_CREATE_OFFER"))})}_createAnswer(){if(this.destroyed)return;this._pc.createAnswer(this.answerOptions).then((J)=>{if(this.destroyed)return;if(!this.trickle&&!this.allowHalfTrickle)J.sdp=mG(J.sdp);J.sdp=this.sdpTransform(J.sdp);const q=()=>{if(this.destroyed)return;const X=this._pc.localDescription||J;if(this._debug("signal"),this.emit("signal",{type:X.type,sdp:X.sdp}),!this.initiator)this._requestMissingTransceivers?.()},Q=()=>{if(this.destroyed)return;if(this.trickle||this._iceComplete)q();else this.once("_iceComplete",q)},G=(X)=>{this.__destroy(n.default(X,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(J).then(Q).catch(G)}).catch((J)=>{this.__destroy(n.default(J,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){if(this.destroyed||this._destroying)return;if(this._pc.connectionState==="failed")this.__destroy(n.default(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const J=this._pc.iceConnectionState,q=this._pc.iceGatheringState;if(this._debug("iceStateChange (connection: %s) (gathering: %s)",J,q),this.emit("iceStateChange",J,q),J==="connected"||J==="completed")this._pcReady=!0,this._maybeReady();if(J==="failed")this.__destroy(n.default(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE"));if(J==="closed")this.__destroy(n.default(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(J){const q=(Q)=>{if(Object.prototype.toString.call(Q.values)==="[object Array]")Q.values.forEach((G)=>{Object.assign(Q,G)});return Q};if(this._pc.getStats.length===0||this._isReactNativeWebrtc)this._pc.getStats().then((Q)=>{const G=[];Q.forEach((X)=>{G.push(q(X))}),J(null,G)},(Q)=>J(Q));else if(this._pc.getStats.length>0)this._pc.getStats((Q)=>{if(this.destroyed)return;const G=[];Q.result().forEach((X)=>{const Y={};X.names().forEach((V)=>{Y[V]=X.stat(V)}),Y.id=X.id,Y.type=X.type,Y.timestamp=X.timestamp,G.push(q(Y))}),J(null,G)},(Q)=>J(Q));else J(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const J=()=>{if(this.destroyed||this._destroying)return;this.getStats((q,Q)=>{if(this.destroyed||this._destroying)return;if(q)Q=[];const G={},X={},Y={};let V=!1;Q.forEach((W)=>{if(W.type==="remotecandidate"||W.type==="remote-candidate")G[W.id]=W;if(W.type==="localcandidate"||W.type==="local-candidate")X[W.id]=W;if(W.type==="candidatepair"||W.type==="candidate-pair")Y[W.id]=W});const K=(W)=>{V=!0;let Z=X[W.localCandidateId];if(Z&&(Z.ip||Z.address))this.localAddress=Z.ip||Z.address,this.localPort=Number(Z.port);else if(Z&&Z.ipAddress)this.localAddress=Z.ipAddress,this.localPort=Number(Z.portNumber);else if(typeof W.googLocalAddress==="string")Z=W.googLocalAddress.split(":"),this.localAddress=Z[0],this.localPort=Number(Z[1]);if(this.localAddress)this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4";let $=G[W.remoteCandidateId];if($&&($.ip||$.address))this.remoteAddress=$.ip||$.address,this.remotePort=Number($.port);else if($&&$.ipAddress)this.remoteAddress=$.ipAddress,this.remotePort=Number($.portNumber);else if(typeof W.googRemoteAddress==="string")$=W.googRemoteAddress.split(":"),this.remoteAddress=$[0],this.remotePort=Number($[1]);if(this.remoteAddress)this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4";this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(Q.forEach((W)=>{if(W.type==="transport"&&W.selectedCandidatePairId)K(Y[W.selectedCandidatePairId]);if(W.type==="googCandidatePair"&&W.googActiveConnection==="true"||(W.type==="candidatepair"||W.type==="candidate-pair")&&W.selected)K(W)}),!V&&(!Object.keys(Y).length||Object.keys(X).length)){setTimeout(J,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(Z){return this.__destroy(n.default(Z,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const W=this._cb;this._cb=null,W(null)}if(typeof this._channel.bufferedAmountLowThreshold!=="number"){if(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref)this._interval.unref()}this._debug("connect"),this.emit("connect")})};J()}_onInterval(){if(!this._cb||!this._channel||this._channel.bufferedAmount>AQ)return;this._onChannelBufferedAmountLow()}_onSignalingStateChange(){if(this.destroyed)return;if(this._pc.signalingState==="stable")if(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach((J)=>{this._pc.removeTrack(J),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation)this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation();else this._debug("negotiated"),this.emit("negotiated");this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState)}_onIceCandidate(J){if(this.destroyed)return;if(J.candidate&&this.trickle)this.emit("signal",{type:"candidate",candidate:{candidate:J.candidate.candidate,sdpMLineIndex:J.candidate.sdpMLineIndex,sdpMid:J.candidate.sdpMid}});else if(!J.candidate&&!this._iceComplete)this._iceComplete=!0,this.emit("_iceComplete");if(J.candidate)this._startIceCompleteTimeout()}_onChannelMessage(J){if(this.destroyed)return;let q=J.data;if(q instanceof ArrayBuffer)q=new Uint8Array(q);else if(this.__objectMode===!1)q=_G(q);this.push(q)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const J=this._cb;this._cb=null,J(null)}_onChannelOpen(){if(this._connected||this.destroyed)return;this._debug("on channel open"),this._channelReady=!0,this._maybeReady()}_onChannelClose(){if(this.destroyed)return;this._debug("on channel close"),this.__destroy()}_debug(){const J=[].slice.call(arguments);J[0]="["+this._id+"] "+J[0],YW.apply(null,J)}}T8.WEBRTC_SUPPORT=!!hJ;T8.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"};T8.channelConfig={};var cG=T8;var z0=o1(SQ(),1);/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */class fG extends cG{constructor(J={}){super(J);if(!this._pc)return;if(this.streams=J.streams||(J.stream?[J.stream]:[]),this._senderMap=new Map,this.streams)this.streams.forEach((q)=>{this.addStream(q)});this._pc.ontrack=(q)=>{this._onTrack(q)}}addTransceiver(J,q){if(this._destroying)return;if(this.destroyed)throw z0.default(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(J,q),this._needsNegotiation()}catch(Q){this.__destroy(z0.default(Q,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:J,init:q}})}addStream(J){if(this._destroying)return;if(this.destroyed)throw z0.default(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),J.getTracks().forEach((q)=>{this.addTrack(q,J)})}addTrack(J,q){if(this._destroying)return;if(this.destroyed)throw z0.default(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const Q=this._senderMap.get(J)||new Map;let G=Q.get(q);if(!G)G=this._pc.addTrack(J,q),Q.set(q,G),this._senderMap.set(J,Q),this._needsNegotiation();else if(G.removed)throw z0.default(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED");else throw z0.default(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(J,q,Q){if(this._destroying)return;if(this.destroyed)throw z0.default(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const G=this._senderMap.get(J),X=G?G.get(Q):null;if(!X)throw z0.default(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");if(q)this._senderMap.set(q,G);if(X.replaceTrack!=null)X.replaceTrack(q);else this.__destroy(z0.default(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(J,q){if(this._destroying)return;if(this.destroyed)throw z0.default(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const Q=this._senderMap.get(J),G=Q?Q.get(q):null;if(!G)throw z0.default(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{G.removed=!0,this._pc.removeTrack(G)}catch(X){if(X.name==="NS_ERROR_UNEXPECTED")this._sendersAwaitingStable.push(G);else this.__destroy(z0.default(X,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(J){if(this._destroying)return;if(this.destroyed)throw z0.default(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),J.getTracks().forEach((q)=>{this.removeTrack(q,J)})}_requestMissingTransceivers(){if(this._pc.getTransceivers)this._pc.getTransceivers().forEach((J)=>{if(!J.mid&&J.sender.track&&!J.requested)J.requested=!0,this.addTransceiver(J.sender.track.kind)})}_onTrack(J){if(this.destroyed)return;J.streams.forEach((q)=>{if(this._debug("on track"),this.emit("track",J.track,q),this._remoteTracks.push({track:J.track,stream:q}),this._remoteStreams.some((Q)=>{return Q.id===q.id}))return;this._remoteStreams.push(q),queueMicrotask(()=>{this._debug("on stream"),this.emit("stream",q)})})}}var pG=fG;var lG="data",dG="signal",RQ=(J,q)=>{const Q=new pG({...{iceServers:[{urls:WW}]},...q,initiator:J,trickle:!1}),G=(Y)=>X.push(Y);let X=[];return Q.on(lG,G),{id:Q._id,created:Date.now(),connection:Q._pc,get channel(){return Q._channel},get isDead(){return Q.destroyed},signal:(Y)=>new Promise((V)=>{if(!J)Q.on(dG,V);Q.signal(Y)}),sendData:(Y)=>Q.send(Y),destroy:()=>Q.destroy(),setHandlers:(Y)=>Object.entries(Y).forEach(([V,K])=>Q.on(V,K)),offerPromise:J?new Promise((Y)=>Q.on(dG,Y)):Promise.resolve(),addStream:(Y)=>Q.addStream(Y),removeStream:(Y)=>Q.removeStream(Y),addTrack:(Y,V)=>Q.addTrack(Y,V),removeTrack:(Y,V)=>Q.removeTrack(Y,V),replaceTrack:(Y,V,K)=>Q.replaceTrack(Y,V,K),drainEarlyData:(Y)=>{Q.off(lG,G),X.forEach(Y),X=null}}},WW=[...Q8(5,(J,q)=>`stun:stun${q||""}.l.google.com:19302`),"stun:global.stun.twilio.com:3478"];var $W=Object.getPrototypeOf(Uint8Array),rJ=12,oG=0,aJ=oG+rJ,sJ=aJ+1,l1=sJ+1,d1=l1+1,v8=16384-d1,nJ=255,iG="bufferedamountlow",G1=(J)=>"@_"+J,nG=(J,q,Q)=>{const G={},X={},Y={},V={},K={},W={},Z={},$={onPeerJoin:p0,onPeerLeave:p0,onPeerStream:p0,onPeerTrack:p0},H=(C,R)=>(C?Array.isArray(C)?C:[C]:s6(G)).flatMap((L)=>{const w=G[L];if(!w)return console.warn(`${w8}: no peer with id ${L} found`),[];return R(L,w)}),U=(C)=>{if(!G[C])return;delete G[C],delete V[C],delete K[C],$.onPeerLeave(C),q(C)},z=(C)=>{if(X[C])return Y[C];if(!C)throw F0("action type argument is required");const R=v0(C);if(R.byteLength>rJ)throw F0(`action type string "${C}" (${R.byteLength}b) exceeds `+`byte limit (${rJ}). Hint: choose a shorter name.`);const L=new Uint8Array(rJ);L.set(R);let w=0;return X[C]={onComplete:p0,onProgress:p0,setOnComplete:(k)=>X[C]={...X[C],onComplete:k},setOnProgress:(k)=>X[C]={...X[C],onProgress:k},send:async(k,v,g,E)=>{if(g&&typeof g!=="object")throw F0("action meta argument must be an object");const c=typeof k;if(c==="undefined")throw F0("action data cannot be undefined");const p=c!=="string",h=k instanceof Blob,s=h||k instanceof ArrayBuffer||k instanceof $W;if(g&&!s)throw F0("action meta argument can only be used with binary data");const b=s?new Uint8Array(h?await k.arrayBuffer():k):v0(p?O0(k):k),a=g?v0(O0(g)):null,f=Math.ceil(b.byteLength/v8)+(g?1:0)||1,i=Q8(f,(V0,t)=>{const U0=t===f-1,j0=g&&t===0,X0=new Uint8Array(d1+(j0?a.byteLength:U0?b.byteLength-v8*(f-(g?2:1)):v8));return X0.set(L),X0.set([w],aJ),X0.set([U0|j0<<1|s<<2|p<<3],sJ),X0.set([Math.round((t+1)/f*nJ)],l1),X0.set(g?j0?a:b.subarray((t-1)*v8,t*v8):b.subarray(t*v8,(t+1)*v8),d1),X0});return w=w+1&nJ,q8(H(v,async(V0,t)=>{const{channel:U0}=t;let j0=0;while(j0<f){const X0=i[j0];if(U0.bufferedAmount>U0.bufferedAmountLowThreshold)await new Promise((V8)=>{const y0=()=>{U0.removeEventListener(iG,y0),V8()};U0.addEventListener(iG,y0)});if(!G[V0])break;t.sendData(X0),j0++,E?.(X0[l1]/nJ,V0,g)}}))}},Y[C]||=[X[C].send,X[C].setOnComplete,X[C].setOnProgress]},P=(C,R)=>{const L=new Uint8Array(R),w=n8(L.subarray(oG,aJ)).replaceAll("\0",""),[k]=L.subarray(aJ,sJ),[v]=L.subarray(sJ,l1),[g]=L.subarray(l1,d1),E=L.subarray(d1),c=!!(v&1),p=!!(v&1<<1),h=!!(v&1<<2),s=!!(v&1<<3);if(!X[w]){console.warn(`${w8}: received message with unregistered type (${w})`);return}V[C]||={},V[C][w]||={};const b=V[C][w][k]||={chunks:[]};if(p)b.meta=x8(n8(E));else b.chunks.push(E);if(X[w].onProgress(g/nJ,C,b.meta),!c)return;const a=new Uint8Array(b.chunks.reduce((f,i)=>f+i.byteLength,0));if(b.chunks.reduce((f,i)=>{return a.set(i,f),f+i.byteLength},0),delete V[C][w][k],h)X[w].onComplete(a,C,b.meta);else{const f=n8(a);X[w].onComplete(s?x8(f):f,C)}},j=async()=>{await I(""),await new Promise((C)=>setTimeout(C,99)),TJ(G).forEach(([C,R])=>{R.destroy(),delete G[C]}),Q()},[M,O]=z(G1("ping")),[F,N]=z(G1("pong")),[B,A]=z(G1("signal")),[D,x]=z(G1("stream")),[S,y]=z(G1("track")),[I,T]=z(G1("leave"));if(J((C,R)=>{if(G[R])return;G[R]=C,C.setHandlers({data:(L)=>P(R,L),stream:(L)=>{$.onPeerStream(L,R,W[R]),delete W[R]},track:(L,w)=>{$.onPeerTrack(L,w,R,Z[R]),delete Z[R]},signal:(L)=>B(L,R),close:()=>U(R),error:()=>U(R)}),$.onPeerJoin(R),C.drainEarlyData?.((L)=>P(R,L))}),O((C,R)=>F("",R)),N((C,R)=>{K[R]?.(),delete K[R]}),A((C,R)=>G[R]?.signal(C)),x((C,R)=>W[R]=C),y((C,R)=>Z[R]=C),T((C,R)=>U(R)),v1)addEventListener("beforeunload",j);return{makeAction:z,leave:j,ping:async(C)=>{if(!C)throw F0("ping() must be called with target peer ID");const R=Date.now();return M("",C),await new Promise((L)=>K[C]=L),Date.now()-R},getPeers:()=>YQ(TJ(G).map(([C,R])=>[C,R.connection])),addStream:(C,R,L)=>H(R,async(w,k)=>{if(L)await D(L,w);k.addStream(C)}),removeStream:(C,R)=>H(R,(L,w)=>w.removeStream(C)),addTrack:(C,R,L,w)=>H(L,async(k,v)=>{if(w)await S(w,k);v.addTrack(C,R)}),removeTrack:(C,R,L)=>H(L,(w,k)=>k.removeTrack(C,R)),replaceTrack:(C,R,L,w,k)=>H(w,async(v,g)=>{if(k)await S(k,v);g.replaceTrack(C,R,L)}),onPeerJoin:(C)=>$.onPeerJoin=C,onPeerLeave:(C)=>$.onPeerLeave=C,onPeerStream:(C)=>$.onPeerStream=C,onPeerTrack:(C)=>$.onPeerTrack=C}};var zW=20,UW=5333,rG=57333,aG=({init:J,subscribe:q,announce:Q})=>{const G={};let X=!1,Y,V,K;return(W,Z,$)=>{const{appId:H}=W;if(G[H]?.[Z])return G[H][Z];const U={},z={},P=g1(w8,H,Z),j=y1(P),M=y1(g1(P,T0)),O=Q5(W.password||"",H,Z),F=(k)=>async(v)=>({type:v.type,sdp:await k(O,v.sdp)}),N=F(Y5),B=F(X5),A=()=>RQ(!0,W.rtcConfig),D=(k,v,g)=>{if(z[v]){if(z[v]!==k)k.destroy();return}z[v]=k,w(k,v),U[v]?.forEach((E,c)=>{if(c!==g)E.destroy()}),delete U[v]},x=(k,v)=>{if(z[v]===k)delete z[v]},S=(k,v)=>{if(z[k])return;const g=U[k]?.[v];if(g)delete U[k][v],g.destroy()},y=(k)=>{return V.push(...Q8(k,A)),q8(V.splice(0,k).map((v)=>v.offerPromise.then(B).then((g)=>({peer:v,offer:g}))))},I=(k,v)=>$?.({error:`incorrect password (${W.password}) when decrypting ${v}`,appId:H,peerId:k,roomId:Z}),T=(k)=>async(v,g,E)=>{const[c,p]=await q8([j,M]);if(v!==c&&v!==p)return;const{peerId:h,offer:s,answer:b,peer:a}=typeof g==="string"?x8(g):g;if(h===T0||z[h])return;if(h&&!s&&!b){if(U[h]?.[k])return;const[[{peer:f,offer:i}],V0]=await q8([y(1),y1(g1(P,h))]);U[h]||=[],U[h][k]=f,setTimeout(()=>S(h,k),C[k]*0.9),f.setHandlers({connect:()=>D(f,h,k),close:()=>x(f,h)}),E(V0,O0({peerId:T0,offer:i}))}else if(s){if(U[h]?.[k]&&T0>h)return;const i=RQ(!1,W.rtcConfig);i.setHandlers({connect:()=>D(i,h,k),close:()=>x(i,h)});let V0;try{V0=await N(s)}catch{I(h,"offer");return}if(i.isDead)return;const[t,U0]=await q8([y1(g1(P,h)),i.signal(V0)]);E(t,O0({peerId:T0,answer:await B(U0)}))}else if(b){let f;try{f=await N(b)}catch(i){I(h,"answer");return}if(a)a.setHandlers({connect:()=>D(a,h,k),close:()=>x(a,h)}),a.signal(f);else{const i=U[h]?.[k];if(i&&!i.isDead)i.signal(f)}}};if(!W)throw F0("requires a config map as the first argument");if(!H&&!W.firebaseApp)throw F0("config map is missing appId field");if(!Z)throw F0("roomId argument required");if(!X){const k=J(W);V=Q8(zW,A),Y=Array.isArray(k)?k:[k],X=!0,K=setInterval(()=>V=V.filter((v)=>{const g=Date.now()-v.created<rG;if(!g)v.destroy();return g}),rG*1.03)}const C=Y.map(()=>UW),R=[],L=Y.map(async(k,v)=>q(await k,await j,await M,T(v),y));q8([j,M]).then(([k,v])=>{const g=async(E,c)=>{const p=await Q(E,k,v);if(typeof p==="number")C[c]=p;R[c]=setTimeout(()=>g(E,c),C[c])};L.forEach(async(E,c)=>{await E,g(await Y[c],c)})});let w=p0;return G[H]||={},G[H][Z]=nG((k)=>w=k,(k)=>delete z[k],()=>{delete G[H][Z],R.forEach(clearTimeout),L.forEach(async(k)=>(await k)()),clearInterval(K)})}};var Q7={},jW=5,q7="x",G7="EVENT",X7=v1&&IJ.utils.randomPrivateKey(),HW=v1&&vJ(IJ.getPublicKey(X7)),TQ={},i1={},sG={},Y7=()=>Math.floor(Date.now()/1000),V7=(J)=>sG[J]??(sG[J]=VQ(J,1e4)+20000),tG=async(J,q)=>{const Q={kind:V7(J),content:q,pubkey:HW,created_at:Y7(),tags:[[q7,J]]},G=vJ(new Uint8Array(await crypto.subtle.digest("SHA-256",v0(O0([0,Q.pubkey,Q.created_at,Q.kind,Q.tags,Q.content])))));return O0([G7,{...Q,id:G,sig:vJ(await IJ.sign(G,X7))}])},eG=(J,q)=>{return TQ[J]=q,O0(["REQ",J,{kinds:[V7(q)],since:Y7(),["#"+q7]:[q]}])},J7=(J)=>{return delete TQ[J],O0(["CLOSE",J])},vQ=aG({init:(J)=>t6(J,BW,jW,!0).map((q)=>{const Q=e6(q,(G)=>{const[X,Y,V,K]=x8(G);if(X!==G7){const W=`${w8}: relay failure from ${Q.url} - `;if(X==="NOTICE")console.warn(W+Y);else if(X==="OK"&&!V)console.warn(W+K);return}i1[Y]?.(TQ[Y],V.content)});return Q7[q]=Q,Q.ready}),subscribe:(J,q,Q,G)=>{const X=RJ(64),Y=RJ(64);return i1[X]=i1[Y]=(V,K)=>G(V,K,async(W,Z)=>J.send(await tG(W,Z))),J.send(eG(X,q)),J.send(eG(Y,Q)),()=>{J.send(J7(X)),J.send(J7(Y)),delete i1[X],delete i1[Y]}},announce:async(J,q)=>J.send(await tG(q,O0({peerId:T0})))}),MW=J5(Q7),BW=["eu.purplerelay.com","ftp.halifax.rwth-aachen.de/nostr","longhorn.bgp.rodeo","multiplexer.huszonegy.world","nfdb.noswhere.com","nostr-verified.wellorder.net","nostr.cool110.xyz","nostr.data.haus","nostr.grooveix.com","nostr.huszonegy.world","nostr.mom","nostr.openhoofd.nl","nostr.petrkr.net/strfry","nostr.sathoarder.com","nostr.stakey.net","nostr.vulpem.com","nostr2.sanhauf.com","nostrelay.circum.space","relay.fountain.fm","relay.nostraddress.com","relay.nostromo.social","relay.snort.social","relay.verified-nostr.com","strfry.openhoofd.nl","yabu.me/v2"].map((J)=>"wss://"+J);var K7=(J,q,Q)=>{if(!J||!J.timestamp)return{resolved:!0,value:q.value,timestamp:q.timestamp};const G=q.timestamp,X=J.timestamp;if(Q.compare(X,G)<0)return{resolved:!0,value:q.value,timestamp:q.timestamp};return{resolved:!1}};var LW=()=>{let J=!1;const q=async(X)=>{while(J)await new Promise((Y)=>setTimeout(Y,10));J=!0;try{return await X()}finally{J=!1}},Q=async(X)=>{return q(async()=>{try{const Y=await(await navigator.storage.getDirectory()).getFileHandle(X,{create:!1}).then((K)=>K.createSyncAccessHandle()),V=new Uint8Array(Y.getSize());return Y.read(V,{at:0}),Y.close(),{type:"loaded",name:X,data:V}}catch(Y){return{type:"error",name:X,message:Y.message||"File not found"}}})},G=async(X,Y)=>{return q(async()=>{if(!(Y instanceof Uint8Array))throw new Error("Content must be a Uint8Array");try{const V=await(await navigator.storage.getDirectory()).getFileHandle(X,{create:!0}).then((K)=>K.createSyncAccessHandle());return V.write(Y,{at:0}),V.truncate(Y.byteLength),V.close(),{type:"saved",name:X}}catch(V){return{type:"error",name:X,message:V.message||"Error saving the file"}}})};self.onmessage=async({data:{type:X,name:Y,content:V}})=>{try{const K=X==="load"?await Q(Y):X==="save"?await G(Y,V):{type:"error",message:"Unrecognized action"};self.postMessage(K)}catch(K){self.postMessage({type:"error",message:K.message||"Unexpected error"})}}},Z7=LW;var g8={$eq:(J,q)=>J===q,$ne:(J,q)=>J!==q,$gt:(J,q)=>J>q,$gte:(J,q)=>J>=q,$lt:(J,q)=>J<q,$lte:(J,q)=>J<=q,$in:(J,q)=>Array.isArray(q)&&q.includes(J),$between:(J,[q,Q])=>J>=q&&J<=Q,$exists:(J,q)=>q?J!==void 0:J===void 0,$text:{global:(J,q)=>{const Q=(X)=>String(X).normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^\w\s]/g,""),G=Q(q);return Object.values(J).some((X)=>{if(typeof X==="object")return null.fieldSearch(X,G);return Q(X).includes(G)})},field:(J,q)=>{const Q=(G)=>String(G).normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^\w\s]/g,"");return Array.isArray(J)?J.some((G)=>Q(G).includes(Q(q))):Q(J).includes(Q(q))}},$like:(J,q)=>{if(typeof J!=="string"||typeof q!=="string")return!1;return new RegExp(`^${q.replace(/%/g,".*").replace(/_/g,".")}\$`,"i").test(J)},$regex:(J,q)=>typeof J==="string"&&new RegExp(q.$regex||q,"i").test(J),$and:(J,q,Q)=>q.every((G)=>{return Q.createFilter(G)(J)}),$or:(J,q,Q)=>q.some((G)=>{return Q.createFilter(G)(J)}),$not:(J,q,Q)=>{return!Q.createFilter(q)(J)}},gQ=(J,q)=>{const Q=q.split(".");let G=J;for(let X of Q)if(G&&typeof G==="object"&&(X in G))G=G[X];else return;return G},yQ=(J)=>{const q=(Q)=>{return Object.entries(J).every(([G,X])=>{if(G.startsWith("$"))return g8[G](Q,X,{filterNode:q,createFilter:yQ});const Y=gQ(Q.value,G);if(typeof X!=="object"||X===null)return g8.$eq(Y,X);return Object.entries(X).every(([V,K])=>{if(V==="$text")return g8.$text.field(Y,K);if(V==="$between"&&K.every((W)=>W instanceof Date)){const W=new Date(Y);return g8.$between(W,K)}return g8[V]?.(Y,K,{filterNode:q,createFilter:yQ})??!1})})};return q},EQ=(J,q)=>{const Q=yQ(q.query);let G=Object.values(J).filter(Q);if(q.field)G.sort((X,Y)=>{const V=gQ(X.value,q.field),K=gQ(Y.value,q.field),W=q.order==="asc"?1:-1;if(typeof V==="string"&&typeof K==="string")return V.localeCompare(K)*W;return((V??0)-(K??0))*W});if(q.$after){const X=G.findIndex((Y)=>Y.id===q.$after);G=X>=0?G.slice(X+1):[]}if(q.$before){const X=G.findIndex((Y)=>Y.id===q.$before);G=X>=0?G.slice(0,X):[]}return q.$limit?G.slice(0,q.$limit):G};class hQ{constructor(){this.physical=Date.now(),this.logical=0}now(){const J=Date.now();return this.physical=Math.max(this.physical,J),this.logical++,{physical:this.physical,logical:this.logical}}update(J){this.physical=Math.max(this.physical,J.physical),this.logical=Math.max(this.logical,J.logical)+1}compare(J,q){if(J.logical>q.logical)return 1;else if(J.logical<q.logical)return-1;else return J.physical-q.physical}}var W7=function(J,q){return J.length===q.length&&J.every((Q,G)=>Q===q[G])};async function PW(){console.log("\u26A1 GDB-P2P: Empowering distributed graph databases with real-time synchronization and scalability. Learn more: https://github.com/estebanrfp/gdb \u26A1"),console.log(navigator?.storage?.getDirectory?"OPFS is enabled.":"OPFS is not available."),navigator?.storage?.getDirectory&&await navigator.storage.getDirectory()}if(Symbol.dispose===void 0)Object.defineProperty(Symbol,"dispose",{value:Symbol.for("Symbol.dispose")});class $7{constructor(){this.nodes={}}insert(J,q,Q){this.nodes[J]={id:J,value:q,edges:[],timestamp:Q}}get(J){return this.nodes[J]||null}link(J,q){const Q=this.nodes[J],G=this.nodes[q];if(Q&&G&&!Q.edges.includes(q))Q.edges.push(q)}getAllNodes(){return Object.values(this.nodes)}serialize(){return v9.deflate(E0(this.nodes))}deserialize(J){this.nodes=QJ(v9.inflate(new Uint8Array(J)))}}class _Q{constructor(J,{password:q}={}){this.hybridClock=new hQ;const Q=localStorage.getItem(`${this.name}_time`);this.globalTimestamp=Q?JSON.parse(Q):null,this.changeList=[],this.name=J,this.password=q,this.graph=new $7,this.eventListeners=[],this.operators=g8,this.initWorker(),this.ready=this.loadGraphFromOPFS();const G=`graph-sync-room-${this.name}`,X={appId:"1234",...this.password&&{password:this.password}},Y=vQ(X,G);this.room=Y;const[V,K]=Y.makeAction("syncGraph");this.sendData=V,window.addEventListener("online",async()=>{console.log("\u2705 Reconnected to the network.");const W=localStorage.getItem(`${this.name}_time`);this.globalTimestamp=W?JSON.parse(W):null,this.sendData([{type:"sync",timestamp:this.globalTimestamp}])}),window.addEventListener("offline",async()=>{console.log("\u274C Disconnected from the network.")}),document.addEventListener("visibilitychange",()=>{if(document.visibilityState==="visible"){console.log("La pesta\xF1a es visible nuevamente.");const W=localStorage.getItem(`${this.name}_time`);this.globalTimestamp=W?JSON.parse(W):null,this.sendData([{type:"sync",timestamp:this.globalTimestamp}])}else if(document.visibilityState==="hidden")console.log("La pesta\xF1a ya no es visible.")}),PW(),Y.onPeerJoin(async(W)=>{console.log("\u26A1 New pair connected:",W);const Z=localStorage.getItem(`${this.name}_time`);this.globalTimestamp=Z?JSON.parse(Z):null,this.sendData([{type:"sync",timestamp:this.globalTimestamp}])}),Y.onPeerLeave((W)=>{console.log("\u26A1 Pair disconnected:",W)}),K((W)=>this.receiveChanges(W)),this.channel=new BroadcastChannel(`graphdb_sync_${this.name}`),this.channel.onmessage=async(W)=>{if(W.data==="update")console.log("\uD83D\uDD04 Update received from another tab..."),await this.loadGraphFromOPFS(),this.emit()}}initWorker=async()=>{try{const J=URL.createObjectURL(new Blob([`(${Z7.toString()})()`],{type:"application/javascript"}));this.worker=new Worker(J),URL.revokeObjectURL(J),this.worker.addEventListener("message",({data:q})=>console.log("Worker message:",`${q.name} ${q.type}`)),console.log("Worker initialized successfully.")}catch({message:J}){console.error("Failed to initialize worker:",J)}};getWorker(){return this.worker}emit(){const J=this.graph.getAllNodes();this.eventListeners.forEach((q)=>q(J))}on(J){this.eventListeners.push(J)}off(J){if(J)this.eventListeners=this.eventListeners.filter((q)=>q!==J);else this.eventListeners=[]}addChange(J,q,Q){const G={id:J,timestamp:q,operation:Q};this.changeList.push(G)}async getAllNodes(){return await this.ready,this.graph.getAllNodes()}async generateHash(){return crypto.randomUUID()}async hashValue(J){const q=(new TextEncoder()).encode(J),Q=await crypto.subtle.digest("SHA-256",q);return Array.from(new Uint8Array(Q)).map((G)=>G.toString(16).padStart(2,"0")).join("")}async loadGraphFromOPFS(){try{const J=(G)=>new Promise((X,Y)=>{const V=({data:K})=>{if(K.type==="loaded"&&K.name===G)this.worker.removeEventListener("message",V),X(new Uint8Array(K.data));else if(K.type==="error")this.worker.removeEventListener("message",V),Y(new Error(K.message||"Unknown error"))};this.worker.addEventListener("message",V),this.worker.postMessage({type:"load",name:G})}),q=await J(`${this.name}_graph.msgpack`).catch(()=>new Uint8Array);q.byteLength>0?this.graph.deserialize(q):console.warn("The file '_graph.msgpack' is empty or could not be loaded.");const Q=await J(`${this.name}_changelist.msgpack`).catch(()=>new Uint8Array);Q.byteLength>0?this.changeList=QJ(Q):console.warn("The file '_changelist.msgpack' is empty or could not be loaded."),console.log(`Graph loaded from OPFS: [ ${this.graph.getAllNodes().length} nodes ]`)}catch({message:J}){console.error("General error loading the graph from OPFS:",J)}}async saveGraphToOPFS(){try{const J=this.graph.serialize(),q=E0(this.changeList),Q=(G,X)=>new Promise((Y,V)=>{const K=({data:W})=>{if(W.type==="saved"&&W.name===G)this.worker.removeEventListener("message",K),Y();else if(W.type==="error")this.worker.removeEventListener("message",K),V(new Error(W.message||"Save error"))};this.worker.addEventListener("message",K),this.worker.postMessage({type:"save",name:G,content:X})});return await Q(`${this.name}_graph.msgpack`,J),await Q(`${this.name}_changelist.msgpack`,q),this.channel.postMessage("update"),!0}catch({message:J}){throw console.error("Save error:",J),new Error("Save failed")}}async put(J,q){await this.ready;const Q=this.hybridClock.now();return localStorage.setItem(`${this.name}_time`,JSON.stringify(Q)),q??=await this.generateHash(E0(J)),this.graph.insert(q,J,Q),this.addChange(q,Q,"insert"),await this.saveGraphToOPFS(),this.sendData([{type:"insert",id:q,value:J,timestamp:Q}]),this.emit(),q}async get(J,q=null){if(await this.ready,typeof J!=="string")return console.error("Parameter must be a valid ID (string)."),{result:null};const Q=this.graph.get(J);if(!Q)return console.error(`Node with ID '${J}' not found.`),{result:null};if(!q)return{result:Q};q(Q);const G=(X)=>{const Y=X.find((V)=>V.id===J);if(Y&&Q&&Y.timestamp){if(this.hybridClock.compare(Y.timestamp,Q.timestamp)>0)Q.value=Y.value,Q.timestamp=Y.timestamp,q(Y)}};return this.eventListeners.push(G),{result:Q,...q&&{unsubscribe:()=>this.eventListeners.splice(this.eventListeners.indexOf(G),1)}}}async map(...J){await this.ready;let Q={...{realtime:!1,query:{},field:null,order:"asc",$limit:null,$after:null,$before:null}},G=null,X=!1;J.forEach((W)=>typeof W==="function"?G=W:W&&typeof W==="object"&&(X||=("realtime"in W),Object.assign(Q,W))),G&&!X&&(Q.realtime=!0);let Y=EQ(this.graph.nodes,Q),V=null;const K=(W)=>{const Z=W.filter((z)=>!Y.some((P)=>P.id===z.id)),$=Y.filter((z)=>!W.some((P)=>P.id===z.id)),H=W.filter((z)=>{const P=Y.find((j)=>j.id===z.id);return P&&!W7(E0(z.value),E0(P.value))}),U=(z,P)=>{const j=P==="removed"?null:z.value,M={id:z.id,value:j,edges:z.edges||[],timestamp:z.timestamp||null,action:P};G(M)};Z.forEach((z)=>U(z,"added")),$.forEach((z)=>U(z,"removed")),H.forEach((z)=>U(z,"updated"))};if(G){if(Y.forEach((W)=>{if(W.value)G({id:W.id,value:W.value,edges:W.edges,timestamp:W.timestamp,action:"initial"})}),Q.realtime)V=(W)=>{const Z=EQ(W,Q);if(!W7(E0(Z),E0(Y)))K(Z),Y=Z},this.on(V)}return{results:Y,...Q.realtime&&{unsubscribe:()=>V&&this.off(V)}}}async remove(J){await this.ready;const q=this.hybridClock.now(),Q=this.graph.get(J);if(!Q)return console.error(`Node with ID '${J}' not found.`);delete this.graph.nodes[J],Object.values(this.graph.nodes).forEach((G)=>G.edges=G.edges.filter((X)=>X!==J)),this.addChange(J,q,"remove"),await this.saveGraphToOPFS(),localStorage.setItem(`${this.name}_time`,JSON.stringify(q)),this.sendData([{type:"remove",id:J,value:Q.value,timestamp:q}]),this.emit()}async clear(){await this.ready,this.graph.nodes={};try{await(await navigator.storage.getDirectory()).removeEntry(`${this.name}_graph.msgpack`)}catch({message:J}){console.warn(`Error deleting _graph.msgpack: ${J}`)}console.log("All data has been deleted.")}async link(J,q){await this.ready;const Q=this.hybridClock.now();if(!this.graph.nodes[J]||!this.graph.nodes[q]){console.error(`One or both nodes (${J}, ${q}) do not exist.`);return}this.graph.link(J,q),this.addChange(J,Q,"update"),await this.saveGraphToOPFS(),localStorage.setItem(`${this.name}_time`,JSON.stringify(Q)),this.sendData([{type:"link",sourceId:J,targetId:q,timestamp:Q}]),this.emit()}async applyFullGraph(J){try{this.graph.nodes={...J.nodes},await this.saveGraphToOPFS(),this.emit()}catch({message:q}){console.error(`Error applying the full graph: ${q}`)}}async receiveChanges(J){const q={insert:(Q)=>this.graph.insert(Q.id,Q.value,Q.timestamp),update:(Q)=>{const G=this.graph.get(Q.id),X=K7(G,Q,this.hybridClock);X.resolved&&Object.assign(G,{value:X.value,timestamp:X.timestamp})},remove:(Q)=>delete this.graph.nodes[Q.id],link:(Q)=>this.graph.link(Q.sourceId,Q.targetId),sync:(Q)=>{if(this.hybridClock.compare(this.globalTimestamp,Q.timestamp)>0)console.log("Enviando datos recientes al nodo remoto."),this.sendData([{type:"syncReceive",graph:this.graph}])},syncReceive:(Q)=>this.applyFullGraph(Q.graph)};for(let Q of J)q[Q.type]?.(Q);await this.saveGraphToOPFS(),this.emit()}}function kW(J){if(typeof J!=="object"||J===null)throw new Error("Los roles personalizados deben ser un objeto v\xE1lido.");mQ=J}function z7(J,q,Q=new Set){const G=mQ;if(!G[J])return!1;if(Q.has(J))return!1;if(Q.add(J),G[J].can.includes(q))return!0;if(G[J].inherits)return G[J].inherits.some((X)=>z7(X,q,Q));return!1}async function CW(J,q,Q,G=null){if(await J.ready,!mQ[Q])throw new Error(`El rol '${Q}' no existe.`);let X=`user:${q}`;const Y=J.graph.get(X),V={role:Q,expiresAt:G?new Date(G).toISOString():null};if(Y)Object.assign(Y.value,V);else J.graph.insert(X,V);await J.saveGraphToOPFS(),console.log(`Rol '${Q}' asignado al usuario '${q}'${G?` con caducidad en ${G}`:""}.`)}var U7=function(){const J=new Uint8Array(32);return window.crypto.getRandomValues(J),J},OW=function(){const J=new Uint8Array(16);return window.crypto.getRandomValues(J),J};async function wW(J,q){let Q=`user:${q}`;const G=J.graph.get(Q);if(!G)throw new Error("No tienes un rol asignado.");if(G.value.expiresAt&&new Date(G.value.expiresAt)<new Date)throw new Error("Tu rol ha caducado.");return G.value.role}async function xW(J,q,Q){const G=await wW(J,q);if(!z7(G,Q))throw new Error(`No tienes permiso para realizar la operaci\xF3n '${Q}'.`)}async function FW(J,q,Q,G){return await NW(J,q),await xW(J,q,Q),q}async function NW(J,q){let Q=`user:${q}`,G=J.graph.get(Q);if(!G){const X={storedCredential:null,isAuthenticated:!1};J.graph.insert(Q,X),await J.saveGraphToOPFS(),G=J.graph.get(Q)}if(!G.value.storedCredential)await SW(J,q);else if(!G.value.isAuthenticated)await j7(J,q);else console.log("Ya est\xE1s autenticado. Bot\xF3n desactivado.")}async function SW(J,q){if(!window.PublicKeyCredential){alert("WebAuthn no es soportado en este navegador.");return}let Q=`user:${q}`;const G=OW(),Y={challenge:U7(),rp:{name:"RBAC System"},user:{id:G,name:q,displayName:q},pubKeyCredParams:[{type:"public-key",alg:-7}],authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"required"},timeout:60000,attestation:"direct"};try{const V=await navigator.credentials.create({publicKey:Y}),K=J.graph.get(Q);if(!K){console.error("\xA1Error! El nodo de usuario desapareci\xF3 durante el registro.");return}K.value.storedCredential={id:V.id,type:V.type,rawId:Array.from(new Uint8Array(V.rawId)),response:{attestationObject:Array.from(new Uint8Array(V.response.attestationObject)),clientDataJSON:Array.from(new Uint8Array(V.response.clientDataJSON))}},K.value.isAuthenticated=!0,await J.saveGraphToOPFS(),console.log("Credencial registrada:",V),await j7(J,q)}catch(V){console.error("Error en registro",V)}}async function j7(J,q){let Q=`user:${q}`;const G=J.graph.get(Q);if(!G){alert("No hay usuario registrado. Registra uno primero.");return}const X=G.value.storedCredential;if(!X){alert("No hay credenciales registradas. Registra una primero.");return}const V={challenge:U7(),allowCredentials:[{id:X.id,type:"public-key"}],userVerification:"required",timeout:60000};try{const K=await navigator.credentials.get({publicKey:V});G.value.isAuthenticated=!0,await J.saveGraphToOPFS(),console.log("Autenticaci\xF3n exitosa:",K)}catch(K){console.error("Error en autenticaci\xF3n",K)}}var mQ={superadmin:{can:["assignRole"],inherits:["admin"]},admin:{can:["delete"],inherits:["manager"]},manager:{can:["publish"],inherits:["user"]},user:{can:["write"],inherits:["guest"]},guest:{can:["read"]}};export{kW as setCustomRoles,FW as executeWithPermission,CW as assignRole,_Q as GraphDB};
